(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{EmpheqUtil:()=>q});var n={};e.r(n),e.d(n,{EmpheqBeginItem:()=>u,EmpheqConfiguration:()=>M,EmpheqMethods:()=>b});const r=("undefined"!=typeof window?window:global).MathJax._.components.global,i=(r.GLOBAL,r.isObject,r.combineConfig,r.combineDefaults,r.combineWithMathJax),a=(r.MathJax,MathJax._.input.tex.Configuration),m=a.Configuration,o=(a.ConfigurationHandler,a.ParserConfiguration,MathJax._.input.tex.SymbolMap),p=(o.parseResult,o.AbstractSymbolMap,o.RegExpMap,o.AbstractParseMap,o.CharacterMap,o.DelimiterMap,o.MacroMap,o.CommandMap),h=o.EnvironmentMap,l=MathJax._.input.tex.ParseUtil.default,s=MathJax._.input.tex.TexError.default,c=MathJax._.input.tex.base.BaseItems,d=(c.StartItem,c.StopItem,c.OpenItem,c.CloseItem,c.PrimeItem,c.SubsupItem,c.OverItem,c.LeftItem,c.Middle,c.RightItem,c.BreakItem,c.BeginItem),g=(c.EndItem,c.StyleItem,c.PositionItem,c.CellItem,c.MmlItem,c.FnItem,c.NotItem,c.NonscriptItem,c.DotsItem,c.ArrayItem,c.EqnArrayItem,c.MstyleItem,c.EquationItem,MathJax._.input.tex.TexParser.default),q={environment(e,t,n,r){const i=r[0],a=e.itemFactory.create(i+"-begin").setProperties({name:t,end:i});e.Push(n(e,a,...r.slice(1)))},splitOptions:(e,t=null)=>l.keyvalOptions(e,t,!0),columnCount(e){let t=0;for(const n of e.childNodes){const e=n.childNodes.length-(n.isKind("mlabeledtr")?1:0);e>t&&(t=e)}return t},cellBlock(e,t,n,r){const i=n.create("node","mpadded",[],{height:0,depth:0,voffset:"-1height"}),a=new g(e,n.stack.env,n.configuration),m=a.mml();r&&a.configuration.tags.label&&(a.configuration.tags.currentTag.env=r,a.configuration.tags.getTag(!0));for(const e of m.isInferred?m.childNodes:[m])i.appendChild(e);return i.appendChild(n.create("node","mphantom",[n.create("node","mpadded",[t],{width:0})])),i},topRowTable(e,t){const n=l.copyNode(e,t);return n.setChildren(n.childNodes.slice(0,1)),n.attributes.set("align","baseline 1"),e.factory.create("mphantom",{},[t.create("node","mpadded",[n],{width:0})])},rowspanCell(e,t,n,r,i){e.appendChild(r.create("node","mpadded",[this.cellBlock(t,l.copyNode(n,r),r,i),this.topRowTable(n,r)],{height:0,depth:0,voffset:"height"}))},left(e,t,n,r,i=""){let a;e.attributes.set("columnalign","right "+(e.attributes.get("columnalign")||"")),e.attributes.set("columnspacing","0em "+(e.attributes.get("columnspacing")||""));for(const t of e.childNodes.slice(0).reverse())a=r.create("node","mtd"),t.childNodes.unshift(a),a.parent=t,t.isKind("mlabeledtr")&&(t.childNodes[0]=t.childNodes[1],t.childNodes[1]=a);this.rowspanCell(a,n,t,r,i)},right(e,t,n,r,i=""){0===e.childNodes.length&&e.appendChild(r.create("node","mtr"));const a=q.columnCount(e),m=e.childNodes[0];for(;m.childNodes.length<a;)m.appendChild(r.create("node","mtd"));const o=m.appendChild(r.create("node","mtd"));q.rowspanCell(o,n,t,r,i),e.attributes.set("columnalign",(e.attributes.get("columnalign")||"").split(/ /).slice(0,a).join(" ")+" left"),e.attributes.set("columnspacing",(e.attributes.get("columnspacing")||"").split(/ /).slice(0,a-1).join(" ")+" 0em")},adjustTable(e,t){const n=e.getProperty("left"),r=e.getProperty("right");if(n||r){const i=e.Last,a=l.copyNode(i,t);n&&this.left(i,a,n,t),r&&this.right(i,a,r,t)}},allowEnv:{equation:!0,align:!0,gather:!0,flalign:!0,alignat:!0,multline:!0},checkEnv(e){return this.allowEnv.hasOwnProperty(e.replace(/\*$/,""))||!1}};class u extends d{get kind(){return"empheq-begin"}checkItem(e){return e.isKind("end")&&e.getName()===this.getName()&&this.setProperty("end",!1),super.checkItem(e)}}const b={Empheq(e,t){if(e.stack.env.closing===t.getName()){delete e.stack.env.closing,e.Push(e.itemFactory.create("end").setProperty("name",e.stack.global.empheq)),e.stack.global.empheq="";const t=e.stack.Top();q.adjustTable(t,e),e.Push(e.itemFactory.create("end").setProperty("name","empheq"))}else{l.checkEqnEnv(e);const n=e.GetBrackets("\\begin{"+t.getName()+"}")||"",[r,i]=(e.GetArgument("\\begin{"+t.getName()+"}")||"").split(/=/);if(!q.checkEnv(r))throw new s("UnknownEnv",'Unknown environment "%1"',r);t.setProperty("nestable",!0),n&&t.setProperties(q.splitOptions(n,{left:1,right:1})),e.stack.global.empheq=r,e.string="\\begin{"+r+"}"+(i?"{"+i+"}":"")+e.string.slice(e.i),e.i=0,e.Push(t)}},EmpheqMO(e,t,n){e.Push(e.create("token","mo",{},n))},EmpheqDelim(e,t){const n=e.GetDelimiter(t);e.Push(e.create("token","mo",{stretchy:!0,symmetric:!0},n))}};new h("empheq-env",q.environment,{empheq:["Empheq","empheq"]},b),new p("empheq-macros",{empheqlbrace:["EmpheqMO","{"],empheqrbrace:["EmpheqMO","}"],empheqlbrack:["EmpheqMO","["],empheqrbrack:["EmpheqMO","]"],empheqlangle:["EmpheqMO","\u27e8"],empheqrangle:["EmpheqMO","\u27e9"],empheqlparen:["EmpheqMO","("],empheqrparen:["EmpheqMO",")"],empheqlvert:["EmpheqMO","|"],empheqrvert:["EmpheqMO","|"],empheqlVert:["EmpheqMO","\u2016"],empheqrVert:["EmpheqMO","\u2016"],empheqlfloor:["EmpheqMO","\u230a"],empheqrfloor:["EmpheqMO","\u230b"],empheqlceil:["EmpheqMO","\u2308"],empheqrceil:["EmpheqMO","\u2309"],empheqbiglbrace:["EmpheqMO","{"],empheqbigrbrace:["EmpheqMO","}"],empheqbiglbrack:["EmpheqMO","["],empheqbigrbrack:["EmpheqMO","]"],empheqbiglangle:["EmpheqMO","\u27e8"],empheqbigrangle:["EmpheqMO","\u27e9"],empheqbiglparen:["EmpheqMO","("],empheqbigrparen:["EmpheqMO",")"],empheqbiglvert:["EmpheqMO","|"],empheqbigrvert:["EmpheqMO","|"],empheqbiglVert:["EmpheqMO","\u2016"],empheqbigrVert:["EmpheqMO","\u2016"],empheqbiglfloor:["EmpheqMO","\u230a"],empheqbigrfloor:["EmpheqMO","\u230b"],empheqbiglceil:["EmpheqMO","\u2308"],empheqbigrceil:["EmpheqMO","\u2309"],empheql:"EmpheqDelim",empheqr:"EmpheqDelim",empheqbigl:"EmpheqDelim",empheqbigr:"EmpheqDelim"},b);const M=m.create("empheq",{handler:{macro:["empheq-macros"],environment:["empheq-env"]},items:{[u.prototype.kind]:u}});MathJax.loader&&MathJax.loader.checkVersion("[tex]/empheq","4.0.0-beta.3","tex-extension"),i({_:{input:{tex:{empheq:{EmpheqConfiguration:n,EmpheqUtil:t}}}}})})();