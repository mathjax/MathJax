!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=101)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLWrapper=e.SPACE=e.FONTSIZE=void 0;const i=s(2),o=s(21),n=s(1);e.FONTSIZE={"70.7%":"s","70%":"s","50%":"ss","60%":"Tn","85%":"sm","120%":"lg","144%":"Lg","173%":"LG","207%":"hg","249%":"HG"},e.SPACE={[i.em(2/18)]:"1",[i.em(3/18)]:"2",[i.em(4/18)]:"3",[i.em(5/18)]:"4",[i.em(6/18)]:"5"};class r extends o.CommonWrapper{constructor(){super(...arguments),this.chtml=null}toCHTML(t){const e=this.standardCHTMLnode(t);for(const t of this.childNodes)t.toCHTML(e)}standardCHTMLnode(t){this.markUsed();const e=this.createCHTMLnode(t);return this.handleStyles(),this.handleVariant(),this.handleScale(),this.handleColor(),this.handleSpace(),this.handleAttributes(),this.handlePWidth(),e}markUsed(){this.constructor.used=!0}createCHTMLnode(t){const e=this.node.attributes.get("href");return e&&(t=this.adaptor.append(t,this.html("a",{href:e}))),this.chtml=this.adaptor.append(t,this.html("mjx-"+this.node.kind)),this.chtml}handleStyles(){if(!this.styles)return;const t=this.styles.cssText;if(t){this.adaptor.setAttribute(this.chtml,"style",t);const e=this.styles.get("font-family");e&&this.adaptor.setStyle(this.chtml,"font-family","MJXZERO, "+e)}}handleVariant(){this.node.isToken&&"-explicitFont"!==this.variant&&this.adaptor.setAttribute(this.chtml,"class",(this.font.getVariant(this.variant)||this.font.getVariant("normal")).classes)}handleScale(){this.setScale(this.chtml,this.bbox.rscale)}setScale(t,s){const i=Math.abs(s-1)<.001?1:s;if(t&&1!==i){const s=this.percent(i);e.FONTSIZE[s]?this.adaptor.setAttribute(t,"size",e.FONTSIZE[s]):this.adaptor.setStyle(t,"fontSize",s)}return t}handleSpace(){for(const t of[[this.bbox.L,"space","marginLeft"],[this.bbox.R,"rspace","marginRight"]]){const[s,i,o]=t;if(s){const t=this.em(s);e.SPACE[t]?this.adaptor.setAttribute(this.chtml,i,e.SPACE[t]):this.adaptor.setStyle(this.chtml,o,t)}}}handleColor(){const t=this.node.attributes,e=t.getExplicit("mathcolor"),s=t.getExplicit("color"),i=t.getExplicit("mathbackground"),o=t.getExplicit("background");(e||s)&&this.adaptor.setStyle(this.chtml,"color",e||s),(i||o)&&this.adaptor.setStyle(this.chtml,"backgroundColor",i||o)}handleAttributes(){const t=this.node.attributes,e=t.getAllDefaults(),s=r.skipAttributes;for(const i of t.getExplicitNames())!1!==s[i]&&(i in e||s[i]||this.adaptor.hasAttribute(this.chtml,i))||this.adaptor.setAttribute(this.chtml,i,t.getExplicit(i));if(t.get("class")){const e=t.get("class").trim().split(/ +/);for(const t of e)this.adaptor.addClass(this.chtml,t)}}handlePWidth(){this.bbox.pwidth&&(this.bbox.pwidth===n.BBox.fullWidth?this.adaptor.setAttribute(this.chtml,"width","full"):this.adaptor.setStyle(this.chtml,"width",this.bbox.pwidth))}setIndent(t,e,s){const i=this.adaptor;if("center"===e||"left"===e){const e=this.getBBox().L;i.setStyle(t,"margin-left",this.em(s+e))}if("center"===e||"right"===e){const e=this.getBBox().R;i.setStyle(t,"margin-right",this.em(-s+e))}}drawBBox(){let{w:t,h:e,d:s,R:i}=this.getBBox();const o=this.html("mjx-box",{style:{opacity:.25,"margin-left":this.em(-t-i)}},[this.html("mjx-box",{style:{height:this.em(e),width:this.em(t),"background-color":"red"}}),this.html("mjx-box",{style:{height:this.em(s),width:this.em(t),"margin-left":this.em(-t),"vertical-align":this.em(-s),"background-color":"green"}})]),n=this.chtml||this.parent.chtml,r=this.adaptor.getAttribute(n,"size");r&&this.adaptor.setAttribute(o,"size",r);const a=this.adaptor.getStyle(n,"fontSize");a&&this.adaptor.setStyle(o,"fontSize",a),this.adaptor.append(this.adaptor.parent(n),o),this.adaptor.setStyle(n,"backgroundColor","#FFEE00")}html(t,e={},s=[]){return this.jax.html(t,e,s)}text(t){return this.jax.text(t)}char(t){return this.font.charSelector(t).substr(1)}}e.CHTMLWrapper=r,r.kind="unknown",r.autoStyle=!0,r.used=!1},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BBoxStyleAdjust=MathJax._.util.BBox.BBoxStyleAdjust,e.BBox=MathJax._.util.BBox.BBox},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BIGDIMEN=MathJax._.util.lengths.BIGDIMEN,e.UNITS=MathJax._.util.lengths.UNITS,e.RELUNITS=MathJax._.util.lengths.RELUNITS,e.MATHSPACE=MathJax._.util.lengths.MATHSPACE,e.length2em=MathJax._.util.lengths.length2em,e.percent=MathJax._.util.lengths.percent,e.em=MathJax._.util.lengths.em,e.emRounded=MathJax._.util.lengths.emRounded,e.px=MathJax._.util.lengths.px},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sortLength=MathJax._.util.string.sortLength,e.quotePattern=MathJax._.util.string.quotePattern,e.unicodeChars=MathJax._.util.string.unicodeChars,e.isPercent=MathJax._.util.string.isPercent,e.split=MathJax._.util.string.split},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontData=e.NOSTRETCH=e.H=e.V=void 0,e.V=1,e.H=2,e.NOSTRETCH={dir:0};class i{constructor(){this.variant={},this.delimiters={},this.cssFontMap={},this.remapChars={};let t=this.constructor;this.params=Object.assign({},t.defaultParams),this.sizeVariants=[...t.defaultSizeVariants],this.cssFontMap=Object.assign({},t.defaultCssFonts),this.cssFamilyPrefix=t.defaultCssFamilyPrefix,this.createVariants(t.defaultVariants),this.defineDelimiters(t.defaultDelimiters);for(const e of Object.keys(t.defaultChars))this.defineChars(e,t.defaultChars[e]);this.defineRemap("accent",t.defaultAccentMap),this.defineRemap("mo",t.defaultMoMap),this.defineRemap("mn",t.defaultMnMap)}static charOptions(t,e){const s=t[e];return 3===s.length&&(s[3]={}),s[3]}createVariant(t,e=null,s=null){let i={linked:[],chars:e?Object.create(this.variant[e].chars):{}};s&&this.variant[s]&&(Object.assign(i.chars,this.variant[s].chars),this.variant[s].linked.push(i.chars),i.chars=Object.create(i.chars)),this.remapSmpChars(i.chars,t),this.variant[t]=i}remapSmpChars(t,e){const s=this.constructor;if(s.VariantSmp[e]){const i=s.SmpRemap,o=[null,null,s.SmpRemapGreekU,s.SmpRemapGreekL];for(const[n,r,a]of s.SmpRanges){const l=s.VariantSmp[e][n];if(l){for(let e=r;e<=a;e++){if(930===e)continue;const s=l+e-r;t[e]=this.smpChar(i[s]||s)}if(o[n])for(const e of Object.keys(o[n]).map(t=>parseInt(t)))t[e]=this.smpChar(l+o[n][e])}}}"bold"===e&&(t[988]=this.smpChar(120778),t[989]=this.smpChar(120779))}smpChar(t){return[,,,{smp:t}]}createVariants(t){for(const e of t)this.createVariant(e[0],e[1],e[2])}defineChars(t,e){let s=this.variant[t];Object.assign(s.chars,e);for(const t of s.linked)Object.assign(t,e)}defineDelimiters(t){Object.assign(this.delimiters,t)}defineRemap(t,e){this.remapChars.hasOwnProperty(t)||(this.remapChars[t]={}),Object.assign(this.remapChars[t],e)}getDelimiter(t){return this.delimiters[t]}getSizeVariant(t,e){return this.delimiters[t].variants&&(e=this.delimiters[t].variants[e]),this.sizeVariants[e]}getChar(t,e){return this.variant[t].chars[e]}getVariant(t){return this.variant[t]}getCssFont(t){return this.cssFontMap[t]||["serif",!1,!1]}getFamily(t){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+t:t}getRemappedChar(t,e){return(this.remapChars[t]||{})[e]}}e.FontData=i,i.OPTIONS={},i.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"]],i.defaultCssFonts={normal:["serif",!1,!1],bold:["serif",!1,!0],italic:["serif",!0,!1],"bold-italic":["serif",!0,!0],"double-struck":["serif",!1,!0],fraktur:["serif",!1,!1],"bold-fraktur":["serif",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1]},i.defaultCssFamilyPrefix="",i.VariantSmp={bold:[119808,119834,120488,120514,120782],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},i.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],i.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},i.SmpRemapGreekU={8711:25,1012:17},i.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},i.defaultAccentMap={768:"\u02cb",769:"\u02ca",770:"\u02c6",771:"\u02dc",772:"\u02c9",774:"\u02d8",775:"\u02d9",776:"\xa8",778:"\u02da",780:"\u02c7",8594:"\u20d7",8242:"'",8243:"''",8244:"'''",8245:"`",8246:"``",8247:"```",8279:"''''",8400:"\u21bc",8401:"\u21c0",8406:"\u2190",8417:"\u2194",8432:"*",8411:"...",8412:"....",8428:"\u21c1",8429:"\u21bd",8430:"\u2190",8431:"\u2192"},i.defaultMoMap={45:"\u2212"},i.defaultMnMap={45:"\u2212"},i.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.075,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,min_rule_thickness:1.25},i.defaultDelimiters={},i.defaultChars={},i.defaultSizeVariants=[]},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TEXCLASS=MathJax._.core.MmlTree.MmlNode.TEXCLASS,e.TEXCLASSNAMES=MathJax._.core.MmlTree.MmlNode.TEXCLASSNAMES,e.indentAttributes=MathJax._.core.MmlTree.MmlNode.indentAttributes,e.AbstractMmlNode=MathJax._.core.MmlTree.MmlNode.AbstractMmlNode,e.AbstractMmlTokenNode=MathJax._.core.MmlTree.MmlNode.AbstractMmlTokenNode,e.AbstractMmlLayoutNode=MathJax._.core.MmlTree.MmlNode.AbstractMmlLayoutNode,e.AbstractMmlBaseNode=MathJax._.core.MmlTree.MmlNode.AbstractMmlBaseNode,e.AbstractMmlEmptyNode=MathJax._.core.MmlTree.MmlNode.AbstractMmlEmptyNode,e.TextNode=MathJax._.core.MmlTree.MmlNode.TextNode,e.XMLNode=MathJax._.core.MmlTree.MmlNode.XMLNode},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonArrow=e.CommonDiagonalArrow=e.CommonDiagonalStrike=e.CommonBorder2=e.CommonBorder=e.arrowBBox=e.diagonalArrowDef=e.arrowDef=e.arrowBBoxW=e.arrowBBoxHD=e.arrowHead=e.fullBorder=e.fullPadding=e.fullBBox=e.sideNames=e.sideIndex=e.SOLID=e.PADDING=e.THICKNESS=e.ARROWY=e.ARROWDX=e.ARROWX=void 0,e.ARROWX=4,e.ARROWDX=1,e.ARROWY=2,e.THICKNESS=.067,e.PADDING=.2,e.SOLID=e.THICKNESS+"em solid",e.sideIndex={top:0,right:1,bottom:2,left:3},e.sideNames=Object.keys(e.sideIndex),e.fullBBox=t=>new Array(4).fill(t.thickness+t.padding),e.fullPadding=t=>new Array(4).fill(t.padding),e.fullBorder=t=>new Array(4).fill(t.thickness),e.arrowHead=t=>Math.max(t.padding,t.thickness*(t.arrowhead.x+t.arrowhead.dx+1)),e.arrowBBoxHD=(t,e)=>{if(t.childNodes[0]){const{h:s,d:i}=t.childNodes[0].getBBox();e[0]=e[2]=Math.max(0,t.thickness*t.arrowhead.y-(s+i)/2)}return e},e.arrowBBoxW=(t,e)=>{if(t.childNodes[0]){const{w:s}=t.childNodes[0].getBBox();e[1]=e[3]=Math.max(0,t.thickness*t.arrowhead.y-s/2)}return e},e.arrowDef={up:[-Math.PI/2,!1,!0,"verticalstrike"],down:[Math.PI/2,!1,!0,"verticakstrike"],right:[0,!1,!1,"horizontalstrike"],left:[Math.PI,!1,!1,"horizontalstrike"],updown:[Math.PI/2,!0,!0,"verticalstrike uparrow downarrow"],leftright:[0,!0,!1,"horizontalstrike leftarrow rightarrow"]},e.diagonalArrowDef={updiagonal:[-1,0,!1,"updiagonalstrike northeastarrow"],northeast:[-1,0,!1,"updiagonalstrike updiagonalarrow"],southeast:[1,0,!1,"downdiagonalstrike"],northwest:[1,Math.PI,!1,"downdiagonalstrike"],southwest:[-1,Math.PI,!1,"updiagonalstrike"],northeastsouthwest:[-1,0,!0,"updiagonalstrike northeastarrow updiagonalarrow southwestarrow"],northwestsoutheast:[1,0,!0,"downdiagonalstrike northwestarrow southeastarrow"]},e.arrowBBox={up:t=>e.arrowBBoxW(t,[e.arrowHead(t),0,t.padding,0]),down:t=>e.arrowBBoxW(t,[t.padding,0,e.arrowHead(t),0]),right:t=>e.arrowBBoxHD(t,[0,e.arrowHead(t),0,t.padding]),left:t=>e.arrowBBoxHD(t,[0,t.padding,0,e.arrowHead(t)]),updown:t=>e.arrowBBoxW(t,[e.arrowHead(t),0,e.arrowHead(t),0]),leftright:t=>e.arrowBBoxHD(t,[0,e.arrowHead(t),0,e.arrowHead(t)])},e.CommonBorder=function(t){return s=>{const i=e.sideIndex[s];return[s,{renderer:t,bbox:t=>{const e=[0,0,0,0];return e[i]=t.thickness+t.padding,e},border:t=>{const e=[0,0,0,0];return e[i]=t.thickness,e}}]}},e.CommonBorder2=function(t){return(s,i,o)=>{const n=e.sideIndex[i],r=e.sideIndex[o];return[s,{renderer:t,bbox:t=>{const e=t.thickness+t.padding,s=[0,0,0,0];return s[n]=s[r]=e,s},border:t=>{const e=[0,0,0,0];return e[n]=e[r]=t.thickness,e},remove:i+" "+o}]}},e.CommonDiagonalStrike=function(t){return s=>{const i="mjx-"+s.charAt(0)+"strike";return[s+"diagonalstrike",{renderer:t(i),bbox:e.fullBBox}]}},e.CommonDiagonalArrow=function(t){return s=>{const[i,o,n,r]=e.diagonalArrowDef[s];return[s+"arrow",{renderer:(e,s)=>{const{a:r,W:a}=e.arrowData(),l=e.arrow(a,i*(r-o),n);t(e,l)},bbox:t=>{const{a:e,x:s,y:i}=t.arrowData(),[o,n,r]=[t.arrowhead.x,t.arrowhead.y,t.arrowhead.dx],[a,l]=t.getArgMod(o+r,n),h=i+(a>e?t.thickness*l*Math.sin(a-e):0),d=s+(a>Math.PI/2-e?t.thickness*l*Math.sin(a+e-Math.PI/2):0);return[h,d,h,d]},remove:r}]}},e.CommonArrow=function(t){return s=>{const[i,o,n,r]=e.arrowDef[s];return[s+"arrow",{renderer:(e,s)=>{const{w:r,h:a,d:l}=e.getBBox(),h=n?a+l:r,d=e.arrow(h,i,o);t(e,d)},bbox:e.arrowBBox[s],remove:r}]}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmsubsup=e.CHTMLmsup=e.CHTMLmsub=void 0;const i=s(49),o=s(8),n=s(8),r=s(8),a=s(89);class l extends(o.CommonMsubMixin(i.CHTMLscriptbase)){}e.CHTMLmsub=l,l.kind=a.MmlMsub.prototype.kind,l.useIC=!1;class h extends(n.CommonMsupMixin(i.CHTMLscriptbase)){}e.CHTMLmsup=h,h.kind=a.MmlMsup.prototype.kind,h.useIC=!0;class d extends(r.CommonMsubsupMixin(i.CHTMLscriptbase)){markUsed(){super.markUsed(),d.used=!0}toCHTML(t){const e=this.standardCHTMLnode(t),[s,i,o]=[this.baseChild,this.supChild,this.subChild],[,n,r]=this.getUVQ(s.getBBox(),o.getBBox(),i.getBBox()),a=this.baseCore.bbox.ic?this.coreIC()*this.coreScale():0,l={"vertical-align":this.em(n)};s.toCHTML(e);const h=this.adaptor.append(e,this.html("mjx-script",{style:l}));i.toCHTML(h),this.adaptor.append(h,this.html("mjx-spacer",{style:{"margin-top":this.em(r)}})),o.toCHTML(h);this.baseCore.bbox.ic&&this.adaptor.setStyle(i.chtml,"marginLeft",this.em(a/i.bbox.rscale))}}e.CHTMLmsubsup=d,d.kind=a.MmlMsubsup.prototype.kind,d.styles={"mjx-script":{display:"inline-block","padding-right":".05em"},"mjx-script > *":{display:"block"}},d.useIC=!1},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMsubsupMixin=e.CommonMsupMixin=e.CommonMsubMixin=void 0,e.CommonMsubMixin=function(t){return class extends t{get script(){return this.childNodes[this.node.sub]}getOffset(t,e){return[0,-this.getV(t,e)]}}},e.CommonMsupMixin=function(t){return class extends t{get script(){return this.childNodes[this.node.sup]}getOffset(t,e){return[(this.baseCore.bbox.ic?.05*this.baseCore.bbox.ic+.05:0)*this.coreScale(),this.getU(t,e)]}}},e.CommonMsubsupMixin=function(t){return class extends t{constructor(){super(...arguments),this.UVQ=null}get subChild(){return this.childNodes[this.node.sub]}get supChild(){return this.childNodes[this.node.sup]}computeBBox(t,e=!1){const s=this.baseChild.getBBox(),i=this.subChild.getBBox(),o=this.supChild.getBBox();t.empty(),t.append(s);const n=t.w,[r,a]=this.getUVQ(s,i,o),l=this.baseCore.bbox.ic?this.coreIC()*this.coreScale():0;t.combine(i,n,a),t.combine(o,n+l,r),t.w+=this.font.params.scriptspace,t.clean(),this.setChildPWidths(e)}getUVQ(t,e,s){if(this.UVQ)return this.UVQ;const i=this.font.params,o=3*i.rule_thickness,n=this.length2em(this.node.attributes.get("subscriptshift"),i.sub2),r=this.isCharBase()?0:t.d*t.rscale+i.sub_drop*e.rscale;let[a,l]=[this.getU(t,s),Math.max(r,n)],h=a-s.d*s.rscale-(e.h*e.rscale-l);if(h<o){l+=o-h;const t=.8*i.x_height-(a-s.d*s.rscale);t>0&&(a+=t,l-=t)}return a=Math.max(this.length2em(this.node.attributes.get("superscriptshift"),a),a),l=Math.max(this.length2em(this.node.attributes.get("subscriptshift"),l),l),h=a-s.d*s.rscale-(e.h*e.rscale-l),this.UVQ=[a,-l,h],this.UVQ}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMunderoverMixin=e.CommonMoverMixin=e.CommonMunderMixin=void 0,e.CommonMunderMixin=function(t){return class extends t{get script(){return this.childNodes[this.node.under]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t,e=!1){if(this.hasMovableLimits())return void super.computeBBox(t,e);t.empty();const s=this.baseChild.getBBox(),i=this.script.getBBox(),o=this.getUnderKV(s,i)[1],n=this.getDelta(!0),[r,a]=this.getDeltaW([s,i],[0,-n]);t.combine(s,r,0),t.combine(i,a,o),t.d+=this.font.params.big_op_spacing5,t.ic=-this.baseCore.bbox.ic,t.clean(),this.setChildPWidths(e)}}},e.CommonMoverMixin=function(t){return class extends t{get script(){return this.childNodes[this.node.over]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())return void super.computeBBox(t);t.empty();const e=this.baseChild.getBBox(),s=this.script.getBBox(),i=this.getOverKU(e,s)[1],o=this.getDelta(),[n,r]=this.getDeltaW([e,s],[0,o]);t.combine(e,n,0),t.combine(s,r,i),t.h+=this.font.params.big_op_spacing5,t.ic=-this.baseCore.bbox.ic,t.clean()}}},e.CommonMunderoverMixin=function(t){return class extends t{get underChild(){return this.childNodes[this.node.under]}get overChild(){return this.childNodes[this.node.over]}get subChild(){return this.underChild}get supChild(){return this.overChild}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())return void super.computeBBox(t);t.empty();const e=this.overChild.getBBox(),s=this.baseChild.getBBox(),i=this.underChild.getBBox(),o=this.getOverKU(s,e)[1],n=this.getUnderKV(s,i)[1],r=this.getDelta(),[a,l,h]=this.getDeltaW([s,i,e],[0,-r,r]);t.combine(s,a,0),t.combine(e,h,o),t.combine(i,l,n);const d=this.font.params.big_op_spacing5;t.h+=d,t.d+=d,t.ic=-this.baseCore.bbox.ic,t.clean()}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonInferredMrowMixin=e.CommonMrowMixin=void 0;const i=s(1);e.CommonMrowMixin=function(t){return class extends t{get fixesPWidth(){return!1}constructor(...t){super(...t),this.stretchChildren();for(const t of this.childNodes)if(t.bbox.pwidth){this.bbox.pwidth=i.BBox.fullWidth;break}}stretchChildren(){let t=[];for(const e of this.childNodes)e.canStretch(1)&&t.push(e);let e=t.length,s=this.childNodes.length;if(e&&s>1){let i=0,o=0,n=e>1&&e===s;for(const t of this.childNodes){const e=0===t.stretch.dir;if(n||e){const{h:s,d:n}=t.getBBox(e);s>i&&(i=s),n>o&&(o=n)}}for(const e of t)e.coreMO().getStretchedVariant([i,o])}}}},e.CommonInferredMrowMixin=function(t){return class extends t{getScale(){this.bbox.scale=this.parent.bbox.scale,this.bbox.rscale=1}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmsqrt=void 0;const i=s(0),o=s(46),n=s(87);class r extends(o.CommonMsqrtMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.childNodes[this.surd],s=this.childNodes[this.base],i=e.getBBox(),o=s.getBBox(),[,n]=this.getPQ(i),r=this.font.params.rule_thickness,a=o.h+n+r,l=this.standardCHTMLnode(t);let h,d,c,m;null!=this.root&&(c=this.adaptor.append(l,this.html("mjx-root")),m=this.childNodes[this.root]);const u=this.adaptor.append(l,this.html("mjx-sqrt",{},[h=this.html("mjx-surd"),d=this.html("mjx-box",{style:{paddingTop:this.em(n)}})]));this.addRoot(c,m,i,a),e.toCHTML(h),s.toCHTML(d),e.size<0&&this.adaptor.addClass(u,"mjx-tall")}addRoot(t,e,s,i){}}e.CHTMLmsqrt=r,r.kind=n.MmlMsqrt.prototype.kind,r.styles={"mjx-root":{display:"inline-block","white-space":"nowrap"},"mjx-surd":{display:"inline-block","vertical-align":"top"},"mjx-sqrt":{display:"inline-block","padding-top":".07em"},"mjx-sqrt > mjx-box":{"border-top":".07em solid"},"mjx-sqrt.mjx-tall > mjx-box":{"padding-left":".3em","margin-left":"-.3em"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMlabeledtrMixin=e.CommonMtrMixin=void 0,e.CommonMtrMixin=function(t){return class extends t{get fixesPWidth(){return!1}get numCells(){return this.childNodes.length}get labeled(){return!1}get tableCells(){return this.childNodes}getChild(t){return this.childNodes[t]}getChildBBoxes(){return this.childNodes.map(t=>t.getBBox())}stretchChildren(t=null){let e=[],s=this.labeled?this.childNodes.slice(1):this.childNodes;for(const t of s){const s=t.childNodes[0];s.canStretch(1)&&e.push(s)}let i=e.length,o=this.childNodes.length;if(i&&o>1){if(null===t){let e=0,n=0,r=i>1&&i===o;for(const t of s){const s=t.childNodes[0],i=0===s.stretch.dir;if(r||i){const{h:t,d:o}=s.getBBox(i);t>e&&(e=t),o>n&&(n=o)}}t=[e,n]}for(const s of e)s.coreMO().getStretchedVariant(t)}}}},e.CommonMlabeledtrMixin=function(t){return class extends t{get numCells(){return Math.max(0,this.childNodes.length-1)}get labeled(){return!0}get tableCells(){return this.childNodes.slice(1)}getChild(t){return this.childNodes[t+1]}getChildBBoxes(){return this.childNodes.slice(1).map(t=>t.getBBox())}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMactionMixin=e.TooltipData=void 0;const i=s(3);e.TooltipData={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:(t,e)=>{e.clearTimer.has(t)&&(clearTimeout(e.clearTimer.get(t)),e.clearTimer.delete(t)),e.hoverTimer.has(t)&&(clearTimeout(e.hoverTimer.get(t)),e.hoverTimer.delete(t))}},e.CommonMactionMixin=function(t){return class extends t{constructor(...t){super(...t);const e=this.constructor.actions,s=this.node.attributes.get("actiontype"),[i,o]=e.get(s)||[(t,e)=>{},{}];this.action=i,this.data=o,this.getParameters()}get selected(){const t=this.node.attributes.get("selection"),e=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[e]||this.wrap(this.node.selected)}getParameters(){const t=this.node.attributes.get("data-offsets");let[s,o]=i.split(t||"");this.dx=this.length2em(s||e.TooltipData.dx),this.dy=this.length2em(o||e.TooltipData.dy)}computeBBox(t,e=!1){t.updateFrom(this.selected.getBBox()),this.selected.setChildPWidths(e)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=MathJax._.components.global.isObject,e.combineConfig=MathJax._.components.global.combineConfig,e.combineDefaults=MathJax._.components.global.combineDefaults,e.combineWithMathJax=MathJax._.components.global.combineWithMathJax,e.MathJax=MathJax._.components.global.MathJax},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTML=void 0;const i=s(17),o=s(18),n=s(100),r=s(2),a=s(3);class l extends i.CommonOutputJax{constructor(t=null){super(t,o.CHTMLWrapperFactory,n.TeXFont),this.chtmlStyles=null,this.font.adaptiveCSS(this.options.adaptiveCSS)}escaped(t,e){return this.setDocument(e),this.html("span",{},[this.text(t.math)])}styleSheet(t){if(this.chtmlStyles&&!this.options.adaptiveCSS)return null;const e=this.chtmlStyles=super.styleSheet(t);return this.adaptor.setAttribute(e,"id",l.STYLESHEETID),e}addClassStyles(t){this.options.adaptiveCSS&&!t.used||(t.autoStyle&&"unknown"!==t.kind&&this.cssStyles.addStyles({["mjx-"+t.kind]:{display:"inline-block","text-align":"left"}}),super.addClassStyles(t))}processMath(t,e){this.factory.wrap(t).toCHTML(e)}clearCache(){this.cssStyles.clear(),this.font.clearCache();for(const t of this.factory.getKinds())this.factory.getNodeClass(t).used=!1}unknownText(t,e){const s={},i=100/this.math.metrics.scale;if(100!==i&&(s["font-size"]=this.fixed(i,1)+"%",s.padding=r.em(75/i)+" 0 "+r.em(20/i)+" 0"),"-explicitFont"!==e){const i=a.unicodeChars(t);(1!==i.length||i[0]<119808||i[0]>120831)&&this.cssFontStyles(this.font.getCssFont(e),s)}return this.html("mjx-utext",{variant:e,style:s},[this.text(t)])}measureTextNode(t){const e=this.adaptor;t=e.clone(t);const s=this.html("mjx-measure-text",{style:{position:"absolute","white-space":"nowrap"}},[t]);e.append(e.parent(this.math.start.node),this.container),e.append(this.container,s);let i=e.nodeSize(t,this.math.metrics.em)[0]/this.math.metrics.scale;return e.remove(this.container),e.remove(s),{w:i,h:.75,d:.2}}}e.CHTML=l,l.NAME="CHTML",l.OPTIONS=Object.assign(Object.assign({},i.CommonOutputJax.OPTIONS),{adaptiveCSS:!0}),l.commonStyles={'mjx-container[jax="CHTML"]':{"line-height":0},'mjx-container [space="1"]':{"margin-left":".111em"},'mjx-container [space="2"]':{"margin-left":".167em"},'mjx-container [space="3"]':{"margin-left":".222em"},'mjx-container [space="4"]':{"margin-left":".278em"},'mjx-container [space="5"]':{"margin-left":".333em"},'mjx-container [rspace="1"]':{"margin-right":".111em"},'mjx-container [rspace="2"]':{"margin-right":".167em"},'mjx-container [rspace="3"]':{"margin-right":".222em"},'mjx-container [rspace="4"]':{"margin-right":".278em"},'mjx-container [rspace="5"]':{"margin-right":".333em"},'mjx-container [size="s"]':{"font-size":"70.7%"},'mjx-container [size="ss"]':{"font-size":"50%"},'mjx-container [size="Tn"]':{"font-size":"60%"},'mjx-container [size="sm"]':{"font-size":"85%"},'mjx-container [size="lg"]':{"font-size":"120%"},'mjx-container [size="Lg"]':{"font-size":"144%"},'mjx-container [size="LG"]':{"font-size":"173%"},'mjx-container [size="hg"]':{"font-size":"207%"},'mjx-container [size="HG"]':{"font-size":"249%"},'mjx-container [width="full"]':{width:"100%"},"mjx-box":{display:"inline-block"},"mjx-block":{display:"block"},"mjx-itable":{display:"inline-table"},"mjx-row":{display:"table-row"},"mjx-row > *":{display:"table-cell"},"mjx-mtext":{display:"inline-block"},"mjx-mstyle":{display:"inline-block"},"mjx-merror":{display:"inline-block",color:"red","background-color":"yellow"},"mjx-mphantom":{visibility:"hidden"}},l.STYLESHEETID="MJX-CHTML-styles"},function(t,e,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),o=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||e.hasOwnProperty(s)||i(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.AddCSS=e.CHTMLFontData=void 0;const n=s(4),r=s(2),a=s(68);o(s(4),e);class l extends n.FontData{constructor(t=null){super();let e=this.constructor;this.options=a.userOptions(a.defaultOptions({},e.OPTIONS),t)}static charOptions(t,e){return super.charOptions(t,e)}adaptiveCSS(t){this.options.adaptiveCSS=t}clearCache(){if(this.options.adaptiveCSS){for(const t of Object.keys(this.delimiters))this.delimiters[parseInt(t)].used=!1;for(const t of Object.keys(this.variant)){const e=this.variant[t].chars;for(const t of Object.keys(e)){const s=e[parseInt(t)][3];s&&(s.used=!1)}}}}createVariant(t,e=null,s=null){super.createVariant(t,e,s);let i=this.constructor;this.variant[t].classes=i.defaultVariantClasses[t],this.variant[t].letter=i.defaultVariantLetters[t]}defineChars(t,e){super.defineChars(t,e);const s=this.variant[t].letter;for(const t of Object.keys(e)){const i=l.charOptions(e,parseInt(t));void 0===i.f&&(i.f=s)}}get styles(){const t=this.constructor;let e=Object.assign({},t.defaultStyles);this.addFontURLs(e,t.defaultFonts,this.options.fontURL);for(const t of Object.keys(this.delimiters)){const s=parseInt(t);this.addDelimiterStyles(e,s,this.delimiters[s])}return this.addVariantChars(e),e}addVariantChars(t){const e=!this.options.adaptiveCSS;for(const s of Object.keys(this.variant)){const i=this.variant[s],o=i.letter;for(const s of Object.keys(i.chars)){const n=parseInt(s),r=i.chars[n];(r[3]||{}).smp||(e&&r.length<4&&(r[3]={}),(4===r.length||e)&&this.addCharStyles(t,o,n,r))}}}addFontURLs(t,e,s){for(const i of Object.keys(e)){const o=Object.assign({},e[i]);o.src=o.src.replace(/%%URL%%/,s),t[i]=o}}addDelimiterStyles(t,e,s){if(this.options.adaptiveCSS&&!s.used)return;const i=this.charSelector(e);s.c&&s.c!==e&&(t[".mjx-stretched mjx-c"+i+"::before"]={content:this.charContent(s.c)}),s.stretch&&(1===s.dir?this.addDelimiterVStyles(t,i,s):this.addDelimiterHStyles(t,i,s))}addDelimiterVStyles(t,e,s){const i=s.HDW[2],[o,n,r,a]=s.stretch,l=this.addDelimiterVPart(t,e,i,"beg",o);this.addDelimiterVPart(t,e,i,"ext",n);const h=this.addDelimiterVPart(t,e,i,"end",r),d={};if(a){const s=this.addDelimiterVPart(t,e,i,"mid",a);d.height="50%",t["mjx-stretchy-v"+e+" > mjx-mid"]={"margin-top":this.em(-s/2),"margin-bottom":this.em(-s/2)}}l&&(d["border-top-width"]=this.em0(l-.03)),h&&(d["border-bottom-width"]=this.em0(h-.03),t["mjx-stretchy-v"+e+" > mjx-end"]={"margin-top":this.em(-h)}),Object.keys(d).length&&(t["mjx-stretchy-v"+e+" > mjx-ext"]=d)}addDelimiterVPart(t,e,s,i,o){if(!o)return 0;const n=this.getDelimiterData(o),r=(s-n[2])/2,a={content:this.charContent(o)};return"ext"!==i?a.padding=this.padding(n,r):r&&(a["padding-left"]=this.em0(r)),t["mjx-stretchy-v"+e+" mjx-"+i+" mjx-c::before"]=a,n[0]+n[1]}addDelimiterHStyles(t,e,s){const[i,o,n,r]=s.stretch;this.addDelimiterHPart(t,e,"beg",i),this.addDelimiterHPart(t,e,"ext",o,!(i||n)),this.addDelimiterHPart(t,e,"end",n),r&&(this.addDelimiterHPart(t,e,"mid",r),t["mjx-stretchy-h"+e+" > mjx-ext"]={width:"50%"})}addDelimiterHPart(t,e,s,i,o=!1){if(!i)return;const n=this.getDelimiterData(i),r=n[3],a={content:r&&r.c?'"'+r.c+'"':this.charContent(i)};("ext"!==s||o)&&(a.padding=this.padding(n,0,-n[2])),t["mjx-stretchy-h"+e+" mjx-"+s+" mjx-c::before"]=a}addCharStyles(t,e,s,i){const[,,o,n]=i;if(this.options.adaptiveCSS&&!n.used)return;const r=void 0!==n.f?n.f:e,a="mjx-c"+this.charSelector(s)+(r?".TEX-"+r:"");t[a+"::before"]={padding:this.padding(i,0,n.ic||0),content:null!=n.c?'"'+n.c+'"':this.charContent(s)},n.ic&&(t["[noIC] "+a+":last-child::before"]={"padding-right":this.em(o)})}getDelimiterData(t){return this.getChar("-smallop",t)}em(t){return r.em(t)}em0(t){return r.em(Math.max(0,t))}padding([t,e,s],i=0,o=0){return[t,s+o,e,i].map(this.em0).join(" ")}charContent(t){return'"'+(t>=32&&t<=126&&34!==t&&39!==t&&92!==t?String.fromCharCode(t):"\\"+t.toString(16).toUpperCase())+'"'}charSelector(t){return".mjx-c"+t.toString(16).toUpperCase()}}e.CHTMLFontData=l,l.OPTIONS={fontURL:"js/output/chtml/fonts/tex-woff-v2"},l.defaultVariantClasses={},l.defaultVariantLetters={},l.defaultStyles={"mjx-c::before":{display:"block",width:0}},l.defaultFonts={"@font-face /* 0 */":{"font-family":"MJXZERO",src:'url("%%URL%%/MathJax_Zero.woff") format("woff")'}},e.AddCSS=function(t,e){for(const s of Object.keys(e)){const i=parseInt(s);Object.assign(n.FontData.charOptions(t,i),e[i])}return t}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonOutputJax=void 0;const i=s(70),o=s(71),n=s(68),r=s(2),a=s(69),l=s(72);class h extends i.AbstractOutputJax{constructor(t=null,e=null,s=null){const[i,o]=n.separateOptions(t,s.OPTIONS);super(i),this.factory=this.options.wrapperFactory||new e,this.factory.jax=this,this.cssStyles=this.options.cssStyles||new l.CssStyles,this.font=this.options.font||new s(o),this.unknownCache=new Map}typeset(t,e){this.setDocument(e);let s=this.createNode();return this.toDOM(t,s,e),s}createNode(){const t=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:t})}setScale(t){const e=this.math.metrics.scale*this.options.scale;1!==e&&this.adaptor.setStyle(t,"fontSize",r.percent(e))}toDOM(t,e,s=null){this.setDocument(s),this.math=t,this.pxPerEm=t.metrics.ex/this.font.params.x_height,t.root.setTeXclass(null),this.setScale(e),this.nodeMap=new Map,this.container=e,this.processMath(t.root,e),this.nodeMap=null,this.executeFilters(this.postFilters,t,s,e)}getBBox(t,e){this.setDocument(e),this.math=t,t.root.setTeXclass(null),this.nodeMap=new Map;let s=this.factory.wrap(t.root).getBBox();return this.nodeMap=null,s}getMetrics(t){this.setDocument(t);const e=this.adaptor,s=this.getMetricMaps(t);for(const i of t.math){const t=e.parent(i.start.node);if(i.state()<o.STATE.METRICS&&t){const e=s[i.display?1:0],{em:n,ex:r,containerWidth:a,lineWidth:l,scale:h,family:d}=e.get(t);i.setMetrics(n,r,a,l,h),this.options.mtextInheritFont&&(i.outputData.mtextFamily=d),this.options.merrorInheritFont&&(i.outputData.merrorFamily=d),i.state(o.STATE.METRICS)}}}getMetricsFor(t,e){const s=this.options.mtextInheritFont||this.options.merrorInheritFont,i=this.getTestElement(t,e),o=this.measureMetrics(i,s);return this.adaptor.remove(i),o}getMetricMaps(t){const e=this.adaptor,s=[new Map,new Map];for(const i of t.math){const t=e.parent(i.start.node);if(t&&i.state()<o.STATE.METRICS){const e=s[i.display?1:0];e.has(t)||e.set(t,this.getTestElement(t,i.display))}}const i=this.options.mtextInheritFont||this.options.merrorInheritFont,n=[new Map,new Map];for(const t of n.keys())for(const e of s[t].keys())n[t].set(e,this.measureMetrics(s[t].get(e),i));for(const t of n.keys())for(const i of s[t].values())e.remove(i);return n}getTestElement(t,e){const s=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=s.clone(this.testInline),s.setStyle(this.testDisplay,"display","table"),s.setStyle(this.testDisplay,"margin-right",""),s.setStyle(s.firstChild(this.testDisplay),"display","none");const t=s.lastChild(this.testDisplay);s.setStyle(t,"display","table-cell"),s.setStyle(t,"width","10000em"),s.setStyle(t,"float","")}return s.append(t,s.clone(e?this.testDisplay:this.testInline))}measureMetrics(t,e){const s=this.adaptor,i=e?s.fontFamily(t):"",o=s.fontSize(t),n=s.nodeSize(s.childNode(t,1))[1]/60||o*this.options.exFactor;return{em:o,ex:n,containerWidth:"table"===s.getStyle(t,"display")?s.nodeSize(s.lastChild(t))[0]-1:s.nodeBBox(s.lastChild(t)).left-s.nodeBBox(s.firstChild(t)).left-2,lineWidth:1e6,scale:Math.max(this.options.minScale,this.options.matchFontHeight?n/this.font.params.x_height/o:1),family:i}}styleSheet(t){if(this.setDocument(t),this.cssStyles.clear(),this.cssStyles.addStyles(this.constructor.commonStyles),"getStyles"in t)for(const e of t.getStyles())this.cssStyles.addStyles(e);for(const t of this.factory.getKinds())this.addClassStyles(this.factory.getNodeClass(t));this.cssStyles.addStyles(this.font.styles);return this.html("style",{id:"MJX-styles"},[this.text("\n"+this.cssStyles.cssText+"\n")])}addClassStyles(t){this.cssStyles.addStyles(t.styles)}setDocument(t){t&&(this.document=t,this.adaptor.document=t.document)}html(t,e={},s=[],i){return this.adaptor.node(t,e,s,i)}text(t){return this.adaptor.text(t)}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}measureText(t,e,s=["",!1,!1]){const i=this.unknownText(t,e);if("-explicitFont"===e){const t=this.cssFontStyles(s);this.adaptor.setAttributes(i,{style:t})}return this.measureTextNodeWithCache(i,t,e,s)}measureTextNodeWithCache(t,e,s,i=["",!1,!1]){"-explicitFont"===s&&(s=[i[0],i[1]?"T":"F",i[2]?"T":"F",""].join("-")),this.unknownCache.has(s)||this.unknownCache.set(s,new Map);const o=this.unknownCache.get(s),n=o.get(e);if(n)return n;const r=this.measureTextNode(t);return o.set(e,r),r}measureXMLnode(t){const e=this.adaptor,s=this.html("mjx-xml-block",{style:{display:"inline-block"}},[e.clone(t)]),i=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),o=this.html("mjx-measure-xml",{style:{position:"absolute",display:"inline-block","font-family":"initial","line-height":"normal"}},[i,s]);e.append(e.parent(this.math.start.node),this.container),e.append(this.container,o);const n=this.math.metrics.em*this.math.metrics.scale,{left:r,right:a,bottom:l,top:h}=e.nodeBBox(s),d=(a-r)/n,c=(e.nodeBBox(i).top-h)/n,m=(l-h)/n-c;return e.remove(this.container),e.remove(o),{w:d,h:c,d:m}}cssFontStyles(t,e={}){const[s,i,o]=t;return e["font-family"]=this.font.getFamily(s),i&&(e["font-style"]="italic"),o&&(e["font-weight"]="bold"),e}getFontData(t){return t||(t=new a.Styles),[this.font.getFamily(t.get("font-family")),"italic"===t.get("font-style"),"bold"===t.get("font-weight")]}}e.CommonOutputJax=h,h.NAME="Common",h.OPTIONS=Object.assign(Object.assign({},i.AbstractOutputJax.OPTIONS),{scale:1,minScale:.5,matchFontHeight:!0,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",wrapperFactory:null,font:null,cssStyles:null}),h.commonStyles={}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLWrapperFactory=void 0;const i=s(19),o=s(20);class n extends i.CommonWrapperFactory{}e.CHTMLWrapperFactory=n,n.defaultNodes=o.CHTMLWrappers},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonWrapperFactory=void 0;const i=s(73);class o extends i.AbstractWrapperFactory{constructor(){super(...arguments),this.jax=null}get Wrappers(){return this.node}}e.CommonWrapperFactory=o,o.defaultNodes={}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLWrappers=void 0;const i=s(0),o=s(22),n=s(24),r=s(26),a=s(28),l=s(30),h=s(32),d=s(34),c=s(36),m=s(38),u=s(41),p=s(42),x=s(44),g=s(11),f=s(47),b=s(7),M=s(51),y=s(52),C=s(54),j=s(56),T=s(57),w=s(59),S=s(60),v=s(62),L=s(64),B=s(66);e.CHTMLWrappers={[o.CHTMLmath.kind]:o.CHTMLmath,[u.CHTMLmrow.kind]:u.CHTMLmrow,[u.CHTMLinferredMrow.kind]:u.CHTMLinferredMrow,[n.CHTMLmi.kind]:n.CHTMLmi,[r.CHTMLmo.kind]:r.CHTMLmo,[a.CHTMLmn.kind]:a.CHTMLmn,[l.CHTMLms.kind]:l.CHTMLms,[h.CHTMLmtext.kind]:h.CHTMLmtext,[d.CHTMLmspace.kind]:d.CHTMLmspace,[c.CHTMLmpadded.kind]:c.CHTMLmpadded,[m.CHTMLmenclose.kind]:m.CHTMLmenclose,[x.CHTMLmfrac.kind]:x.CHTMLmfrac,[g.CHTMLmsqrt.kind]:g.CHTMLmsqrt,[f.CHTMLmroot.kind]:f.CHTMLmroot,[b.CHTMLmsub.kind]:b.CHTMLmsub,[b.CHTMLmsup.kind]:b.CHTMLmsup,[b.CHTMLmsubsup.kind]:b.CHTMLmsubsup,[M.CHTMLmunder.kind]:M.CHTMLmunder,[M.CHTMLmover.kind]:M.CHTMLmover,[M.CHTMLmunderover.kind]:M.CHTMLmunderover,[y.CHTMLmmultiscripts.kind]:y.CHTMLmmultiscripts,[p.CHTMLmfenced.kind]:p.CHTMLmfenced,[C.CHTMLmtable.kind]:C.CHTMLmtable,[j.CHTMLmtr.kind]:j.CHTMLmtr,[j.CHTMLmlabeledtr.kind]:j.CHTMLmlabeledtr,[T.CHTMLmtd.kind]:T.CHTMLmtd,[w.CHTMLmaction.kind]:w.CHTMLmaction,[S.CHTMLmglyph.kind]:S.CHTMLmglyph,[v.CHTMLsemantics.kind]:v.CHTMLsemantics,[v.CHTMLannotation.kind]:v.CHTMLannotation,[v.CHTMLannotationXML.kind]:v.CHTMLannotationXML,[v.CHTMLxml.kind]:v.CHTMLxml,[L.CHTMLTeXAtom.kind]:L.CHTMLTeXAtom,[B.CHTMLTextNode.kind]:B.CHTMLTextNode,[i.CHTMLWrapper.kind]:i.CHTMLWrapper}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonWrapper=void 0;const i=s(74),o=s(5),n=s(3),r=s(2),a=s(69),l=s(1),h=s(4);function d(t,e){return t?e<.1111111111111111?0:.1111111111111111:e}class c extends i.AbstractWrapper{constructor(t,e,s=null){super(t,e),this.parent=null,this.removedStyles=null,this.styles=null,this.variant="",this.bboxComputed=!1,this.stretch=h.NOSTRETCH,this.font=null,this.parent=s,this.font=t.jax.font,this.bbox=l.BBox.zero(),this.getStyles(),this.getVariant(),this.getScale(),this.getSpace(),this.childNodes=e.childNodes.map(t=>{const s=this.wrap(t);return s.bbox.pwidth&&(e.notParent||e.isKind("math"))&&(this.bbox.pwidth=l.BBox.fullWidth),s})}get jax(){return this.factory.jax}get adaptor(){return this.factory.jax.adaptor}get metrics(){return this.factory.jax.math.metrics}get fixesPWidth(){return!this.node.notParent&&!this.node.isToken}wrap(t,e=null){const s=this.factory.wrap(t,e||this);return e&&e.childNodes.push(s),this.jax.nodeMap.set(t,s),s}getBBox(t=!0){if(this.bboxComputed)return this.bbox;const e=t?this.bbox:l.BBox.zero();return this.computeBBox(e),this.bboxComputed=t,e}computeBBox(t,e=!1){t.empty();for(const e of this.childNodes)t.append(e.getBBox());t.clean(),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0)}setChildPWidths(t,e=null,s=!0){if(t)return!1;s&&(this.bbox.pwidth="");let i=!1;for(const o of this.childNodes){const n=o.getBBox();n.pwidth&&o.setChildPWidths(t,null===e?n.w:e,s)&&(i=!0)}return i}invalidateBBox(){this.bboxComputed&&(this.bboxComputed=!1,this.parent&&this.parent.invalidateBBox())}copySkewIC(t){const e=this.childNodes[0];e&&e.bbox.sk&&(t.sk=e.bbox.sk);const s=this.childNodes[this.childNodes.length-1];s&&s.bbox.ic&&(t.ic=s.bbox.ic,t.w+=t.ic)}getStyles(){const t=this.node.attributes.getExplicit("style");if(!t)return;const e=this.styles=new a.Styles(t);for(let t=0,s=c.removeStyles.length;t<s;t++){const s=c.removeStyles[t];e.get(s)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[s]=e.get(s),e.set(s,""))}}getVariant(){if(!this.node.isToken)return;const t=this.node.attributes;let e=t.get("mathvariant");if(!t.getExplicit("mathvariant")){const s=t.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){const t=this.removedStyles;t.fontFamily&&(s.family=t.fontFamily),t.fontWeight&&(s.weight=t.fontWeight),t.fontStyle&&(s.style=t.fontStyle)}s.fontfamily&&(s.family=s.fontfamily),s.fontweight&&(s.weight=s.fontweight),s.fontstyle&&(s.style=s.fontstyle),s.weight&&s.weight.match(/^\d+$/)&&(s.weight=parseInt(s.weight)>600?"bold":"normal"),s.family?e=this.explicitVariant(s.family,s.weight,s.style):(this.node.getProperty("variantForm")&&(e="-tex-variant"),e=(c.BOLDVARIANTS[s.weight]||{})[e]||e,e=(c.ITALICVARIANTS[s.style]||{})[e]||e)}this.variant=e}explicitVariant(t,e,s){let i=this.styles;return i||(i=this.styles=new a.Styles),i.set("fontFamily",t),e&&i.set("fontWeight",e),s&&i.set("fontStyle",s),"-explicitFont"}getScale(){let t=1,e=this.parent,s=e?e.bbox.scale:1,i=this.node.attributes,o=Math.min(i.get("scriptlevel"),2),n=i.get("fontsize"),r=this.node.isToken||this.node.isKind("mstyle")?i.get("mathsize"):i.getInherited("mathsize");if(0!==o){t=Math.pow(i.get("scriptsizemultiplier"),o);let e=this.length2em(i.get("scriptminsize"),.8,1);t<e&&(t=e)}this.removedStyles&&this.removedStyles.fontSize&&!n&&(n=this.removedStyles.fontSize),n&&!i.getExplicit("mathsize")&&(r=n),"1"!==r&&(t*=this.length2em(r,1,1)),this.bbox.scale=t,this.bbox.rscale=t/s}getSpace(){const t=this.isTopEmbellished(),e=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||e?t&&this.getMathMLSpacing():this.getTeXSpacing(t,e)}getMathMLSpacing(){const t=this.node.coreMO(),e=t.attributes,s=e.get("scriptlevel")>0;this.bbox.L=e.isSet("lspace")?Math.max(0,this.length2em(e.get("lspace"))):d(s,t.lspace),this.bbox.R=e.isSet("rspace")?Math.max(0,this.length2em(e.get("rspace"))):d(s,t.rspace)}getTeXSpacing(t,e){if(!e){const t=this.node.texSpacing();t&&(this.bbox.L=this.length2em(t))}if(t||e){const t=this.node.coreMO().attributes;t.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(t.get("lspace")))),t.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(t.get("rspace"))))}}isTopEmbellished(){return this.node.isEmbellished&&!(this.node.Parent&&this.node.Parent.isEmbellished)}core(){return this.jax.nodeMap.get(this.node.core())}coreMO(){return this.jax.nodeMap.get(this.node.coreMO())}getText(){let t="";if(this.node.isToken)for(const e of this.node.childNodes)e instanceof o.TextNode&&(t+=e.getText());return t}canStretch(t){if(this.stretch=h.NOSTRETCH,this.node.isEmbellished){let e=this.core();e&&e.node!==this.node&&e.canStretch(t)&&(this.stretch=e.stretch)}return 0!==this.stretch.dir}getAlignShift(){let{indentalign:t,indentshift:e,indentalignfirst:s,indentshiftfirst:i}=this.node.attributes.getList(...o.indentAttributes);"indentalign"!==s&&(t=s),"auto"===t&&(t=this.jax.options.displayAlign),"indentshift"!==i&&(e=i),"auto"===e&&(e=this.jax.options.displayIndent,"right"!==t||e.match(/^\s*0[a-z]*\s*$/)||(e=("-"+e.trim()).replace(/^--/,"")));return[t,this.length2em(e,this.metrics.containerWidth)]}getAlignX(t,e,s){return"right"===s?t-(e.w+e.R)*e.rscale:"left"===s?e.L*e.rscale:(t-e.w*e.rscale)/2}getAlignY(t,e,s,i,o){return"top"===o?t-s:"bottom"===o?i-e:"middle"===o?(t-s-(e-i))/2:0}getWrapWidth(t){return this.childNodes[t].getBBox().w}getChildAlign(t){return"left"}percent(t){return r.percent(t)}em(t){return r.em(t)}px(t,e=-r.BIGDIMEN){return r.px(t,e,this.metrics.em)}length2em(t,e=1,s=null){return null===s&&(s=this.bbox.scale),r.length2em(t,e,s,this.jax.pxPerEm)}unicodeChars(t,e=this.variant){let s=n.unicodeChars(t);const i=this.font.getVariant(e);if(i&&i.chars){const t=i.chars;s=s.map(e=>((t[e]||[])[3]||{}).smp||e)}return s}remapChars(t){return t}mmlText(t){return this.node.factory.create("text").setText(t)}mmlNode(t,e={},s=[]){return this.node.factory.create(t,e,s)}createMo(t){const e=this.node.factory,s=e.create("text").setText(t),i=e.create("mo",{stretchy:!0},[s]);i.inheritAttributesFrom(this.node);const o=this.wrap(i);return o.parent=this,o}getVariantChar(t,e){const s=this.font.getChar(t,e)||[0,0,0,{unknown:!0}];return 3===s.length&&(s[3]={}),s}}e.CommonWrapper=c,c.kind="unknown",c.styles={},c.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],c.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},c.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},c.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmath=void 0;const i=s(0),o=s(23),n=s(75),r=s(1);class a extends(o.CommonMathMixin(i.CHTMLWrapper)){toCHTML(t){super.toCHTML(t);const e=this.chtml,s=this.adaptor;"block"===this.node.attributes.get("display")?(s.setAttribute(e,"display","true"),s.setAttribute(t,"display","true"),this.handleDisplay(t)):this.handleInline(t),s.addClass(e,"MJX-TEX")}handleDisplay(t){const e=this.adaptor,[s,i]=this.getAlignShift();if("center"!==s&&e.setAttribute(t,"justify",s),this.bbox.pwidth===r.BBox.fullWidth){if(e.setAttribute(t,"width","full"),this.jax.table){let{L:o,w:n,R:r}=this.jax.table.getBBox();"right"===s?r=Math.max(r||-i,-i):"left"===s?o=Math.max(o||i,i):"center"===s&&(n+=2*Math.abs(i));const a=this.em(Math.max(0,o+n+r));e.setStyle(t,"min-width",a),e.setStyle(this.jax.table.chtml,"min-width",a)}}else this.setIndent(this.chtml,s,i)}handleInline(t){const e=this.adaptor,s=e.getStyle(this.chtml,"margin-right");s&&(e.setStyle(this.chtml,"margin-right",""),e.setStyle(t,"margin-right",s),e.setStyle(t,"width","0"))}setChildPWidths(t,e=null,s=!0){return!!this.parent&&super.setChildPWidths(t,e,s)}}e.CHTMLmath=a,a.kind=n.MmlMath.prototype.kind,a.styles={"mjx-math":{"line-height":0,"text-align":"left","text-indent":0,"font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","letter-spacing":"normal","word-wrap":"normal","word-spacing":"normal","white-space":"nowrap",direction:"ltr",padding:"1px 0"},'mjx-container[jax="CHTML"][display="true"]':{display:"block","text-align":"center",margin:"1em 0"},'mjx-container[jax="CHTML"][display="true"][width="full"]':{display:"flex"},'mjx-container[jax="CHTML"][display="true"] mjx-math':{padding:0},'mjx-container[jax="CHTML"][justify="left"]':{"text-align":"left"},'mjx-container[jax="CHTML"][justify="right"]':{"text-align":"right"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMathMixin=void 0,e.CommonMathMixin=function(t){return class extends t{getWrapWidth(t){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmi=void 0;const i=s(0),o=s(25),n=s(76);class r extends(o.CommonMiMixin(i.CHTMLWrapper)){toCHTML(t){super.toCHTML(t),this.noIC&&this.adaptor.setAttribute(this.chtml,"noIC","true")}}e.CHTMLmi=r,r.kind=n.MmlMi.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMiMixin=void 0,e.CommonMiMixin=function(t){return class extends t{constructor(){super(...arguments),this.noIC=!1}computeBBox(t,e=!1){super.computeBBox(t),this.copySkewIC(t),this.noIC&&(t.w-=t.ic)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmo=void 0;const i=s(0),o=s(27),n=s(77),r=s(1);class a extends(o.CommonMoMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.node.attributes,s=e.get("symmetric")&&2!==this.stretch.dir,i=0!==this.stretch.dir;i&&null===this.size&&this.getStretchedVariant([]);let o=this.standardCHTMLnode(t);if(this.noIC&&this.adaptor.setAttribute(o,"noIC","true"),i&&this.size<0)this.stretchHTML(o);else{if(s||e.get("largeop")){const t=r.BBox.empty();super.computeBBox(t);const e=this.em((t.d-t.h)/2+this.font.params.axis_height);"0"!==e&&this.adaptor.setStyle(o,"verticalAlign",e)}for(const t of this.childNodes)t.toCHTML(o)}}stretchHTML(t){const e=this.getText().codePointAt(0),s=this.stretch;s.used=!0;const i=s.stretch,n=[];i[0]&&n.push(this.html("mjx-beg",{},[this.html("mjx-c")])),n.push(this.html("mjx-ext",{},[this.html("mjx-c")])),4===i.length&&n.push(this.html("mjx-mid",{},[this.html("mjx-c")]),this.html("mjx-ext",{},[this.html("mjx-c")])),i[2]&&n.push(this.html("mjx-end",{},[this.html("mjx-c")]));const r={},{h:a,d:l,w:h}=this.bbox;1===s.dir?(n.push(this.html("mjx-mark")),r.height=this.em(a+l),r.verticalAlign=this.em(-l)):r.width=this.em(h);const d=o.DirectionVH[s.dir],c={class:this.char(s.c||e),style:r},m=this.html("mjx-stretchy-"+d,c,n);this.adaptor.append(t,m)}}e.CHTMLmo=a,a.kind=n.MmlMo.prototype.kind,a.styles={"mjx-stretchy-h":{display:"inline-table",width:"100%"},"mjx-stretchy-h > *":{display:"table-cell",width:0},"mjx-stretchy-h > * > mjx-c":{display:"inline-block",transform:"scalex(1.0000001)"},"mjx-stretchy-h > * > mjx-c::before":{display:"inline-block",padding:".001em 0",width:"initial"},"mjx-stretchy-h > mjx-ext":{overflow:"hidden",width:"100%"},"mjx-stretchy-h > mjx-ext > mjx-c::before":{transform:"scalex(500)"},"mjx-stretchy-h > mjx-ext > mjx-c":{width:0},"mjx-stretchy-h > mjx-beg > mjx-c":{"margin-right":"-.1em"},"mjx-stretchy-h > mjx-end > mjx-c":{"margin-left":"-.1em"},"mjx-stretchy-v":{display:"inline-block"},"mjx-stretchy-v > *":{display:"block"},"mjx-stretchy-v > mjx-beg":{height:0},"mjx-stretchy-v > mjx-end > mjx-c":{display:"block"},"mjx-stretchy-v > * > mjx-c":{transform:"scaley(1.0000001)","transform-origin":"left center",overflow:"hidden"},"mjx-stretchy-v > mjx-ext":{display:"block",height:"100%","box-sizing":"border-box",border:"0px solid transparent",overflow:"hidden"},"mjx-stretchy-v > mjx-ext > mjx-c::before":{width:"initial"},"mjx-stretchy-v > mjx-ext > mjx-c":{transform:"scaleY(500) translateY(.1em)",overflow:"visible"},"mjx-mark":{display:"inline-block",height:"0px"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMoMixin=e.DirectionVH=void 0;const i=s(4);e.DirectionVH={1:"v",2:"h"},e.CommonMoMixin=function(t){return class extends t{constructor(...t){super(...t),this.noIC=!1,this.size=null,this.isAccent=this.node.isAccent}computeBBox(t,e=!1){const s=0!==this.stretch.dir;if(s&&null===this.size&&this.getStretchedVariant([0]),!(s&&this.size<0)&&(super.computeBBox(t),this.copySkewIC(t),this.noIC&&(t.w-=t.ic),this.node.attributes.get("symmetric")&&2!==this.stretch.dir)){const e=(t.h+t.d)/2+this.font.params.axis_height-t.h;t.h+=e,t.d-=e}}getVariant(){this.node.attributes.get("largeop")?this.variant=this.node.attributes.get("displaystyle")?"-largeop":"-smallop":super.getVariant()}canStretch(t){if(0!==this.stretch.dir)return this.stretch.dir===t;if(!this.node.attributes.get("stretchy"))return!1;const e=this.getText();if(1!==Array.from(e).length)return!1;const s=this.font.getDelimiter(e.codePointAt(0));return this.stretch=s&&s.dir===t?s:i.NOSTRETCH,0!==this.stretch.dir}getStretchedVariant(t,e=!1){if(0!==this.stretch.dir){let s=this.getWH(t);const i=this.getSize("minsize",0),o=this.getSize("maxsize",1/0);s=Math.max(i,Math.min(o,s));const n=i||e?s:Math.max(s*this.font.params.delimiterfactor/1e3,s-this.font.params.delimitershortfall),r=this.stretch,a=r.c||this.getText().codePointAt(0);let l=0;if(r.sizes)for(const t of r.sizes){if(t>=n)return this.variant=this.font.getSizeVariant(a,l),void(this.size=l);l++}r.stretch?(this.size=-1,this.invalidateBBox(),this.getStretchBBox(t,s,r)):(this.variant=this.font.getSizeVariant(a,l-1),this.size=l-1)}}getSize(t,e){let s=this.node.attributes;return s.isSet(t)&&(e=this.length2em(s.get(t),1,1)),e}getWH(t){if(0===t.length)return 0;if(1===t.length)return t[0];let[e,s]=t;const i=this.font.params.axis_height;return this.node.attributes.get("symmetric")?2*Math.max(e-i,s+i):e+s}getStretchBBox(t,e,s){s.hasOwnProperty("min")&&s.min>e&&(e=s.min);let[i,o,n]=s.HDW;1===this.stretch.dir?[i,o]=this.getBaseline(t,e,s):n=e,this.bbox.h=i,this.bbox.d=o,this.bbox.w=n}getBaseline(t,e,s){const i=2===t.length&&t[0]+t[1]===e,o=this.node.attributes.get("symmetric"),[n,r]=i?t:[e,0];let[a,l]=[n+r,0];if(o){const t=this.font.params.axis_height;i&&(a=2*Math.max(n-t,r+t)),l=a/2-t}else if(i)l=r;else{let[t,e]=s.HDW||[.75,.25];l=e*(a/(t+e))}return[a-l,l]}remapChars(t){if(1===t.length){const e=this.node.coreParent().parent,s=this.isAccent&&!e.isKind("mrow")?"accent":"mo",i=this.font.getRemappedChar(s,t[0]);i&&(t=this.unicodeChars(i,this.variant))}return t}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmn=void 0;const i=s(0),o=s(29),n=s(78);class r extends(o.CommonMnMixin(i.CHTMLWrapper)){}e.CHTMLmn=r,r.kind=n.MmlMn.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMnMixin=void 0,e.CommonMnMixin=function(t){return class extends t{remapChars(t){if(t.length){const e=this.font.getRemappedChar("mn",t[0]);if(e){const s=this.unicodeChars(e,this.variant);1===s.length?t[0]=s[0]:t=s.concat(t.slice(1))}}return t}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLms=void 0;const i=s(0),o=s(31),n=s(79);class r extends(o.CommonMsMixin(i.CHTMLWrapper)){}e.CHTMLms=r,r.kind=n.MmlMs.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMsMixin=void 0,e.CommonMsMixin=function(t){return class extends t{constructor(...t){super(...t);const e=this.node.attributes;let s=e.getList("lquote","rquote");"monospace"!==this.variant&&(e.isSet("lquote")||'"'!==s.lquote||(s.lquote="\u201c"),e.isSet("rquote")||'"'!==s.rquote||(s.rquote="\u201d")),this.childNodes.unshift(this.createText(s.lquote)),this.childNodes.push(this.createText(s.rquote))}createText(t){const e=this.wrap(this.mmlText(t));return e.parent=this,e}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmtext=void 0;const i=s(0),o=s(33),n=s(80);class r extends(o.CommonMtextMixin(i.CHTMLWrapper)){}e.CHTMLmtext=r,r.kind=n.MmlMtext.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMtextMixin=void 0,e.CommonMtextMixin=function(t){var e;return(e=class extends t{getVariant(){const t=this.jax.options,e=this.jax.math.outputData,s=(!!e.merrorFamily||!!t.merrorFont)&&this.node.Parent.isKind("merror");if(e.mtextFamily||t.mtextFont||s){const i=this.node.attributes.get("mathvariant"),o=this.constructor.INHERITFONTS[i]||this.jax.font.getCssFont(i),n=o[0]||(s?e.merrorFamily||t.merrorFont:e.mtextFamily||t.mtextFont);this.variant=this.explicitVariant(n,o[2]?"bold":"",o[1]?"italic":"")}else super.getVariant()}}).INHERITFONTS={normal:["",!1,!1],bold:["",!1,!0],italic:["",!0,!1],"bold-italic":["",!0,!0]},e}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmspace=void 0;const i=s(0),o=s(35),n=s(81);class r extends(o.CommonMspaceMixin(i.CHTMLWrapper)){toCHTML(t){let e=this.standardCHTMLnode(t),{w:s,h:i,d:o}=this.getBBox();s<0&&(this.adaptor.setStyle(e,"marginRight",this.em(s)),s=0),s&&this.adaptor.setStyle(e,"width",this.em(s)),i=Math.max(0,i+o),i&&this.adaptor.setStyle(e,"height",this.em(Math.max(0,i))),o&&this.adaptor.setStyle(e,"verticalAlign",this.em(-o))}}e.CHTMLmspace=r,r.kind=n.MmlMspace.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMspaceMixin=void 0,e.CommonMspaceMixin=function(t){return class extends t{computeBBox(t,e=!1){const s=this.node.attributes;t.w=this.length2em(s.get("width"),0),t.h=this.length2em(s.get("height"),0),t.d=this.length2em(s.get("depth"),0)}handleVariant(){}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmpadded=void 0;const i=s(0),o=s(37),n=s(82);class r extends(o.CommonMpaddedMixin(i.CHTMLWrapper)){toCHTML(t){let e=this.standardCHTMLnode(t);const s=[],i={},[,,o,n,r,a,l,h,d]=this.getDimens();if(a&&(i.width=this.em(o+a)),(n||r)&&(i.margin=this.em(n)+" 0 "+this.em(r)),l+d||h){i.position="relative";const t=this.html("mjx-rbox",{style:{left:this.em(l+d),top:this.em(-h)}});l+d&&this.childNodes[0].getBBox().pwidth&&(this.adaptor.setAttribute(t,"width","full"),this.adaptor.setStyle(t,"left",this.em(l))),s.push(t)}e=this.adaptor.append(e,this.html("mjx-block",{style:i},s));for(const t of this.childNodes)t.toCHTML(s[0]||e)}}e.CHTMLmpadded=r,r.kind=n.MmlMpadded.prototype.kind,r.styles={"mjx-mpadded":{display:"inline-block"},"mjx-rbox":{display:"inline-block",position:"relative"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMpaddedMixin=void 0,e.CommonMpaddedMixin=function(t){return class extends t{getDimens(){const t=this.node.attributes.getList("width","height","depth","lspace","voffset"),e=this.childNodes[0].getBBox();let{w:s,h:i,d:o}=e,n=s,r=i,a=o,l=0,h=0,d=0;""!==t.width&&(s=this.dimen(t.width,e,"w",0)),""!==t.height&&(i=this.dimen(t.height,e,"h",0)),""!==t.depth&&(o=this.dimen(t.depth,e,"d",0)),""!==t.voffset&&(h=this.dimen(t.voffset,e)),""!==t.lspace&&(l=this.dimen(t.lspace,e));const c=this.node.attributes.get("data-align");return c&&(d=this.getAlignX(s,e,c)),[r,a,n,i-r,o-a,s-n,l,h,d]}dimen(t,e,s="",i=null){const o=(t=String(t)).match(/width|height|depth/),n=o?e[o[0].charAt(0)]:s?e[s]:0;let r=this.length2em(t,n)||0;return t.match(/^[-+]/)&&s&&(r+=n),null!=i&&(r=Math.max(i,r)),r}computeBBox(t,e=!1){const[s,i,o,n,r,a]=this.getDimens();t.w=o+a,t.h=s+n,t.d=i+r,this.setChildPWidths(e,t.w)}getWrapWidth(t){return this.getBBox().w}getChildAlign(t){return this.node.attributes.get("data-align")||"left"}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmenclose=void 0;const i=s(0),o=s(39),n=s(40),r=s(83),a=s(2);function l(t,e){return Math.atan2(t,e).toFixed(3).replace(/\.?0+$/,"")}const h=l(n.ARROWDX,n.ARROWY);class d extends(o.CommonMencloseMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.adaptor,s=this.standardCHTMLnode(t),i=e.append(s,this.html("mjx-box"));this.renderChild?this.renderChild(this,i):this.childNodes[0].toCHTML(i);for(const t of Object.keys(this.notations)){const e=this.notations[t];!e.renderChild&&e.renderer(this,i)}const o=this.getPadding();for(const t of n.sideNames){const s=n.sideIndex[t];o[s]>0&&e.setStyle(i,"padding-"+t,this.em(o[s]))}}arrow(t,e,s=!1){const i=this.getBBox().w,o={width:this.em(t)};i!==t&&(o.left=this.em((i-t)/2)),e&&(o.transform="rotate("+this.fixed(e)+"rad)");const n=this.html("mjx-arrow",{style:o},[this.html("mjx-aline"),this.html("mjx-rthead"),this.html("mjx-rbhead")]);return s&&(this.adaptor.append(n,this.html("mjx-lthead")),this.adaptor.append(n,this.html("mjx-lbhead")),this.adaptor.setAttribute(n,"double","true")),this.adjustArrow(n,s),n}adjustArrow(t,e){const s=this.thickness,i=this.arrowhead;if(i.x===n.ARROWX&&i.y===n.ARROWY&&i.dx===n.ARROWDX&&s===n.THICKNESS)return;const[o,r]=[s*i.x,s*i.y].map(t=>this.em(t)),a=l(i.dx,i.y),[h,d,c,m,u]=this.adaptor.childNodes(t);this.adjustHead(d,[r,"0","1px",o],a),this.adjustHead(c,["1px","0",r,o],"-"+a),this.adjustHead(m,[r,o,"1px","0"],"-"+a),this.adjustHead(u,["1px",o,r,"0"],a),this.adjustLine(h,s,i.x,e)}adjustHead(t,e,s){t&&(this.adaptor.setStyle(t,"border-width",e.join(" ")),this.adaptor.setStyle(t,"transform","skewX("+s+"rad)"))}adjustLine(t,e,s,i){this.adaptor.setStyle(t,"borderTop",this.em(e)+" solid"),this.adaptor.setStyle(t,"top",this.em(-e/2)),this.adaptor.setStyle(t,"right",this.em(e*(s-1))),i&&this.adaptor.setStyle(t,"left",this.em(e*(s-1)))}adjustBorder(t){return this.thickness!==n.THICKNESS&&this.adaptor.setStyle(t,"borderWidth",this.em(this.thickness)),t}adjustThickness(t){return this.thickness!==n.THICKNESS&&this.adaptor.setStyle(t,"strokeWidth",this.fixed(this.thickness)),t}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}em(t){return super.em(t)}}e.CHTMLmenclose=d,d.kind=r.MmlMenclose.prototype.kind,d.styles={"mjx-menclose":{position:"relative"},"mjx-menclose > mjx-dstrike":{display:"inline-block",left:0,top:0,position:"absolute","border-top":n.SOLID,"transform-origin":"top left"},"mjx-menclose > mjx-ustrike":{display:"inline-block",left:0,bottom:0,position:"absolute","border-top":n.SOLID,"transform-origin":"bottom left"},"mjx-menclose > mjx-hstrike":{"border-top":n.SOLID,position:"absolute",left:0,right:0,bottom:"50%",transform:"translateY("+a.em(n.THICKNESS/2)+")"},"mjx-menclose > mjx-vstrike":{"border-left":n.SOLID,position:"absolute",top:0,bottom:0,right:"50%",transform:"translateX("+a.em(n.THICKNESS/2)+")"},"mjx-menclose > mjx-rbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:n.SOLID,"border-radius":a.em(n.THICKNESS+n.PADDING)},"mjx-menclose > mjx-cbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:n.SOLID,"border-radius":"50%"},"mjx-menclose > mjx-arrow":{position:"absolute",left:0,bottom:"50%",height:0,width:0},"mjx-menclose > mjx-arrow > *":{display:"block",position:"absolute","transform-origin":"bottom","border-left":a.em(n.THICKNESS*n.ARROWX)+" solid","border-right":0,"box-sizing":"border-box"},"mjx-menclose > mjx-arrow > mjx-aline":{left:0,top:a.em(-n.THICKNESS/2),right:a.em(n.THICKNESS*(n.ARROWX-1)),height:0,"border-top":a.em(n.THICKNESS)+" solid","border-left":0},"mjx-menclose > mjx-arrow[double] > mjx-aline":{left:a.em(n.THICKNESS*(n.ARROWX-1)),height:0},"mjx-menclose > mjx-arrow > mjx-rthead":{transform:"skewX("+h+"rad)",right:0,bottom:"-1px","border-bottom":"1px solid transparent","border-top":a.em(n.THICKNESS*n.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-rbhead":{transform:"skewX(-"+h+"rad)","transform-origin":"top",right:0,top:"-1px","border-top":"1px solid transparent","border-bottom":a.em(n.THICKNESS*n.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lthead":{transform:"skewX(-"+h+"rad)",left:0,bottom:"-1px","border-left":0,"border-right":a.em(n.THICKNESS*n.ARROWX)+" solid","border-bottom":"1px solid transparent","border-top":a.em(n.THICKNESS*n.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lbhead":{transform:"skewX("+h+"rad)","transform-origin":"top",left:0,top:"-1px","border-left":0,"border-right":a.em(n.THICKNESS*n.ARROWX)+" solid","border-top":"1px solid transparent","border-bottom":a.em(n.THICKNESS*n.ARROWY)+" solid transparent"},"mjx-menclose > dbox":{position:"absolute",top:0,bottom:0,left:a.em(-1.5*n.PADDING),width:a.em(3*n.PADDING),border:a.em(n.THICKNESS)+" solid","border-radius":"50%","clip-path":"inset(0 0 0 "+a.em(1.5*n.PADDING)+")","box-sizing":"border-box"}},d.notations=new Map([n.Border("top"),n.Border("right"),n.Border("bottom"),n.Border("left"),n.Border2("actuarial","top","right"),n.Border2("madruwb","bottom","right"),n.DiagonalStrike("up",1),n.DiagonalStrike("down",-1),["horizontalstrike",{renderer:n.RenderElement("hstrike","Y"),bbox:t=>[0,t.padding,0,t.padding]}],["verticalstrike",{renderer:n.RenderElement("vstrike","X"),bbox:t=>[t.padding,0,t.padding,0]}],["box",{renderer:(t,e)=>{t.adaptor.setStyle(e,"border",t.em(t.thickness)+" solid")},bbox:n.fullBBox,border:n.fullBorder,remove:"left right top bottom"}],["roundedbox",{renderer:n.RenderElement("rbox"),bbox:n.fullBBox}],["circle",{renderer:n.RenderElement("cbox"),bbox:n.fullBBox}],["phasorangle",{renderer:(t,e)=>{const{h:s,d:i}=t.getBBox(),[o,n]=t.getArgMod(1.75*t.padding,s+i),r=t.thickness*Math.sin(o)*.9;t.adaptor.setStyle(e,"border-bottom",t.em(t.thickness)+" solid");const a=t.adjustBorder(t.html("mjx-ustrike",{style:{width:t.em(n),transform:"translateX("+t.em(r)+") rotate("+t.fixed(-o)+"rad)"}}));t.adaptor.append(t.chtml,a)},bbox:t=>{const e=t.padding/2,s=t.thickness;return[2*e,e,e+s,3*e+s]},border:t=>[0,0,t.thickness,0],remove:"bottom"}],n.Arrow("up"),n.Arrow("down"),n.Arrow("left"),n.Arrow("right"),n.Arrow("updown"),n.Arrow("leftright"),n.DiagonalArrow("updiagonal"),n.DiagonalArrow("northeast"),n.DiagonalArrow("southeast"),n.DiagonalArrow("northwest"),n.DiagonalArrow("southwest"),n.DiagonalArrow("northeastsouthwest"),n.DiagonalArrow("northwestsoutheast"),["longdiv",{renderer:(t,e)=>{const s=t.adaptor;s.setStyle(e,"border-top",t.em(t.thickness)+" solid");const i=s.append(t.chtml,t.html("dbox")),o=t.thickness,r=t.padding;o!==n.THICKNESS&&s.setStyle(i,"border-width",t.em(o)),r!==n.PADDING&&(s.setStyle(i,"left",t.em(-1.5*r)),s.setStyle(i,"width",t.em(3*r)),s.setStyle(i,"clip-path","inset(0 0 0 "+t.em(1.5*r)+")"))},bbox:t=>{const e=t.padding,s=t.thickness;return[e+s,e,e,2*e+s/2]}}],["radical",{renderer:(t,e)=>{t.msqrt.toCHTML(e);const s=t.sqrtTRBL();t.adaptor.setStyle(t.msqrt.chtml,"margin",s.map(e=>t.em(-e)).join(" "))},init:t=>{t.msqrt=t.createMsqrt(t.childNodes[0])},bbox:t=>t.sqrtTRBL(),renderChild:!0}]])},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMencloseMixin=void 0;const i=s(6),o=s(3);e.CommonMencloseMixin=function(t){return class extends t{constructor(...t){super(...t),this.notations={},this.renderChild=null,this.msqrt=null,this.padding=i.PADDING,this.thickness=i.THICKNESS,this.arrowhead={x:i.ARROWX,y:i.ARROWY,dx:i.ARROWDX},this.getParameters(),this.getNotations(),this.removeRedundantNotations(),this.initializeNotations()}getParameters(){const t=this.node.attributes,e=t.get("data-padding");void 0!==e&&(this.padding=this.length2em(e,i.PADDING));const s=t.get("data-thickness");void 0!==s&&(this.thickness=this.length2em(s,i.THICKNESS));const n=t.get("data-arrowhead");if(void 0!==n){let[t,e,s]=o.split(n);this.arrowhead={x:t?parseFloat(t):i.ARROWX,y:e?parseFloat(e):i.ARROWY,dx:s?parseFloat(s):i.ARROWDX}}}getNotations(){const t=this.constructor.notations;for(const e of o.split(this.node.attributes.get("notation"))){const s=t.get(e);s&&(this.notations[e]=s,s.renderChild&&(this.renderChild=s.renderer))}}removeRedundantNotations(){for(const t of Object.keys(this.notations))if(this.notations[t]){const e=this.notations[t].remove||"";for(const t of e.split(/ /))delete this.notations[t]}}initializeNotations(){for(const t of Object.keys(this.notations)){const e=this.notations[t].init;e&&e(this)}}computeBBox(t,e=!1){let[s,i,o,n]=this.getBBoxExtenders();const r=this.childNodes[0].getBBox();t.combine(r,n,0),t.h+=s,t.d+=o,t.w+=i,this.setChildPWidths(e)}getBBoxExtenders(){let t=[0,0,0,0];for(const e of Object.keys(this.notations))this.maximizeEntries(t,this.notations[e].bbox(this));return t}getPadding(){let t=[0,0,0,0],e=[0,0,0,0];for(const s of Object.keys(this.notations)){this.maximizeEntries(t,this.notations[s].bbox(this));const i=this.notations[s].border;i&&this.maximizeEntries(e,i(this))}return[0,1,2,3].map(s=>t[s]-e[s])}maximizeEntries(t,e){for(let s=0;s<t.length;s++)t[s]<e[s]&&(t[s]=e[s])}getArgMod(t,e){return[Math.atan2(e,t),Math.sqrt(t*t+e*e)]}arrow(t,e,s=!1){return null}arrowData(){const[t,e]=[this.padding,this.thickness],s=e*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),{h:i,d:o,w:n}=this.childNodes[0].getBBox(),r=i+o,a=Math.sqrt(r*r+n*n),l=Math.max(t,s*n/a),h=Math.max(t,s*r/a),[d,c]=this.getArgMod(n+2*l,r+2*h);return{a:d,W:c,x:l,y:h}}createMsqrt(t){const e=this.node.factory.create("msqrt");e.inheritAttributesFrom(this.node),e.childNodes[0]=t.node;const s=this.wrap(e);return s.parent=this,s}sqrtTRBL(){const t=this.msqrt.getBBox(),e=this.msqrt.childNodes[0].getBBox();return[t.h-e.h,0,t.d-e.d,t.w-e.w]}}}},function(t,e,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),o=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||e.hasOwnProperty(s)||i(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=e.DiagonalArrow=e.DiagonalStrike=e.Border2=e.Border=e.RenderElement=void 0;const n=s(6);o(s(6),e),e.RenderElement=function(t,e=""){return(s,i)=>{const o=s.adjustBorder(s.html("mjx-"+t));if(e&&s.thickness!==n.THICKNESS){const t="translate"+e+"("+s.em(s.thickness/2)+")";s.adaptor.setStyle(o,"transform",t)}s.adaptor.append(s.chtml,o)}},e.Border=function(t){return n.CommonBorder((e,s)=>{e.adaptor.setStyle(s,"border-"+t,e.em(e.thickness)+" solid")})(t)},e.Border2=function(t,e,s){return n.CommonBorder2((t,i)=>{const o=t.em(t.thickness)+" solid";t.adaptor.setStyle(i,"border-"+e,o),t.adaptor.setStyle(i,"border-"+s,o)})(t,e,s)},e.DiagonalStrike=function(t,e){return n.CommonDiagonalStrike(t=>(s,i)=>{const{w:o,h:n,d:r}=s.getBBox(),[a,l]=s.getArgMod(o,n+r),h=e*s.thickness/2,d=s.adjustBorder(s.html(t,{style:{width:s.em(l),transform:"rotate("+s.fixed(-e*a)+"rad) translateY("+h+"em)"}}));s.adaptor.append(s.chtml,d)})(t)},e.DiagonalArrow=function(t){return n.CommonDiagonalArrow((t,e)=>{t.adaptor.append(t.chtml,e)})(t)},e.Arrow=function(t){return n.CommonArrow((t,e)=>{t.adaptor.append(t.chtml,e)})(t)}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLinferredMrow=e.CHTMLmrow=void 0;const i=s(0),o=s(10),n=s(10),r=s(84);class a extends(o.CommonMrowMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.node.isInferred?this.chtml=t:this.standardCHTMLnode(t);let s=!1;for(const t of this.childNodes)t.toCHTML(e),t.bbox.w<0&&(s=!0);if(s){const{w:t}=this.getBBox();t&&(this.adaptor.setStyle(e,"width",this.em(Math.max(0,t))),t<0&&this.adaptor.setStyle(e,"marginRight",this.em(t)))}}}e.CHTMLmrow=a,a.kind=r.MmlMrow.prototype.kind;class l extends(n.CommonInferredMrowMixin(a)){}e.CHTMLinferredMrow=l,l.kind=r.MmlInferredMrow.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmfenced=void 0;const i=s(0),o=s(43),n=s(85);class r extends(o.CommonMfencedMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.standardCHTMLnode(t);this.mrow.toCHTML(e)}}e.CHTMLmfenced=r,r.kind=n.MmlMfenced.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMfencedMixin=void 0,e.CommonMfencedMixin=function(t){return class extends t{constructor(...t){super(...t),this.mrow=null,this.createMrow(),this.addMrowChildren()}createMrow(){const t=this.node.factory.create("inferredMrow");t.inheritAttributesFrom(this.node),this.mrow=this.wrap(t),this.mrow.parent=this}addMrowChildren(){const t=this.node,e=this.mrow;this.addMo(t.open),this.childNodes.length&&e.childNodes.push(this.childNodes[0]);let s=0;for(const i of this.childNodes.slice(1))this.addMo(t.separators[s++]),e.childNodes.push(i);this.addMo(t.close),e.stretchChildren()}addMo(t){if(!t)return;const e=this.wrap(t);this.mrow.childNodes.push(e),e.parent=this.mrow}computeBBox(t,e=!1){t.updateFrom(this.mrow.getBBox()),this.setChildPWidths(e)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmfrac=void 0;const i=s(0),o=s(45),n=s(86);class r extends(o.CommonMfracMixin(i.CHTMLWrapper)){toCHTML(t){this.standardCHTMLnode(t);const{linethickness:e,bevelled:s}=this.node.attributes.getList("linethickness","bevelled"),i=this.isDisplay();if(s)this.makeBevelled(i);else{const t=this.length2em(String(e),.06);0===t?this.makeAtop(i):this.makeFraction(i,t)}}makeFraction(t,e){const{numalign:s,denomalign:i}=this.node.attributes.getList("numalign","denomalign"),o=t?{type:"d"}:{},n=this.node.getProperty("withDelims")?Object.assign(Object.assign({},o),{delims:"true"}):Object.assign({},o),r="center"!==s?{align:s}:{},a="center"!==i?{align:i}:{},l=Object.assign({},o),h=Object.assign({},o),d=this.font.params;if(.06!==e){const s=d.axis_height,i=this.em(e),{T:r,u:a,v:c}=this.getTUV(t,e),m=(t?this.em(3*e):i)+" -.1em";o.style={height:i,"border-top":i+" solid",margin:m};const u=this.em(Math.max(0,a));h.style={height:u,"vertical-align":"-"+u},l.style={height:this.em(Math.max(0,c))},n.style={"vertical-align":this.em(s-r)}}let c,m;this.adaptor.append(this.chtml,this.html("mjx-frac",n,[c=this.html("mjx-num",r,[this.html("mjx-nstrut",h)]),this.html("mjx-dbox",{},[this.html("mjx-dtable",{},[this.html("mjx-line",o),this.html("mjx-row",{},[m=this.html("mjx-den",a,[this.html("mjx-dstrut",l)])])])])])),this.childNodes[0].toCHTML(c),this.childNodes[1].toCHTML(m)}makeAtop(t){const{numalign:e,denomalign:s}=this.node.attributes.getList("numalign","denomalign"),i=t?{type:"d",atop:!0}:{atop:!0},o=this.node.getProperty("withDelims")?Object.assign(Object.assign({},i),{delims:!0}):Object.assign({},i),n="center"!==e?{align:e}:{},r="center"!==s?{align:s}:{},{v:a,q:l}=this.getUVQ(t);let h,d;n.style={"padding-bottom":this.em(l)},o.style={"vertical-align":this.em(-a)},this.adaptor.append(this.chtml,this.html("mjx-frac",o,[h=this.html("mjx-num",n),d=this.html("mjx-den",r)])),this.childNodes[0].toCHTML(h),this.childNodes[1].toCHTML(d)}makeBevelled(t){const e=this.adaptor;e.setAttribute(this.chtml,"bevelled","ture");const s=e.append(this.chtml,this.html("mjx-num"));this.childNodes[0].toCHTML(s),this.bevel.toCHTML(this.chtml);const i=e.append(this.chtml,this.html("mjx-den"));this.childNodes[1].toCHTML(i);const{u:o,v:n,delta:r,nbox:a,dbox:l}=this.getBevelData(t);o&&e.setStyle(s,"verticalAlign",this.em(o/a.scale)),n&&e.setStyle(i,"verticalAlign",this.em(n/l.scale));const h=this.em(-r/2);e.setStyle(this.bevel.chtml,"marginLeft",h),e.setStyle(this.bevel.chtml,"marginRight",h)}}e.CHTMLmfrac=r,r.kind=n.MmlMfrac.prototype.kind,r.styles={"mjx-frac":{display:"inline-block","vertical-align":"0.17em",padding:"0 .22em"},'mjx-frac[type="d"]':{"vertical-align":".04em"},"mjx-frac[delims]":{padding:"0 .1em"},"mjx-frac[atop]":{padding:"0 .12em"},"mjx-frac[atop][delims]":{padding:"0"},"mjx-dtable":{display:"inline-table",width:"100%"},"mjx-dtable > *":{"font-size":"2000%"},"mjx-dbox":{display:"block","font-size":"5%"},"mjx-num":{display:"block","text-align":"center"},"mjx-den":{display:"block","text-align":"center"},"mjx-mfrac[bevelled] > mjx-num":{display:"inline-block"},"mjx-mfrac[bevelled] > mjx-den":{display:"inline-block"},'mjx-den[align="right"], mjx-num[align="right"]':{"text-align":"right"},'mjx-den[align="left"], mjx-num[align="left"]':{"text-align":"left"},"mjx-nstrut":{display:"inline-block",height:".054em",width:0,"vertical-align":"-.054em"},'mjx-nstrut[type="d"]':{height:".217em","vertical-align":"-.217em"},"mjx-dstrut":{display:"inline-block",height:".505em",width:0},'mjx-dstrut[type="d"]':{height:".726em"},"mjx-line":{display:"block","box-sizing":"border-box","min-height":"1px",height:".06em","border-top":".06em solid",margin:".06em -.1em",overflow:"hidden"},'mjx-line[type="d"]':{margin:".18em -.1em"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMfracMixin=void 0,e.CommonMfracMixin=function(t){return class extends t{constructor(...t){if(super(...t),this.bevel=null,this.pad=this.node.getProperty("withDelims")?0:this.font.params.nulldelimiterspace,this.node.attributes.get("bevelled")){const{H:t}=this.getBevelData(this.isDisplay()),e=this.bevel=this.createMo("/");e.canStretch(1),e.getStretchedVariant([t],!0)}}computeBBox(t,e=!1){t.empty();const{linethickness:s,bevelled:i}=this.node.attributes.getList("linethickness","bevelled"),o=this.isDisplay();let n=null;if(i)this.getBevelledBBox(t,o);else{const e=this.length2em(String(s),.06);n=-2*this.pad,0===e?this.getAtopBBox(t,o):(this.getFractionBBox(t,o,e),n-=.2),n+=t.w}t.clean(),this.setChildPWidths(e,n)}getFractionBBox(t,e,s){const i=this.childNodes[0].getBBox(),o=this.childNodes[1].getBBox(),n=this.font.params.axis_height,{T:r,u:a,v:l}=this.getTUV(e,s);t.combine(i,0,n+r+Math.max(i.d*i.rscale,a)),t.combine(o,0,n-r-Math.max(o.h*o.rscale,l)),t.w+=2*this.pad+.2}getTUV(t,e){const s=this.font.params,i=s.axis_height,o=(t?3.5:1.5)*e;return{T:(t?3.5:1.5)*e,u:(t?s.num1:s.num2)-i-o,v:(t?s.denom1:s.denom2)+i-o}}getAtopBBox(t,e){const{u:s,v:i,nbox:o,dbox:n}=this.getUVQ(e);t.combine(o,0,s),t.combine(n,0,-i),t.w+=2*this.pad}getUVQ(t){const e=this.childNodes[0].getBBox(),s=this.childNodes[1].getBBox(),i=this.font.params;let[o,n]=t?[i.num1,i.denom1]:[i.num3,i.denom2],r=(t?7:3)*i.rule_thickness,a=o-e.d*e.scale-(s.h*s.scale-n);return a<r&&(o+=(r-a)/2,n+=(r-a)/2,a=r),{u:o,v:n,q:a,nbox:e,dbox:s}}getBevelledBBox(t,e){const{u:s,v:i,delta:o,nbox:n,dbox:r}=this.getBevelData(e),a=this.bevel.getBBox();t.combine(n,0,s),t.combine(a,t.w-o/2,0),t.combine(r,t.w-o/2,i)}getBevelData(t){const e=this.childNodes[0].getBBox(),s=this.childNodes[1].getBBox(),i=t?.4:.15,o=Math.max(e.scale*(e.h+e.d),s.scale*(s.h+s.d))+2*i,n=this.font.params.axis_height;return{H:o,delta:i,u:e.scale*(e.d-e.h)/2+n+i,v:s.scale*(s.d-s.h)/2+n-i,nbox:e,dbox:s}}canStretch(t){return!1}isDisplay(){const{displaystyle:t,scriptlevel:e}=this.node.attributes.getList("displaystyle","scriptlevel");return t&&0===e}getWrapWidth(t){const e=this.node.attributes;if(e.get("bevelled"))return this.childNodes[t].getBBox().w;return this.getBBox().w-(this.length2em(e.get("linethickness"))?.2:0)-2*this.pad}getChildAlign(t){const e=this.node.attributes;return e.get("bevelled")?"left":e.get(["numalign","denomalign"][t])}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMsqrtMixin=void 0;const i=s(1);e.CommonMsqrtMixin=function(t){return class extends t{constructor(...t){super(...t);const e=this.createMo("\u221a");e.canStretch(1);const{h:s,d:i}=this.childNodes[this.base].getBBox(),o=this.font.params.rule_thickness,n=this.node.attributes.get("displaystyle")?this.font.params.x_height:o;this.surdH=s+i+2*o+n/4,e.getStretchedVariant([this.surdH-i,i],!0)}get base(){return 0}get surd(){return 1}get root(){return null}createMo(t){const e=super.createMo(t);return this.childNodes.push(e),e}computeBBox(t,e=!1){const s=this.childNodes[this.surd].getBBox(),o=new i.BBox(this.childNodes[this.base].getBBox()),n=this.getPQ(s)[1],r=this.font.params.rule_thickness,a=o.h+n+r,[l]=this.getRootDimens(s,a);t.h=a+r,this.combineRootBBox(t,s,a),t.combine(s,l,a-s.h),t.combine(o,l+s.w,0),t.clean(),this.setChildPWidths(e)}combineRootBBox(t,e,s){}getPQ(t){const e=this.font.params.rule_thickness,s=this.node.attributes.get("displaystyle")?this.font.params.x_height:e;return[s,t.h+t.d>this.surdH?(t.h+t.d-(this.surdH-2*e-s/2))/2:e+s/4]}getRootDimens(t,e){return[0,0,0,0]}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmroot=void 0;const i=s(11),o=s(48),n=s(88);class r extends(o.CommonMrootMixin(i.CHTMLmsqrt)){addRoot(t,e,s,i){e.toCHTML(t);const[o,n,r]=this.getRootDimens(s,i);this.adaptor.setStyle(t,"verticalAlign",this.em(n)),this.adaptor.setStyle(t,"width",this.em(o)),r&&this.adaptor.setStyle(this.adaptor.firstChild(t),"paddingLeft",this.em(r))}}e.CHTMLmroot=r,r.kind=n.MmlMroot.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMrootMixin=void 0,e.CommonMrootMixin=function(t){return class extends t{get surd(){return 2}get root(){return 1}combineRootBBox(t,e,s){const i=this.childNodes[this.root].getBBox(),o=this.getRootDimens(e,s)[1];t.combine(i,0,o)}getRootDimens(t,e){const s=this.childNodes[this.surd],i=this.childNodes[this.root].getBBox(),o=(s.size<0?.5:.6)*t.w,{w:n,rscale:r}=i,a=Math.max(n,o/r),l=Math.max(0,a-n);return[a*r-o,this.rootHeight(i,t,s.size,e),l]}rootHeight(t,e,s,i){const o=e.h+e.d;return(s<0?1.9:.55*o)-(o-i)+Math.max(0,t.d*t.rscale)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLscriptbase=void 0;const i=s(0),o=s(50);class n extends(o.CommonScriptbaseMixin(i.CHTMLWrapper)){toCHTML(t){this.chtml=this.standardCHTMLnode(t);const[e,s]=this.getOffset(this.baseChild.getBBox(),this.script.getBBox()),i={"vertical-align":this.em(s)};e&&(i["margin-left"]=this.em(e)),this.baseChild.toCHTML(this.chtml),this.script.toCHTML(this.adaptor.append(this.chtml,this.html("mjx-script",{style:i})))}setDeltaW(t,e){for(let s=0;s<e.length;s++)e[s]&&this.adaptor.setStyle(t[s],"paddingLeft",this.em(e[s]))}adjustOverDepth(t,e){e.d>=0||this.adaptor.setStyle(t,"marginBottom",this.em(e.d*e.rscale))}adjustUnderDepth(t,e){if(e.d>=0)return;const s=this.adaptor,i=this.em(e.d),o=this.html("mjx-box",{style:{"margin-bottom":i,"vertical-align":i}});for(const e of s.childNodes(s.firstChild(t)))s.append(o,e);s.append(s.firstChild(t),o)}}e.CHTMLscriptbase=n,n.kind="scriptbase",n.useIC=!1},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonScriptbaseMixin=void 0;e.CommonScriptbaseMixin=function(t){var e;return(e=class extends t{constructor(...t){super(...t);let e=this.baseCore=this.childNodes[0];if(e){for(;1===e.childNodes.length&&(e.node.isKind("mrow")||e.node.isKind("TeXAtom")||e.node.isKind("mstyle")||e.node.isKind("mpadded")||e.node.isKind("mphantom")||e.node.isKind("semantics"));)if(e=e.childNodes[0],!e)return;"noIC"in e&&(this.baseCore=e,this.constructor.useIC||(e.noIC=!0))}}get baseChild(){return this.childNodes[this.node.base]}get script(){return this.childNodes[1]}computeBBox(t,e=!1){const s=this.baseChild.getBBox(),i=this.script.getBBox(),[o,n]=this.getOffset(s,i);t.append(s),t.combine(i,t.w+o,n),t.w+=this.font.params.scriptspace,t.clean(),this.setChildPWidths(e)}coreIC(){const t=this.baseCore.getBBox();return t.ic?1.05*t.ic+.05:0}coreScale(){let t=this.baseChild.getBBox().rscale,e=this.baseChild;for(;(e.node.isKind("mstyle")||e.node.isKind("mrow")||e.node.isKind("TeXAtom"))&&1===e.childNodes.length;)e=e.childNodes[0],t*=e.getBBox().rscale;return t}isCharBase(){let t=this.baseChild;for(;(t.node.isKind("mstyle")||t.node.isKind("mrow"))&&1===t.childNodes.length;)t=t.childNodes[0];return(t.node.isKind("mo")||t.node.isKind("mi")||t.node.isKind("mn"))&&1===t.bbox.rscale&&1===Array.from(t.getText()).length&&!t.node.attributes.get("largeop")}getOffset(t,e){return[0,0]}getV(t,e){const s=this.font.params,i=this.length2em(this.node.attributes.get("subscriptshift"),s.sub1);return Math.max(this.isCharBase()?0:t.d*t.rscale+s.sub_drop*e.rscale,i,e.h*e.rscale-.8*s.x_height)}getU(t,e){const s=this.font.params,i=this.node.attributes.getList("displaystyle","superscriptshift"),o=this.node.getProperty("texprimestyle")?s.sup3:i.displaystyle?s.sup1:s.sup2,n=this.length2em(i.superscriptshift,o);return Math.max(this.isCharBase()?0:t.h*t.rscale-s.sup_drop*e.rscale,n,e.d*e.rscale+1/4*s.x_height)}hasMovableLimits(){const t=this.node.attributes.get("displaystyle"),e=this.baseChild.coreMO().node;return!t&&!!e.attributes.get("movablelimits")}getOverKU(t,e){const s=this.node.attributes.get("accent"),i=this.font.params,o=e.d*e.rscale,n=(s?i.rule_thickness:Math.max(i.big_op_spacing1,i.big_op_spacing3-Math.max(0,o)))-(this.baseChild.node.isKind("munderover")?.1:0);return[n,t.h*t.rscale+n+o]}getUnderKV(t,e){const s=this.node.attributes.get("accentunder"),i=this.font.params,o=e.h*e.rscale,n=(s?i.rule_thickness:Math.max(i.big_op_spacing2,i.big_op_spacing4-o))-(this.baseChild.node.isKind("munderover")?.1:0);return[n,-(t.d*t.rscale+n+o)]}getDeltaW(t,e=[0,0,0]){const s=this.node.attributes.get("align"),i=t.map(t=>t.w*t.rscale),o=Math.max(...i),n=[];let r=0;for(const t of i.keys())n[t]=("center"===s?(o-i[t])/2:"right"===s?o-i[t]:0)+e[t],n[t]<r&&(r=-n[t]);if(r)for(const t of n.keys())n[t]+=r;return n}getDelta(t=!1){const e=this.node.attributes.get("accent")&&!t?this.baseChild.coreMO().bbox.sk:0;return(1.5*this.baseCore.bbox.ic/2+e)*this.coreScale()}stretchChildren(){let t=[];for(const e of this.childNodes)e.canStretch(2)&&t.push(e);let e=t.length,s=this.childNodes.length;if(e&&s>1){let i=0,o=e>1&&e===s;for(const t of this.childNodes){const e=0===t.stretch.dir;if(o||e){const{w:s,rscale:o}=t.getBBox(e);s*o>i&&(i=s*o)}}for(const e of t)e.coreMO().getStretchedVariant([i/e.bbox.rscale])}}}).useIC=!1,e}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmunderover=e.CHTMLmover=e.CHTMLmunder=void 0;const i=s(7),o=s(9),n=s(9),r=s(9),a=s(90);class l extends(o.CommonMunderMixin(i.CHTMLmsub)){toCHTML(t){if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.chtml,"limits","false");this.chtml=this.standardCHTMLnode(t);const e=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-row")),this.html("mjx-base")),s=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-row")),this.html("mjx-under"));this.baseChild.toCHTML(e),this.script.toCHTML(s);const i=this.baseChild.getBBox(),o=this.script.getBBox(),n=this.getUnderKV(i,o)[0],r=this.getDelta(!0);this.adaptor.setStyle(s,"paddingTop",this.em(n)),this.setDeltaW([e,s],this.getDeltaW([i,o],[0,-r])),this.adjustUnderDepth(s,o)}}e.CHTMLmunder=l,l.kind=a.MmlMunder.prototype.kind,l.useIC=!0,l.styles={"mjx-over":{"text-align":"left"},'mjx-munder:not([limits="false"])':{display:"inline-table"},"mjx-munder > mjx-row":{"text-align":"left"},"mjx-under":{"padding-bottom":".1em"}};class h extends(n.CommonMoverMixin(i.CHTMLmsup)){toCHTML(t){if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.chtml,"limits","false");this.chtml=this.standardCHTMLnode(t);const e=this.adaptor.append(this.chtml,this.html("mjx-over")),s=this.adaptor.append(this.chtml,this.html("mjx-base"));this.script.toCHTML(e),this.baseChild.toCHTML(s);const i=this.script.getBBox(),o=this.baseChild.getBBox(),n=this.getOverKU(o,i)[0],r=this.getDelta();this.adaptor.setStyle(e,"paddingBottom",this.em(n)),this.setDeltaW([s,e],this.getDeltaW([o,i],[0,r])),this.adjustOverDepth(e,i)}}e.CHTMLmover=h,h.kind=a.MmlMover.prototype.kind,h.useIC=!0,h.styles={'mjx-mover:not([limits="false"])':{"padding-top":".1em"},'mjx-mover:not([limits="false"]) > *':{display:"block","text-align":"left"}};class d extends(r.CommonMunderoverMixin(i.CHTMLmsubsup)){toCHTML(t){if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.chtml,"limits","false");this.chtml=this.standardCHTMLnode(t);const e=this.adaptor.append(this.chtml,this.html("mjx-over")),s=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-box")),this.html("mjx-munder")),i=this.adaptor.append(this.adaptor.append(s,this.html("mjx-row")),this.html("mjx-base")),o=this.adaptor.append(this.adaptor.append(s,this.html("mjx-row")),this.html("mjx-under"));this.overChild.toCHTML(e),this.baseChild.toCHTML(i),this.underChild.toCHTML(o);const n=this.overChild.getBBox(),r=this.baseChild.getBBox(),a=this.underChild.getBBox(),l=this.getOverKU(r,n)[0],h=this.getUnderKV(r,a)[0],d=this.getDelta();this.adaptor.setStyle(e,"paddingBottom",this.em(l)),this.adaptor.setStyle(o,"paddingTop",this.em(h)),this.setDeltaW([i,o,e],this.getDeltaW([r,a,n],[0,-d,d])),this.adjustOverDepth(e,n),this.adjustUnderDepth(o,a)}}e.CHTMLmunderover=d,d.kind=a.MmlMunderover.prototype.kind,d.useIC=!0,d.styles={'mjx-munderover:not([limits="false"])':{"padding-top":".1em"},'mjx-munderover:not([limits="false"]) > *':{display:"block"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmmultiscripts=void 0;const i=s(7),o=s(53),n=s(91);class r extends(o.CommonMmultiscriptsMixin(i.CHTMLmsubsup)){toCHTML(t){const e=this.standardCHTMLnode(t),s=this.getScriptData(),i=this.combinePrePost(s.sub,s.psub),o=this.combinePrePost(s.sup,s.psup),[n,r]=this.getUVQ(s.base,i,o);s.numPrescripts&&this.addScripts(n,-r,!0,s.psub,s.psup,this.firstPrescript,s.numPrescripts),this.childNodes[0].toCHTML(e),s.numScripts&&this.addScripts(n,-r,!1,s.sub,s.sup,1,s.numScripts)}addScripts(t,e,s,i,o,n,r){const a=this.adaptor,l=t-o.d+(e-i.h),h=t<0&&0===e?i.h+t:t,d=l>0?{style:{height:this.em(l)}}:{},c=h?{style:{"vertical-align":this.em(h)}}:{},m=this.html("mjx-row"),u=this.html("mjx-row",d),p=this.html("mjx-row"),x="mjx-"+(s?"pre":"")+"scripts";a.append(this.chtml,this.html(x,c,[m,u,p]));let g=n+2*r;for(;n<g;)this.childNodes[n++].toCHTML(a.append(p,this.html("mjx-cell"))),this.childNodes[n++].toCHTML(a.append(m,this.html("mjx-cell")))}}e.CHTMLmmultiscripts=r,r.kind=n.MmlMmultiscripts.prototype.kind,r.styles={"mjx-prescripts":{display:"inline-table","padding-left":".05em"},"mjx-scripts":{display:"inline-table","padding-right":".05em"},"mjx-prescripts > mjx-row > mjx-cell":{"text-align":"right"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMmultiscriptsMixin=e.ScriptNames=e.NextScript=void 0;const i=s(1);e.NextScript={base:"subList",subList:"supList",supList:"subList",psubList:"psupList",psupList:"psubList"},e.ScriptNames=["sup","sup","psup","psub"],e.CommonMmultiscriptsMixin=function(t){return class extends t{constructor(){super(...arguments),this.scriptData=null,this.firstPrescript=0}combinePrePost(t,e){const s=new i.BBox(t);return s.combine(e,0,0),s}computeBBox(t,e=!1){const s=this.font.params.scriptspace,i=this.getScriptData(),o=this.combinePrePost(i.sub,i.psub),n=this.combinePrePost(i.sup,i.psup),[r,a]=this.getUVQ(i.base,o,n);if(t.empty(),i.numPrescripts&&(t.combine(i.psup,s,r),t.combine(i.psub,s,a)),t.append(i.base),i.numScripts){const e=t.w;t.combine(i.sup,e,r),t.combine(i.sub,e,a),t.w+=s}t.clean(),this.setChildPWidths(e)}getScriptData(){if(this.scriptData)return this.scriptData;const t=this.scriptData={base:null,sub:i.BBox.empty(),sup:i.BBox.empty(),psub:i.BBox.empty(),psup:i.BBox.empty(),numPrescripts:0,numScripts:0},e=this.getScriptBBoxLists();return this.combineBBoxLists(t.sub,t.sup,e.subList,e.supList),this.combineBBoxLists(t.psub,t.psup,e.psubList,e.psupList),this.scriptData.base=e.base[0],this.scriptData.numPrescripts=e.psubList.length,this.scriptData.numScripts=e.subList.length,this.scriptData}getScriptBBoxLists(){const t={base:[],subList:[],supList:[],psubList:[],psupList:[]};let s="base";for(const i of this.childNodes)i.node.isKind("mprescripts")?s="psubList":(t[s].push(i.getBBox()),s=e.NextScript[s]);return this.firstPrescript=t.subList.length+t.supList.length+2,this.padLists(t.subList,t.supList),this.padLists(t.psubList,t.psupList),t}padLists(t,e){t.length>e.length&&e.push(i.BBox.empty())}combineBBoxLists(t,e,s,i){for(let o=0;o<s.length;o++){const[n,r,a]=this.getScaledWHD(s[o]),[l,h,d]=this.getScaledWHD(i[o]),c=Math.max(n,l);t.w+=c,e.w+=c,r>t.h&&(t.h=r),a>t.d&&(t.d=a),h>e.h&&(e.h=h),d>e.d&&(e.d=d)}}getScaledWHD(t){const{w:e,h:s,d:i,rscale:o}=t;return[e*o,s*o,i*o]}getUVQ(t,e,s){if(!this.UVQ){let[i,o,n]=[0,0,0];0===e.h&&0===e.d?i=this.getU(t,s):0===s.h&&0===s.d?i=-this.getV(t,e):[i,o,n]=super.getUVQ(t,e,s),this.UVQ=[i,o,n]}return this.UVQ}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmtable=void 0;const i=s(0),o=s(55),n=s(93),r=s(3);class a extends(o.CommonMtableMixin(i.CHTMLWrapper)){constructor(t,e,s=null){super(t,e,s),this.itable=this.html("mjx-itable"),this.labels=this.html("mjx-itable")}getAlignShift(){const t=super.getAlignShift();return this.isTop||(t[1]=0),t}toCHTML(t){const e=this.standardCHTMLnode(t);this.adaptor.append(e,this.html("mjx-table",{},[this.itable]));for(const t of this.childNodes)t.toCHTML(this.itable);this.padRows(),this.handleColumnSpacing(),this.handleColumnLines(),this.handleColumnWidths(),this.handleRowSpacing(),this.handleRowLines(),this.handleEqualRows(),this.handleFrame(),this.handleWidth(),this.handleLabels(),this.handleAlign(),this.handleJustify(),this.shiftColor()}shiftColor(){const t=this.adaptor,e=t.getStyle(this.chtml,"backgroundColor");e&&(t.setStyle(this.chtml,"backgroundColor",""),t.setStyle(this.itable,"backgroundColor",e))}padRows(){const t=this.adaptor;for(const e of t.childNodes(this.itable))for(;t.childNodes(e).length<this.numCols;)t.append(e,this.html("mjx-mtd"))}handleColumnSpacing(){const t=this.getEmHalfSpacing(this.fSpace[0],this.cSpace),e=this.frame;for(const s of this.tableRows){let i=0;for(const o of s.tableCells){const n=t[i++],r=t[i],a=o?o.chtml:this.adaptor.childNodes(s.chtml)[i];(i>1&&"0.4em"!==n||e&&1===i)&&this.adaptor.setStyle(a,"paddingLeft",n),(i<this.numCols&&"0.4em"!==r||e&&i===this.numCols)&&this.adaptor.setStyle(a,"paddingRight",r)}}}handleColumnLines(){if("none"===this.node.attributes.get("columnlines"))return;const t=this.getColumnAttributes("columnlines");for(const e of this.childNodes){let s=0;for(const i of this.adaptor.childNodes(e.chtml).slice(1)){const e=t[s++];"none"!==e&&this.adaptor.setStyle(i,"borderLeft",".07em "+e)}}}handleColumnWidths(){for(const t of this.childNodes){let e=0;for(const s of this.adaptor.childNodes(t.chtml)){const t=this.cWidths[e++];if(null!==t){const e="number"==typeof t?this.em(t):t;this.adaptor.setStyle(s,"width",e),this.adaptor.setStyle(s,"maxWidth",e),this.adaptor.setStyle(s,"minWidth",e)}}}}handleRowSpacing(){const t=this.getEmHalfSpacing(this.fSpace[1],this.rSpace),e=this.frame;let s=0;for(const i of this.childNodes){const o=t[s++],n=t[s];for(const t of i.childNodes)(s>1&&"0.215em"!==o||e&&1===s)&&this.adaptor.setStyle(t.chtml,"paddingTop",o),(s<this.numRows&&"0.215em"!==n||e&&s===this.numRows)&&this.adaptor.setStyle(t.chtml,"paddingBottom",n)}}handleRowLines(){if("none"===this.node.attributes.get("rowlines"))return;const t=this.getRowAttributes("rowlines");let e=0;for(const s of this.childNodes.slice(1)){const i=t[e++];if("none"!==i)for(const t of this.adaptor.childNodes(s.chtml))this.adaptor.setStyle(t,"borderTop",".07em "+i)}}handleEqualRows(){if(!this.node.attributes.get("equalrows"))return;const t=this.getRowHalfSpacing(),{H:e,D:s,NH:i,ND:o}=this.getTableData(),n=this.getEqualRowHeight();for(let r=0;r<this.numRows;r++){const a=this.childNodes[r];n!==i[r]+o[r]&&this.setRowHeight(a,n,(n-e[r]+s[r])/2,t[r]+t[r+1])}}setRowHeight(t,e,s,i){this.adaptor.setStyle(t.chtml,"height",this.em(e+i));const o=t.node.attributes.get("rowalign");for(const i of t.childNodes)if(this.setCellBaseline(i,o,e,s))break}setCellBaseline(t,e,s,i){const o=t.node.attributes.get("rowalign");if("baseline"===o||"axis"===o){const o=this.adaptor,n=o.lastChild(t.chtml);o.setStyle(n,"height",this.em(s)),o.setStyle(n,"verticalAlign",this.em(-i));const r=t.parent;if(!(r.node.isKind("mlabeledtr")&&t===r.childNodes[0]||"baseline"!==e&&"axis"!==e))return!0}return!1}handleFrame(){this.frame&&this.adaptor.setStyle(this.itable,"border",".07em "+this.node.attributes.get("frame"))}handleWidth(){const t=this.adaptor,{w:e,L:s,R:i}=this.getBBox();t.setStyle(this.chtml,"minWidth",this.em(s+e+i));let o=this.node.attributes.get("width");if(r.isPercent(o))t.setStyle(this.chtml,"width",""),t.setAttribute(this.chtml,"width","full");else if(!this.hasLabels){if("auto"===o)return;o=this.em(this.length2em(o)+2*this.fLine)}const n=t.firstChild(this.chtml);t.setStyle(n,"width",o),t.setStyle(n,"minWidth",this.em(e)),(s||i)&&(t.setStyle(this.chtml,"margin",""),s===i?t.setStyle(n,"margin","0 "+this.em(i)):t.setStyle(n,"margin","0 "+this.em(i)+" 0 "+this.em(s))),t.setAttribute(this.itable,"width","full")}handleAlign(){const[t,e]=this.getAlignmentRow();if(null===e)"axis"!==t&&this.adaptor.setAttribute(this.chtml,"align",t);else{const s=this.getVerticalPosition(e,t);this.adaptor.setAttribute(this.chtml,"align","top"),this.adaptor.setStyle(this.chtml,"verticalAlign",this.em(s))}}handleJustify(){const t=this.getAlignShift()[0];"center"!==t&&this.adaptor.setAttribute(this.chtml,"justify",t)}handleLabels(){if(!this.hasLabels)return;const t=this.labels,e=this.node.attributes,s=this.adaptor,i=e.get("side");s.setAttribute(this.chtml,"side",i),s.setAttribute(t,"align",i),s.setStyle(t,i,"0");const[o,n]=this.addLabelPadding(i);if(n){const t=s.firstChild(this.chtml);this.setIndent(t,o,n)}this.updateRowHeights(),this.addLabelSpacing()}addLabelPadding(t){const[,e,s]=this.getPadAlignShift(t),i={};if("right"===t){const t=this.node.attributes.get("width"),{w:e,L:s,R:o}=this.getBBox();i.style={width:r.isPercent(t)?"calc("+t+" + "+this.em(s+o)+")":this.em(s+e+o)}}return this.adaptor.append(this.chtml,this.html("mjx-labels",i,[this.labels])),[e,s]}updateRowHeights(){if(this.node.attributes.get("equalrows"))return;let{H:t,D:e,NH:s,ND:i}=this.getTableData();const o=this.getRowHalfSpacing();for(let n=0;n<this.numRows;n++){const r=this.childNodes[n];t[n]!==s[n]||e[n]!==i[n]?this.setRowHeight(r,t[n]+e[n],e[n],o[n]+o[n+1]):r.node.isKind("mlabeledtr")&&this.setCellBaseline(r.childNodes[0],"",t[n]+e[n],e[n])}}addLabelSpacing(){const t=this.adaptor,e=this.node.attributes.get("equalrows"),{H:s,D:i}=this.getTableData(),o=e?this.getEqualRowHeight():0,n=this.getRowHalfSpacing();let r=this.fLine,a=t.firstChild(this.labels);for(let l=0;l<this.numRows;l++){this.childNodes[l].node.isKind("mlabeledtr")?(r&&t.insert(this.html("mjx-mtr",{style:{height:this.em(r)}}),a),t.setStyle(a,"height",this.em((e?o:s[l]+i[l])+n[l]+n[l+1])),a=t.next(a),r=this.rLines[l]):r+=n[l]+(e?o:s[l]+i[l])+n[l+1]+this.rLines[l]}}}e.CHTMLmtable=a,a.kind=n.MmlMtable.prototype.kind,a.styles={"mjx-mtable":{"vertical-align":".25em","text-align":"center",position:"relative","box-sizing":"border-box"},"mjx-labels":{position:"absolute",left:0,top:0},"mjx-table":{display:"inline-block","vertical-align":"-.5ex"},"mjx-table > mjx-itable":{"vertical-align":"middle","text-align":"left","box-sizing":"border-box"},"mjx-labels > mjx-itable":{position:"absolute",top:0},'mjx-mtable[justify="left"]':{"text-align":"left"},'mjx-mtable[justify="right"]':{"text-align":"right"},'mjx-mtable[justify="left"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="left"][side="right"]':{"padding-left":"0 ! important"},'mjx-mtable[justify="right"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="right"][side="right"]':{"padding-left":"0 ! important"},"mjx-mtable[align]":{"vertical-align":"baseline"},'mjx-mtable[align="top"] > mjx-table':{"vertical-align":"top"},'mjx-mtable[align="bottom"] > mjx-table':{"vertical-align":"bottom"},'mjx-mtable[side="right"] mjx-labels':{"min-width":"100%"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMtableMixin=void 0;const i=s(1),o=s(3),n=s(92);e.CommonMtableMixin=function(t){return class extends t{constructor(...t){super(...t),this.numCols=0,this.numRows=0,this.data=null,this.pwidthCells=[],this.pWidth=0,this.numCols=n.max(this.tableRows.map(t=>t.numCells)),this.numRows=this.childNodes.length,this.hasLabels=this.childNodes.reduce((t,e)=>t||e.node.isKind("mlabeledtr"),!1),this.findContainer(),this.isTop=!this.container||this.container.node.isKind("math")&&!this.container.parent,this.isTop&&(this.jax.table=this),this.getPercentageWidth();const e=this.node.attributes;this.frame="none"!==e.get("frame"),this.fLine=this.frame?.07:0,this.fSpace=this.frame?this.convertLengths(this.getAttributeArray("framespacing")):[0,0],this.cSpace=this.convertLengths(this.getColumnAttributes("columnspacing")),this.rSpace=this.convertLengths(this.getRowAttributes("rowspacing")),this.cLines=this.getColumnAttributes("columnlines").map(t=>"none"===t?0:.07),this.rLines=this.getRowAttributes("rowlines").map(t=>"none"===t?0:.07),this.cWidths=this.getColumnWidths(),this.stretchRows(),this.stretchColumns()}get tableRows(){return this.childNodes}findContainer(){let t=this,e=t.parent;for(;e&&(e.node.notParent||e.node.isKind("mrow"));)t=e,e=e.parent;this.container=e,this.containerI=t.node.childPosition()}getPercentageWidth(){if(this.hasLabels)this.bbox.pwidth=i.BBox.fullWidth;else{const t=this.node.attributes.get("width");o.isPercent(t)&&(this.bbox.pwidth=t)}}stretchRows(){const t=this.node.attributes.get("equalrows"),e=t?this.getEqualRowHeight():0,{H:s,D:i}=t?this.getTableData():{H:[0],D:[0]},o=this.tableRows;for(let n=0;n<this.numRows;n++){const r=t?[(e+s[n]-i[n])/2,(e-s[n]+i[n])/2]:null;o[n].stretchChildren(r)}}stretchColumns(){for(let t=0;t<this.numCols;t++){const e="number"==typeof this.cWidths[t]?this.cWidths[t]:null;this.stretchColumn(t,e)}}stretchColumn(t,e){let s=[];for(const e of this.tableRows){const i=e.getChild(t);if(i){const t=i.childNodes[0];0===t.stretch.dir&&t.canStretch(2)&&s.push(t)}}let i=s.length,o=this.childNodes.length;if(i&&o>1){if(null===e){e=0;let s=i>1&&i===o;for(const i of this.tableRows){const o=i.getChild(t);if(o){const t=o.childNodes[0],i=0===t.stretch.dir;if(s||i){const{w:s}=t.getBBox(i);s>e&&(e=s)}}}}for(const t of s)t.coreMO().getStretchedVariant([e])}}getTableData(){if(this.data)return this.data;const t=new Array(this.numRows).fill(0),e=new Array(this.numRows).fill(0),s=new Array(this.numCols).fill(0),i=new Array(this.numRows),o=new Array(this.numRows),n=[0],r=this.tableRows;for(let a=0;a<r.length;a++){const l=r[a];for(let i=0;i<l.numCells;i++){const o=l.getChild(i);this.updateHDW(o,i,a,t,e,s),this.recordPWidthCell(o,i)}i[a]=t[a],o[a]=e[a],l.labeled&&this.updateHDW(l.childNodes[0],0,a,t,e,n)}const a=n[0];return this.data={H:t,D:e,W:s,NH:i,ND:o,L:a},this.data}updateHDW(t,e,s,i,o,n=null){let{h:r,d:a,w:l}=t.getBBox();r<.75&&(r=.75),a<.25&&(a=.25),r>i[s]&&(i[s]=r),a>o[s]&&(o[s]=a),n&&l>n[e]&&(n[e]=l)}recordPWidthCell(t,e){t.childNodes[0]&&t.childNodes[0].getBBox().pwidth&&this.pwidthCells.push([t,e])}computeBBox(t,e=!1){const{H:s,D:i}=this.getTableData();let r,a;if(this.node.attributes.get("equalrows")){const t=this.getEqualRowHeight();r=n.sum([].concat(this.rLines,this.rSpace))+t*this.numRows}else r=n.sum(s.concat(i,this.rLines,this.rSpace));r+=2*(this.fLine+this.fSpace[1]);const l=this.getComputedWidths();a=n.sum(l.concat(this.cLines,this.cSpace))+2*(this.fLine+this.fSpace[0]);const h=this.node.attributes.get("width");"auto"!==h&&(a=Math.max(this.length2em(h,0)+2*this.fLine,a));let[d,c]=this.getBBoxHD(r);t.h=d,t.d=c,t.w=a;let[m,u]=this.getBBoxLR();t.L=m,t.R=u,o.isPercent(h)||this.setColumnPWidths()}setChildPWidths(t,e,s){const i=this.node.attributes.get("width");if(!o.isPercent(i))return!1;this.hasLabels||(this.bbox.pwidth="",this.container.bbox.pwidth="");const{w:r,L:a,R:l}=this.bbox,h=Math.max(r,this.length2em(i,Math.max(e,a+r+l))),d=this.node.attributes.get("equalcolumns")?Array(this.numCols).fill(this.percent(1/Math.max(1,this.numCols))):this.getColumnAttributes("columnwidth",0);this.cWidths=this.getColumnWidthsFixed(d,h);const c=this.getComputedWidths();return this.pWidth=n.sum(c.concat(this.cLines,this.cSpace))+2*(this.fLine+this.fSpace[0]),this.isTop&&(this.bbox.w=this.pWidth),this.setColumnPWidths(),this.pWidth!==r&&this.parent.invalidateBBox(),this.pWidth!==r}setColumnPWidths(){const t=this.cWidths;for(const[e,s]of this.pwidthCells)e.setChildPWidths(!1,t[s])&&(e.invalidateBBox(),e.getBBox())}getBBoxHD(t){const[e,s]=this.getAlignmentRow();if(null===s){const s=this.font.params.axis_height,i=t/2;return{top:[0,t],center:[i,i],bottom:[t,0],baseline:[i,i],axis:[i+s,i-s]}[e]||[i,i]}{const i=this.getVerticalPosition(s,e);return[i,t-i]}}getBBoxLR(){if(this.hasLabels){const t=this.node.attributes.get("side"),[e,s]=this.getPadAlignShift(t);return"center"===s?[e,e]:"left"===t?[e,0]:[0,e]}return[0,0]}getPadAlignShift(t){const{L:e}=this.getTableData();let s=e+this.length2em(this.node.attributes.get("minlabelspacing"));const[i,o]=null==this.styles?["",""]:[this.styles.get("padding-left"),this.styles.get("padding-right")];(i||o)&&(s=Math.max(s,this.length2em(i||"0"),this.length2em(o||"0")));let[n,r]=this.getAlignShift();return n===t&&(r="left"===t?Math.max(s,r)-s:Math.min(-s,r)+s),[s,n,r]}getAlignShift(){return this.isTop?super.getAlignShift():[this.container.getChildAlign(this.containerI),0]}getWidth(){return this.pWidth||this.getBBox().w}getEqualRowHeight(){const{H:t,D:e}=this.getTableData(),s=Array.from(t.keys()).map(s=>t[s]+e[s]);return Math.max.apply(Math,s)}getComputedWidths(){const t=this.getTableData().W;let e=Array.from(t.keys()).map(e=>"number"==typeof this.cWidths[e]?this.cWidths[e]:t[e]);return this.node.attributes.get("equalcolumns")&&(e=Array(e.length).fill(n.max(e))),e}getColumnWidths(){const t=this.node.attributes.get("width");if(this.node.attributes.get("equalcolumns"))return this.getEqualColumns(t);const e=this.getColumnAttributes("columnwidth",0);return"auto"===t?this.getColumnWidthsAuto(e):o.isPercent(t)?this.getColumnWidthsPercent(e):this.getColumnWidthsFixed(e,this.length2em(t))}getEqualColumns(t){const e=Math.max(1,this.numCols);let s;if("auto"===t){const{W:t}=this.getTableData();s=n.max(t)}else if(o.isPercent(t))s=this.percent(1/e);else{const i=n.sum([].concat(this.cLines,this.cSpace))+2*this.fSpace[0];s=Math.max(0,this.length2em(t)-i)/e}return Array(this.numCols).fill(s)}getColumnWidthsAuto(t){return t.map(t=>"auto"===t||"fit"===t?null:o.isPercent(t)?t:this.length2em(t))}getColumnWidthsPercent(t){const e=t.indexOf("fit")>=0,{W:s}=e?this.getTableData():{W:null};return Array.from(t.keys()).map(i=>{const n=t[i];return"fit"===n?null:"auto"===n?e?s[i]:null:o.isPercent(n)?n:this.length2em(n)})}getColumnWidthsFixed(t,e){const s=Array.from(t.keys()),i=s.filter(e=>"fit"===t[e]),o=s.filter(e=>"auto"===t[e]),r=i.length||o.length,{W:a}=r?this.getTableData():{W:null},l=e-n.sum([].concat(this.cLines,this.cSpace))-2*this.fSpace[0];let h=l;s.forEach(s=>{const i=t[s];h-="fit"===i||"auto"===i?a[s]:this.length2em(i,e)});const d=r&&h>0?h/r:0;return s.map(e=>{const s=t[e];return"fit"===s?a[e]+d:"auto"===s?a[e]+(0===i.length?d:0):this.length2em(s,l)})}getVerticalPosition(t,e){const s=this.node.attributes.get("equalrows"),{H:i,D:o}=this.getTableData(),n=s?this.getEqualRowHeight():0,r=this.getRowHalfSpacing();let a=this.fLine;for(let e=0;e<t;e++)a+=r[e]+(s?n:i[e]+o[e])+r[e+1]+this.rLines[e];const[l,h]=s?[(n+i[t]-o[t])/2,(n-i[t]+o[t])/2]:[i[t],o[t]];return a+={top:0,center:r[t]+(l+h)/2,bottom:r[t]+l+h+r[t+1],baseline:r[t]+l,axis:r[t]+l-.25}[e]||0,a}getEmHalfSpacing(t,e){const s=this.em(t),i=this.addEm(e,2);return i.unshift(s),i.push(s),i}getRowHalfSpacing(){const t=this.rSpace.map(t=>t/2);return t.unshift(this.fSpace[1]),t.push(this.fSpace[1]),t}getColumnHalfSpacing(){const t=this.cSpace.map(t=>t/2);return t.unshift(this.fSpace[0]),t.push(this.fSpace[0]),t}getAlignmentRow(){const[t,e]=o.split(this.node.attributes.get("align"));if(null==e)return[t,null];let s=parseInt(e);return s<0&&(s+=this.numRows+1),[t,s<1||s>this.numRows?null:s-1]}getColumnAttributes(t,e=1){const s=this.numCols-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getRowAttributes(t,e=1){const s=this.numRows-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getAttributeArray(t){const e=this.node.attributes.get(t);return e?o.split(e):[this.node.attributes.getDefault(t)]}addEm(t,e=1){return t?t.map(t=>this.em(t/e)):null}convertLengths(t){return t?t.map(t=>this.length2em(t)):null}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmlabeledtr=e.CHTMLmtr=void 0;const i=s(0),o=s(12),n=s(12),r=s(94);class a extends(o.CommonMtrMixin(i.CHTMLWrapper)){toCHTML(t){super.toCHTML(t);const e=this.node.attributes.get("rowalign");"baseline"!==e&&this.adaptor.setAttribute(this.chtml,"rowalign",e)}}e.CHTMLmtr=a,a.kind=r.MmlMtr.prototype.kind,a.styles={"mjx-mtr":{display:"table-row"},'mjx-mtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}};class l extends(n.CommonMlabeledtrMixin(a)){toCHTML(t){super.toCHTML(t);const e=this.adaptor.firstChild(this.chtml);if(e){this.adaptor.remove(e);const t=this.node.attributes.get("rowalign"),s="baseline"!==t&&"axis"!==t?{rowalign:t}:{},i=this.html("mjx-mtr",s,[e]);a.used=!0,this.adaptor.append(this.parent.labels,i)}}}e.CHTMLmlabeledtr=l,l.kind=r.MmlMlabeledtr.prototype.kind,l.styles={"mjx-mlabeledtr":{display:"table-row"},'mjx-mlabeledtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mlabeledtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mlabeledtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mlabeledtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mlabeledtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmtd=void 0;const i=s(0),o=s(58),n=s(95);class r extends(o.CommonMtdMixin(i.CHTMLWrapper)){toCHTML(t){super.toCHTML(t);const e=this.node.attributes.get("rowalign"),s=this.node.attributes.get("columnalign");e!==this.parent.node.attributes.get("rowalign")&&this.adaptor.setAttribute(this.chtml,"rowalign",e),"center"===s||"mlabeledtr"===this.parent.kind&&this===this.parent.childNodes[0]&&s===this.parent.parent.node.attributes.get("side")||this.adaptor.setStyle(this.chtml,"textAlign",s),this.adaptor.append(this.chtml,this.html("mjx-tstrut"))}}e.CHTMLmtd=r,r.kind=n.MmlMtd.prototype.kind,r.styles={"mjx-mtd":{display:"table-cell","text-align":"center",padding:".215em .4em"},"mjx-mtd:first-child":{"padding-left":0},"mjx-mtd:last-child":{"padding-right":0},"mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd":{"padding-top":0},"mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd":{"padding-bottom":0},"mjx-tstrut":{display:"inline-block",height:"1em","vertical-align":"-.25em"},'mjx-labels[align="left"] > mjx-mtr > mjx-mtd':{"text-align":"left"},'mjx-labels[align="right"] > mjx-mtr > mjx-mtd':{"text-align":"right"},'mjx-mtr mjx-mtd[rowalign="top"], mjx-mlabeledtr mjx-mtd[rowalign="top"]':{"vertical-align":"top"},'mjx-mtr mjx-mtd[rowalign="center"], mjx-mlabeledtr mjx-mtd[rowalign="center"]':{"vertical-align":"middle"},'mjx-mtr mjx-mtd[rowalign="bottom"], mjx-mlabeledtr mjx-mtd[rowalign="bottom"]':{"vertical-align":"bottom"},'mjx-mtr mjx-mtd[rowalign="baseline"], mjx-mlabeledtr mjx-mtd[rowalign="baseline"]':{"vertical-align":"baseline"},'mjx-mtr mjx-mtd[rowalign="axis"], mjx-mlabeledtr mjx-mtd[rowalign="axis"]':{"vertical-align":".25em"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMtdMixin=void 0,e.CommonMtdMixin=function(t){return class extends t{get fixesPWidth(){return!1}invalidateBBox(){this.bboxComputed=!1}getWrapWidth(t){const e=this.parent.parent,s=this.parent,i=this.node.childPosition()-(s.labeled?1:0);return"number"==typeof e.cWidths[i]?e.cWidths[i]:e.getTableData().W[i]}getChildAlign(t){return this.node.attributes.get("columnalign")}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmaction=void 0;const i=s(0),o=s(13),n=s(13),r=s(96);class a extends(o.CommonMactionMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.standardCHTMLnode(t);this.selected.toCHTML(e),this.action(this,this.data)}setEventHandler(t,e){this.chtml.addEventListener(t,e)}}e.CHTMLmaction=a,a.kind=r.MmlMaction.prototype.kind,a.styles={"mjx-maction":{position:"relative"},"mjx-maction > mjx-tool":{display:"none",position:"absolute",bottom:0,right:0,width:0,height:0,"z-index":500},"mjx-tool > mjx-tip":{display:"inline-block",padding:".2em",border:"1px solid #888","font-size":"70%","background-color":"#F8F8F8",color:"black","box-shadow":"2px 2px 5px #AAAAAA"},"mjx-maction[toggle]":{cursor:"pointer"},"mjx-status":{display:"block",position:"fixed",left:"1em",bottom:"1em","min-width":"25%",padding:".2em .4em",border:"1px solid #888","font-size":"90%","background-color":"#F8F8F8",color:"black"}},a.actions=new Map([["toggle",[(t,e)=>{t.adaptor.setAttribute(t.chtml,"toggle",t.node.attributes.get("selection"));const s=t.factory.jax.math,i=t.factory.jax.document,o=t.node;t.setEventHandler("click",t=>{s.end.node||(s.start.node=s.end.node=s.typesetRoot,s.start.n=s.end.n=0),o.nextToggleSelection(),s.rerender(i),t.stopPropagation()})},{}]],["tooltip",[(t,e)=>{const s=t.childNodes[1];if(s)if(s.node.isKind("mtext")){const e=s.node.getText();t.adaptor.setAttribute(t.chtml,"title",e)}else{const i=t.adaptor,o=i.append(t.chtml,t.html("mjx-tool",{style:{bottom:t.em(-t.dy),right:t.em(-t.dx)}},[t.html("mjx-tip")]));s.toCHTML(i.firstChild(o)),t.setEventHandler("mouseover",s=>{e.stopTimers(t,e);const n=setTimeout(()=>i.setStyle(o,"display","block"),e.postDelay);e.hoverTimer.set(t,n),s.stopPropagation()}),t.setEventHandler("mouseout",s=>{e.stopTimers(t,e);const n=setTimeout(()=>i.setStyle(o,"display",""),e.clearDelay);e.clearTimer.set(t,n),s.stopPropagation()})}},n.TooltipData]],["statusline",[(t,e)=>{const s=t.childNodes[1];if(s&&s.node.isKind("mtext")){const i=t.adaptor,o=s.node.getText();i.setAttribute(t.chtml,"statusline",o),t.setEventHandler("mouseover",s=>{if(null===e.status){const s=i.body(i.document);e.status=i.append(s,t.html("mjx-status",{},[t.text(o)]))}s.stopPropagation()}),t.setEventHandler("mouseout",t=>{e.status&&(i.remove(e.status),e.status=null),t.stopPropagation()})}},{status:null}]]])},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLmglyph=void 0;const i=s(0),o=s(61),n=s(97);class r extends(o.CommonMglyphMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.standardCHTMLnode(t),{src:s,alt:i}=this.node.attributes.getList("src","alt"),o={width:this.em(this.width),height:this.em(this.height)};this.valign&&(o.verticalAlign=this.em(this.valign));const n=this.html("img",{src:s,style:o,alt:i,title:i});this.adaptor.append(e,n)}}e.CHTMLmglyph=r,r.kind=n.MmlMglyph.prototype.kind,r.styles={"mjx-mglyph > img":{display:"inline-block",border:0,padding:0}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonMglyphMixin=void 0,e.CommonMglyphMixin=function(t){return class extends t{constructor(...t){super(...t),this.getParameters()}getParameters(){const{width:t,height:e,valign:s}=this.node.attributes.getList("width","height","valign");this.width="auto"===t?1:this.length2em(t),this.height="auto"===e?1:this.length2em(e),this.valign=this.length2em(s||"0")}computeBBox(t,e=!1){t.w=this.width,t.h=this.height+this.valign,t.d=-this.valign}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLxml=e.CHTMLannotationXML=e.CHTMLannotation=e.CHTMLsemantics=void 0;const i=s(0),o=s(63),n=s(98),r=s(5);class a extends(o.CommonSemanticsMixin(i.CHTMLWrapper)){toCHTML(t){const e=this.standardCHTMLnode(t);this.childNodes.length&&this.childNodes[0].toCHTML(e)}}e.CHTMLsemantics=a,a.kind=n.MmlSemantics.prototype.kind;class l extends i.CHTMLWrapper{toCHTML(t){super.toCHTML(t)}computeBBox(){return this.bbox}}e.CHTMLannotation=l,l.kind=n.MmlAnnotation.prototype.kind;class h extends i.CHTMLWrapper{}e.CHTMLannotationXML=h,h.kind=n.MmlAnnotationXML.prototype.kind,h.styles={"mjx-annotation-xml":{"font-family":"initial","line-height":"normal"}};class d extends i.CHTMLWrapper{toCHTML(t){this.chtml=this.adaptor.append(t,this.adaptor.clone(this.node.getXML()))}computeBBox(t,e=!1){const{w:s,h:i,d:o}=this.jax.measureXMLnode(this.node.getXML());t.w=s,t.h=i,t.d=o}getStyles(){}getScale(){}getVariant(){}}e.CHTMLxml=d,d.kind=r.XMLNode.prototype.kind,d.autoStyle=!1},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonSemanticsMixin=void 0,e.CommonSemanticsMixin=function(t){return class extends t{computeBBox(t,e=!1){if(this.childNodes.length){const{w:e,h:s,d:i}=this.childNodes[0].getBBox();t.w=e,t.h=s,t.d=i}}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLTeXAtom=void 0;const i=s(0),o=s(65),n=s(99),r=s(5);class a extends(o.CommonTeXAtomMixin(i.CHTMLWrapper)){toCHTML(t){if(super.toCHTML(t),this.adaptor.setAttribute(this.chtml,"texclass",r.TEXCLASSNAMES[this.node.texClass]),this.node.texClass===r.TEXCLASS.VCENTER){const t=this.childNodes[0].getBBox(),{h:e,d:s}=t,i=(e+s)/2+this.font.params.axis_height-e;this.adaptor.setStyle(this.chtml,"verticalAlign",this.em(i))}}}e.CHTMLTeXAtom=a,a.kind=n.TeXAtom.prototype.kind},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonTeXAtomMixin=void 0;const i=s(5);e.CommonTeXAtomMixin=function(t){return class extends t{computeBBox(t,e=!1){if(super.computeBBox(t,e),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(t.ic=this.childNodes[0].bbox.ic),this.node.texClass===i.TEXCLASS.VCENTER){const{h:e,d:s}=t,i=(e+s)/2+this.font.params.axis_height-e;t.h+=i,t.d-=i}}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CHTMLTextNode=void 0;const i=s(5),o=s(0),n=s(67);class r extends(n.CommonTextNodeMixin(o.CHTMLWrapper)){toCHTML(t){this.markUsed();const e=this.adaptor,s=this.parent.variant,i=this.node.getText();if("-explicitFont"===s){const o=this.jax.getFontData(this.parent.styles);e.append(t,this.jax.unknownText(i,s,o))}else{const o=this.remappedText(i,s);for(const i of o){const o=this.getVariantChar(s,i)[3],n=o.f?" TEX-"+o.f:"",r=o.unknown?this.jax.unknownText(String.fromCodePoint(i),s):this.html("mjx-c",{class:this.char(i)+n});e.append(t,r),o.used=!0}}}}e.CHTMLTextNode=r,r.kind=i.TextNode.prototype.kind,r.autoStyle=!1,r.styles={"mjx-c":{display:"inline-block"},"mjx-utext":{display:"inline-block",padding:".75em 0 .2em 0"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonTextNodeMixin=void 0,e.CommonTextNodeMixin=function(t){return class extends t{computeBBox(t,e=!1){const s=this.parent.variant,i=this.node.getText();if("-explicitFont"===s){const e=this.jax.getFontData(this.parent.styles),{w:o,h:n,d:r}=this.jax.measureText(i,s,e);t.h=n,t.d=r,t.w=o}else{const e=this.remappedText(i,s);t.empty();for(const i of e){let[e,o,n,r]=this.getVariantChar(s,i);if(r.unknown){const t=this.jax.measureText(String.fromCodePoint(i),s);n=t.w,e=t.h,o=t.d}t.w+=n,e>t.h&&(t.h=e),o>t.d&&(t.d=o),t.ic=r.ic||0,t.sk=r.sk||0}e.length>1&&(t.sk=0),t.clean()}}remappedText(t,e){const s=this.parent.stretch.c;return s?[s]:this.parent.remapChars(this.unicodeChars(t,e))}getStyles(){}getVariant(){}getScale(){}getSpace(){}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.APPEND=MathJax._.util.Options.APPEND,e.REMOVE=MathJax._.util.Options.REMOVE,e.Expandable=MathJax._.util.Options.Expandable,e.expandable=MathJax._.util.Options.expandable,e.makeArray=MathJax._.util.Options.makeArray,e.keys=MathJax._.util.Options.keys,e.copy=MathJax._.util.Options.copy,e.insert=MathJax._.util.Options.insert,e.defaultOptions=MathJax._.util.Options.defaultOptions,e.userOptions=MathJax._.util.Options.userOptions,e.selectOptions=MathJax._.util.Options.selectOptions,e.selectOptionsFromKeys=MathJax._.util.Options.selectOptionsFromKeys,e.separateOptions=MathJax._.util.Options.separateOptions},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Styles=MathJax._.util.Styles.Styles},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractOutputJax=MathJax._.core.OutputJax.AbstractOutputJax},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.protoItem=MathJax._.core.MathItem.protoItem,e.AbstractMathItem=MathJax._.core.MathItem.AbstractMathItem,e.STATE=MathJax._.core.MathItem.STATE,e.newState=MathJax._.core.MathItem.newState},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CssStyles=MathJax._.util.StyleList.CssStyles},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractWrapperFactory=MathJax._.core.Tree.WrapperFactory.AbstractWrapperFactory},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractWrapper=MathJax._.core.Tree.Wrapper.AbstractWrapper},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMath=MathJax._.core.MmlTree.MmlNodes.math.MmlMath},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMi=MathJax._.core.MmlTree.MmlNodes.mi.MmlMi},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMo=MathJax._.core.MmlTree.MmlNodes.mo.MmlMo},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMn=MathJax._.core.MmlTree.MmlNodes.mn.MmlMn},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMs=MathJax._.core.MmlTree.MmlNodes.ms.MmlMs},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMtext=MathJax._.core.MmlTree.MmlNodes.mtext.MmlMtext},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMspace=MathJax._.core.MmlTree.MmlNodes.mspace.MmlMspace},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMpadded=MathJax._.core.MmlTree.MmlNodes.mpadded.MmlMpadded},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMenclose=MathJax._.core.MmlTree.MmlNodes.menclose.MmlMenclose},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMrow=MathJax._.core.MmlTree.MmlNodes.mrow.MmlMrow,e.MmlInferredMrow=MathJax._.core.MmlTree.MmlNodes.mrow.MmlInferredMrow},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMfenced=MathJax._.core.MmlTree.MmlNodes.mfenced.MmlMfenced},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMfrac=MathJax._.core.MmlTree.MmlNodes.mfrac.MmlMfrac},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMsqrt=MathJax._.core.MmlTree.MmlNodes.msqrt.MmlMsqrt},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMroot=MathJax._.core.MmlTree.MmlNodes.mroot.MmlMroot},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMsubsup=MathJax._.core.MmlTree.MmlNodes.msubsup.MmlMsubsup,e.MmlMsub=MathJax._.core.MmlTree.MmlNodes.msubsup.MmlMsub,e.MmlMsup=MathJax._.core.MmlTree.MmlNodes.msubsup.MmlMsup},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMunderover=MathJax._.core.MmlTree.MmlNodes.munderover.MmlMunderover,e.MmlMunder=MathJax._.core.MmlTree.MmlNodes.munderover.MmlMunder,e.MmlMover=MathJax._.core.MmlTree.MmlNodes.munderover.MmlMover},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMmultiscripts=MathJax._.core.MmlTree.MmlNodes.mmultiscripts.MmlMmultiscripts,e.MmlMprescripts=MathJax._.core.MmlTree.MmlNodes.mmultiscripts.MmlMprescripts,e.MmlNone=MathJax._.core.MmlTree.MmlNodes.mmultiscripts.MmlNone},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum=MathJax._.util.numeric.sum,e.max=MathJax._.util.numeric.max},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMtable=MathJax._.core.MmlTree.MmlNodes.mtable.MmlMtable},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMtr=MathJax._.core.MmlTree.MmlNodes.mtr.MmlMtr,e.MmlMlabeledtr=MathJax._.core.MmlTree.MmlNodes.mtr.MmlMlabeledtr},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMtd=MathJax._.core.MmlTree.MmlNodes.mtd.MmlMtd},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMaction=MathJax._.core.MmlTree.MmlNodes.maction.MmlMaction},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlMglyph=MathJax._.core.MmlTree.MmlNodes.mglyph.MmlMglyph},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MmlSemantics=MathJax._.core.MmlTree.MmlNodes.semantics.MmlSemantics,e.MmlAnnotationXML=MathJax._.core.MmlTree.MmlNodes.semantics.MmlAnnotationXML,e.MmlAnnotation=MathJax._.core.MmlTree.MmlNodes.semantics.MmlAnnotation},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TeXAtom=MathJax._.core.MmlTree.MmlNodes.TeXAtom.TeXAtom},function(t,e,s){"use strict";s.r(e),s.d(e,"TeXFont",(function(){return d}));var i=s(16);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=h(t);if(e){var o=h(this).constructor;s=Reflect.construct(i,arguments,o)}else s=i.apply(this,arguments);return l(this,s)}}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(s,t);var e=a(s);function s(){return n(this,s),e.apply(this,arguments)}return s}(i.FontData);d.OPTIONS={fontURL:"."}},function(t,e,s){"use strict";s.r(e);var i=s(14),o=s(15),n=s(16),r=s(40),a=s(0),l=s(18),h=s(20),d=s(64),c=s(66),m=s(59),u=s(22),p=s(38),x=s(42),g=s(44),f=s(60),b=s(24),M=s(52),y=s(28),C=s(26),j=s(36),T=s(47),w=s(41),S=s(30),v=s(34),L=s(11),B=s(7),H=s(54),_=s(57),k=s(32),N=s(56),O=s(51),A=s(49),P=s(62),D=s(4),W=s(6),R=s(17),I=s(21),E=s(19),F=s(65),J=s(67),V=s(13),z=s(23),X=s(39),K=s(43),q=s(45),U=s(61),Q=s(25),G=s(53),Y=s(29),Z=s(27),$=s(37),tt=s(48),et=s(10),st=s(31),it=s(35),ot=s(46),nt=s(8),rt=s(55),at=s(58),lt=s(33),ht=s(12),dt=s(9),ct=s(50),mt=s(63);Object(i.combineWithMathJax)({_:{output:{chtml_ts:o,chtml:{FontData:n,Notation:r,Wrapper:a,WrapperFactory:l,Wrappers_ts:h,Wrappers:{TeXAtom:d,TextNode:c,maction:m,math:u,menclose:p,mfenced:x,mfrac:g,mglyph:f,mi:b,mmultiscripts:M,mn:y,mo:C,mpadded:j,mroot:T,mrow:w,ms:S,mspace:v,msqrt:L,msubsup:B,mtable:H,mtd:_,mtext:k,mtr:N,munderover:O,scriptbase:A,semantics:P}},common:{FontData:D,Notation:W,OutputJax:R,Wrapper:I,WrapperFactory:E,Wrappers:{TeXAtom:F,TextNode:J,maction:V,math:z,menclose:X,mfenced:K,mfrac:q,mglyph:U,mi:Q,mmultiscripts:G,mn:Y,mo:Z,mpadded:$,mroot:tt,mrow:et,ms:st,mspace:it,msqrt:ot,msubsup:nt,mtable:rt,mtd:at,mtext:lt,mtr:ht,munderover:dt,scriptbase:ct,semantics:mt}}}}}),MathJax.loader&&Object(i.combineDefaults)(MathJax.config.loader,"output/chtml",{checkReady:function(){return MathJax.loader.load("output/chtml/fonts/tex")}}),MathJax.startup&&(MathJax.startup.registerConstructor("chtml",o.CHTML),MathJax.startup.useOutput("chtml"))}]);