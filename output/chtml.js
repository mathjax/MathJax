(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{DIRECTION:()=>Et,H:()=>It,V:()=>Ft});var s={};t.r(s),t.d(s,{DIRECTION:()=>Et,FontData:()=>Ut,NOSTRETCH:()=>Vt,mergeOptions:()=>zt});var i={};t.r(i),t.d(i,{LineBBox:()=>qt});var n={};t.r(n),t.d(n,{LinebreakVisitor:()=>Gt,Linebreaks:()=>Yt,NOBREAK:()=>Qt});var o={};t.r(o),t.d(o,{CommonWrapperFactory:()=>ce});var r={};t.r(r),t.d(r,{CommonWrapper:()=>ke,SPACE:()=>ye});var a={};t.r(a),t.d(a,{ChtmlWrapper:()=>Ce,FONTSIZE:()=>Be});var h={};t.r(h),t.d(h,{CommonMathMixin:()=>we});var l={};t.r(l),t.d(l,{ChtmlMath:()=>Me});var d={};t.r(d),t.d(d,{CommonMiMixin:()=>Se});var c={};t.r(c),t.d(c,{ChtmlMi:()=>Le});var m={};t.r(m),t.d(m,{CommonMoMixin:()=>Ne});var p={};t.r(p),t.d(p,{Usage:()=>Ae});var u={};t.r(u),t.d(u,{AddCSS:()=>Oe,ChtmlFontData:()=>De,DIRECTION:()=>Et,FontData:()=>Ut,NOSTRETCH:()=>Vt,mergeOptions:()=>zt});var g={};t.r(g),t.d(g,{ChtmlMo:()=>We});var f={};t.r(f),t.d(f,{CommonMnMixin:()=>Pe});var x={};t.r(x),t.d(x,{ChtmlMn:()=>He});var b={};t.r(b),t.d(b,{CommonMsMixin:()=>Ee});var y={};t.r(y),t.d(y,{ChtmlMs:()=>Ie});var k={};t.r(k),t.d(k,{CommonMtextMixin:()=>_e});var B={};t.r(B),t.d(B,{ChtmlMtext:()=>ze});var C={};t.r(C),t.d(C,{CommonMspaceMixin:()=>Ue});var w={};t.r(w),t.d(w,{ChtmlMspace:()=>$e});var v={};t.r(v),t.d(v,{CommonMpaddedMixin:()=>qe});var M={};t.r(M),t.d(M,{ChtmlMpadded:()=>Xe});var S={};t.r(S),t.d(S,{ARROWDX:()=>Ye,ARROWX:()=>Qe,ARROWY:()=>Ge,CommonArrow:()=>xs,CommonBorder:()=>ps,CommonBorder2:()=>us,CommonDiagonalArrow:()=>fs,CommonDiagonalStrike:()=>gs,PADDING:()=>ts,SOLID:()=>es,THICKNESS:()=>Ze,arrowBBox:()=>ms,arrowBBoxHD:()=>hs,arrowBBoxW:()=>ls,arrowDef:()=>ds,arrowHead:()=>as,diagonalArrowDef:()=>cs,fullBBox:()=>ns,fullBorder:()=>rs,fullPadding:()=>os,sideIndex:()=>ss,sideNames:()=>is});var j={};t.r(j),t.d(j,{CommonMencloseMixin:()=>bs});var L={};t.r(L),t.d(L,{ARROWDX:()=>Ye,ARROWX:()=>Qe,ARROWY:()=>Ge,Arrow:()=>Ms,Border:()=>Bs,Border2:()=>Cs,CommonArrow:()=>xs,CommonBorder:()=>ps,CommonBorder2:()=>us,CommonDiagonalArrow:()=>fs,CommonDiagonalStrike:()=>gs,DiagonalArrow:()=>vs,DiagonalStrike:()=>ws,PADDING:()=>ts,RenderElement:()=>ks,SOLID:()=>es,THICKNESS:()=>Ze,arrowBBox:()=>ms,arrowBBoxHD:()=>hs,arrowBBoxW:()=>ls,arrowDef:()=>ds,arrowHead:()=>as,diagonalArrowDef:()=>cs,fullBBox:()=>ns,fullBorder:()=>rs,fullPadding:()=>os,sideIndex:()=>ss,sideNames:()=>is});var N={};t.r(N),t.d(N,{ChtmlMenclose:()=>Ls});var T={};t.r(T),t.d(T,{CommonInferredMrowMixin:()=>Ts,CommonMrowMixin:()=>Ns});var A={};t.r(A),t.d(A,{ChtmlInferredMrow:()=>Ps,ChtmlMrow:()=>Ws});var D={};t.r(D),t.d(D,{CommonMfencedMixin:()=>Rs});var O={};t.r(O),t.d(O,{ChtmlMfenced:()=>Es});var W={};t.r(W),t.d(W,{CommonMfracMixin:()=>Fs});var P={};t.r(P),t.d(P,{ChtmlMfrac:()=>_s});var R={};t.r(R),t.d(R,{CommonMsqrtMixin:()=>Vs});var H={};t.r(H),t.d(H,{ChtmlMsqrt:()=>Us});var E={};t.r(E),t.d(E,{CommonMrootMixin:()=>Js});var F={};t.r(F),t.d(F,{ChtmlMroot:()=>qs});var I={};t.r(I),t.d(I,{CommonMsubMixin:()=>Ks,CommonMsubsupMixin:()=>Qs,CommonMsupMixin:()=>Xs});var _={};t.r(_),t.d(_,{CommonScriptbaseMixin:()=>Ys});var V={};t.r(V),t.d(V,{ChtmlScriptbase:()=>Gs});var z={};t.r(z),t.d(z,{ChtmlMsub:()=>ii,ChtmlMsubsup:()=>oi,ChtmlMsup:()=>ni});var U={};t.r(U),t.d(U,{CommonMoverMixin:()=>ai,CommonMunderMixin:()=>ri,CommonMunderoverMixin:()=>hi});var J={};t.r(J),t.d(J,{ChtmlMover:()=>ui,ChtmlMunder:()=>pi,ChtmlMunderover:()=>gi});var $={};t.r($),t.d($,{CommonMmultiscriptsMixin:()=>bi,NextScript:()=>fi,ScriptNames:()=>xi});var q={};t.r(q),t.d(q,{ChtmlMmultiscripts:()=>Bi});var K={};t.r(K),t.d(K,{BREAK_BELOW:()=>Mi,CommonMtableMixin:()=>Si});var X={};t.r(X),t.d(X,{ChtmlMtable:()=>Li});var Q={};t.r(Q),t.d(Q,{CommonMlabeledtrMixin:()=>Ti,CommonMtrMixin:()=>Ni});var Y={};t.r(Y),t.d(Y,{ChtmlMlabeledtr:()=>Pi,ChtmlMtr:()=>Wi});var G={};t.r(G),t.d(G,{CommonMtdMixin:()=>Ri});var Z={};t.r(Z),t.d(Z,{ChtmlMtd:()=>Ei});var tt={};t.r(tt),t.d(tt,{CommonMactionMixin:()=>Ii,TooltipData:()=>Fi});var et={};t.r(et),t.d(et,{ChtmlMaction:()=>Vi});var st={};t.r(st),t.d(st,{CommonMglyphMixin:()=>zi});var it={};t.r(it),t.d(it,{ChtmlMglyph:()=>Ji});var nt={};t.r(nt),t.d(nt,{CommonSemanticsMixin:()=>$i});var ot={};t.r(ot),t.d(ot,{CommonXmlNodeMixin:()=>qi});var rt={};t.r(rt),t.d(rt,{ChtmlAnnotation:()=>Zi,ChtmlAnnotationXML:()=>en,ChtmlSemantics:()=>Gi,ChtmlXmlNode:()=>sn});var at={};t.r(at),t.d(at,{CommonTeXAtomMixin:()=>nn});var ht={};t.r(ht),t.d(ht,{ChtmlTeXAtom:()=>rn});var lt={};t.r(lt),t.d(lt,{CommonTextNodeMixin:()=>an});var dt={};t.r(dt),t.d(dt,{ChtmlTextNode:()=>hn});var ct={};t.r(ct),t.d(ct,{ChtmlHtmlNode:()=>dn});var mt={};t.r(mt),t.d(mt,{ChtmlWrappers:()=>cn});var pt={};t.r(pt),t.d(pt,{ChtmlWrapperFactory:()=>mn});var ut={};t.r(ut),t.d(ut,{DefaultFont:()=>pn,fontName:()=>un});var gt={};t.r(gt),t.d(gt,{CHTML:()=>gn});var ft={};t.r(ft),t.d(ft,{AddFontIds:()=>fn});const xt=("undefined"!=typeof window?window:global).MathJax._.components.global,bt=(xt.GLOBAL,xt.isObject,xt.combineConfig,xt.combineDefaults),yt=xt.combineWithMathJax,kt=xt.MathJax,Bt=MathJax._.core.OutputJax.AbstractOutputJax,Ct=MathJax._.core.MathItem,wt=(Ct.protoItem,Ct.AbstractMathItem,Ct.STATE),vt=(Ct.newState,MathJax._.core.MmlTree.MmlNode),Mt=vt.TEXCLASS,St=vt.TEXCLASSNAMES,jt=(vt.MATHVARIANTS,vt.indentAttributes,vt.AbstractMmlNode,vt.AbstractMmlTokenNode,vt.AbstractMmlLayoutNode,vt.AbstractMmlBaseNode,vt.AbstractMmlEmptyNode,vt.TextNode),Lt=vt.XMLNode,Nt=MathJax._.util.Options,Tt=(Nt.isObject,Nt.APPEND,Nt.REMOVE,Nt.OPTIONS,Nt.Expandable,Nt.expandable,Nt.makeArray,Nt.keys,Nt.copy,Nt.insert,Nt.defaultOptions),At=Nt.userOptions,Dt=(Nt.selectOptions,Nt.selectOptionsFromKeys,Nt.separateOptions),Ot=Nt.lookup,Wt=MathJax._.util.AsyncLoad.asyncLoad,Pt=MathJax._.util.Retries,Rt=(Pt.handleRetriesFor,Pt.retryAfter),Ht=MathJax._.mathjax.mathjax,Et={None:"",Vertical:"v",Horizontal:"h"},Ft=Et.Vertical,It=Et.Horizontal;var _t=function(t,e,s,i){return new(s||(s=Promise))((function(n,o){function r(t){try{h(i.next(t))}catch(t){o(t)}}function a(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,a)}h((i=i.apply(t,e||[])).next())}))};const Vt={dir:Et.None};function zt(t,e,s){return s?Tt(t,{[e]:s})[e]:t[e]}class Ut{get CLASS(){return this.constructor}static charOptions(t,e){const s=t[e];if(!Array.isArray(s))throw Error(`Character data hasn't been loaded for 0x${e.toString(16).toUpperCase()}`);return 3===s.length&&(s[3]={}),s[3]}static defineDynamicFiles(t,e=""){const s={};return(t||[]).forEach((([t,i,n])=>{s[t]={extension:e,file:t,variants:i,delimiters:n||[],promise:null,failed:!1,setup:e=>{s[t].failed=!0}}})),s}static dynamicSetup(t,e,s,i={},n=null){const o=t?this.dynamicExtensions.get(t):null;(t?o.files:this.dynamicFiles)[e].setup=e=>{Object.keys(s).forEach((t=>e.defineChars(t,s[t]))),e.defineDelimiters(i),t&&this.adjustDelimiters(e.delimiters,Object.keys(i),o.sizeN,o.stretchN),n&&e.addDynamicFontCss(n)}}static adjustDelimiters(t,e,s,i){e.forEach((e=>{const n=t[parseInt(e)];"dir"in n&&(n.variants&&(n.variants=this.adjustArrayIndices(n.variants,s)),n.stretchv&&(n.stretchv=this.adjustArrayIndices(n.stretchv,i)))}))}static adjustArrayIndices(t,e){return t.map((t=>t<0?e-1-t:t))}static addExtension(t,e=""){const s={name:t.name,prefix:e,files:this.defineDynamicFiles(t.ranges,t.name),sizeN:this.defaultSizeVariants.length,stretchN:this.defaultStretchVariants.length,data:t};this.dynamicExtensions.set(t.name,s);for(const[e,s]of[["options","OPTIONS"],["variants","defaultVariants"],["variantSmp","VariantSmp"],["cssFonts","defaultCssFonts"],["accentMap","defaultAccentMap"],["moMap","defaultMoMap"],["mnMap","defaultMnMap"],["parameters","defaultParams"],["chars","defaultChars"],["sizeVariants","defaultSizeVariants"],["stretchVariants","defaultStretchVariants"]])zt(this,s,t[e]);t.delimiters&&(Object.assign(this.defaultDelimiters,t.delimiters),this.adjustDelimiters(this.defaultDelimiters,Object.keys(t.delimiters),s.sizeN,s.stretchN))}constructor(t=null){this.variant={},this.delimiters={},this.cssFontMap={},this.cssFontPrefix="",this.remapChars={},this.skewIcFactor=.75;let e=this.CLASS;this.options=At(Tt({},e.OPTIONS),t),this.params=Object.assign({},e.defaultParams),this.sizeVariants=[...e.defaultSizeVariants],this.stretchVariants=[...e.defaultStretchVariants],this.defineCssFonts(e.defaultCssFonts),this.cssFamilyPrefix=e.defaultCssFamilyPrefix,this.createVariants(e.defaultVariants),this.defineDelimiters(e.defaultDelimiters),Object.keys(e.defaultChars).forEach((t=>this.defineChars(t,e.defaultChars[t]))),this.defineRemap("accent",e.defaultAccentMap),this.defineRemap("mo",e.defaultMoMap),this.defineRemap("mn",e.defaultMnMap),this.defineDynamicCharacters(e.dynamicFiles),e.dynamicExtensions.forEach((t=>this.defineDynamicCharacters(t.files)))}setOptions(t){Tt(this.options,t)}addExtension(t,e=""){const s={name:t.name,prefix:e,files:this.CLASS.defineDynamicFiles(t.ranges,e),sizeN:this.sizeVariants.length,stretchN:this.stretchVariants.length,data:t};this.CLASS.dynamicExtensions.set(t.name,s),Tt(this.options,t.options||{}),Tt(this.params,t.parameters||{}),zt(this,"sizeVariants",t.sizeVariants),zt(this,"stretchVariants",t.stretchVariants),zt(this.constructor,"VariantSmp",t.variantSmp),this.defineCssFonts(zt({cssFonts:{}},"cssFonts",t.cssFonts)),this.createVariants(zt({variants:[]},"variants",t.variants)),t.delimiters&&(this.defineDelimiters(zt({delimiters:{}},"delimiters",t.delimiters)),this.CLASS.adjustDelimiters(this.delimiters,Object.keys(t.delimiters),s.sizeN,s.stretchN));for(const e of Object.keys(t.chars||{}))this.defineChars(e,t.chars[e]);return this.defineRemap("accent",t.accentMap),this.defineRemap("mo",t.moMap),this.defineRemap("mn",t.mnMap),t.ranges&&this.defineDynamicCharacters(s.files),[]}get styles(){return this._styles}set styles(t){this._styles=t}createVariant(t,e=null,s=null){let i={linked:[],chars:Object.create(e?this.variant[e].chars:{})};this.variant[s]&&(Object.assign(i.chars,this.variant[s].chars),this.variant[s].linked.push(i.chars),i.chars=Object.create(i.chars)),this.remapSmpChars(i.chars,t),this.variant[t]=i}remapSmpChars(t,e){const s=this.CLASS;let i=s.VariantSmp[e];if("string"==typeof i&&(i=s.VariantSmp[i]),!i)return;const n=s.SmpRemap,o=[null,null,s.SmpRemapGreekU,s.SmpRemapGreekL];for(const[e,r,a]of s.SmpRanges){const s=i[e];if(s){for(let e=r;e<=a;e++){if(930===e)continue;const i=s+e-r;t[e]=this.smpChar(n[i]||i)}if(o[e])for(const i of Object.keys(o[e]).map((t=>parseInt(t))))t[i]=this.smpChar(s+o[e][i])}}const r=i[5]||{};for(const e of Object.keys(r))t[e]=this.smpChar(i[5][e])}smpChar(t){return[,,,{smp:t}]}createVariants(t){for(const e of t)this.createVariant(e[0],e[1],e[2])}defineChars(t,e){const s=this.variant[t];Object.assign(s.chars,e);for(const t of s.linked)Object.assign(t,e)}defineCssFonts(t){Object.assign(this.cssFontMap,t);for(const e of Object.keys(t))"unknown"===this.cssFontMap[e][0]&&(this.cssFontMap[e][0]=this.options.unknownFamily)}defineDelimiters(t){Object.assign(this.delimiters,t)}defineRemap(t,e){e&&(this.remapChars.hasOwnProperty(t)||(this.remapChars[t]={}),Object.assign(this.remapChars[t],e))}defineDynamicCharacters(t){for(const e of Object.keys(t)){const s=t[e];for(const t of Object.keys(s.variants))this.defineChars(t,this.flattenRanges(s.variants[t],s));this.defineDelimiters(this.flattenRanges(s.delimiters,s))}}flattenRanges(t,e){const s={};for(const i of t)if(Array.isArray(i))for(let t=i[0];t<=i[1];t++)s[t]=e;else s[i]=e;return s}dynamicFileName(t){const e=t.extension?this.CLASS.dynamicExtensions.get(t.extension).prefix:this.options.dynamicPrefix;return t.file.match(/^(?:[\/\[]|[a-z]+:\/\/|[a-z]:)/i)?t.file:e+"/"+t.file.replace(/\.js$/,"")}loadDynamicFile(t){return _t(this,void 0,void 0,(function*(){return t.failed?Promise.reject(new Error(`dynamic file '${t.file}' failed to load`)):(t.promise||(t.promise=Wt(this.dynamicFileName(t)).catch((e=>{t.failed=!0,console.warn(e)}))),t.promise.then((()=>t.setup(this))))}))}loadDynamicFiles(){const t=this.CLASS.dynamicFiles,e=Object.keys(t).map((e=>this.loadDynamicFile(t[e])));for(const t of this.CLASS.dynamicExtensions.values())e.push(...Object.keys(t.files).map((e=>this.loadDynamicFile(t.files[e]))));return Promise.all(e)}loadDynamicFilesSync(){if(!Ht.asyncLoad)throw Error("MathJax(loadDynamicFilesSync): mathjax.asyncLoad must be specified and synchronous");const t=this.CLASS.dynamicFiles;Object.keys(t).forEach((e=>this.loadDynamicFileSync(t[e])));for(const t of this.CLASS.dynamicExtensions.values())Object.keys(t.files).forEach((e=>this.loadDynamicFileSync(t.files[e])))}loadDynamicFileSync(t){if(!t.promise){t.promise=Promise.resolve();try{Ht.asyncLoad(this.dynamicFileName(t))}catch(e){t.failed=!0,console.warn(e)}t.setup(this)}}addDynamicFontCss(t,e){}getDelimiter(t){const e=this.delimiters[t];return e&&!("dir"in e)?(this.delimiters[t]=null,Rt(this.loadDynamicFile(e)),null):e}getSizeVariant(t,e){const s=this.getDelimiter(t);return s&&s.variants&&(e=s.variants[e]),this.sizeVariants[e]}getStretchVariant(t,e){const s=this.getDelimiter(t);return this.stretchVariants[s.stretchv?s.stretchv[e]:0]}getStretchVariants(t){return[0,1,2,3].map((e=>this.getStretchVariant(t,e)))}getChar(t,e){const s=this.variant[t].chars[e];if(s&&!Array.isArray(s)){const i=this.variant[t];return delete i.chars[e],i.linked.forEach((t=>delete t[e])),Rt(this.loadDynamicFile(s)),null}return s}getVariant(t){return this.variant[t]}getCssFont(t){return this.cssFontMap[t]||["serif",!1,!1]}getFamily(t){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+t:t}getRemappedChar(t,e){return(this.remapChars[t]||{})[e]}}Ut.OPTIONS={unknownFamily:"serif",dynamicPrefix:"."},Ut.JAX="common",Ut.NAME="",Ut.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"],["-smallop","normal"],["-largeop","normal"],["-tex-calligraphic","italic"],["-tex-bold-calligraphic","bold-italic"],["-tex-oldstyle","normal"],["-tex-bold-oldstyle","bold"],["-tex-mathit","italic"],["-tex-variant","normal"]],Ut.defaultCssFonts={normal:["unknown",!1,!1],bold:["unknown",!1,!0],italic:["unknown",!0,!1],"bold-italic":["unknown",!0,!0],"double-struck":["unknown",!1,!0],fraktur:["unknown",!1,!1],"bold-fraktur":["unknown",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1],"-smallop":["unknown",!1,!1],"-largeop":["unknown",!1,!1],"-tex-calligraphic":["cursive",!0,!1],"-tex-bold-calligraphic":["cursive",!0,!0],"-tex-oldstyle":["unknown",!1,!1],"-tex-bold-oldstyle":["unknown",!1,!0],"-tex-mathit":["unknown",!0,!1],"-tex-variant":["unknown",!1,!1]},Ut.defaultCssFamilyPrefix="",Ut.VariantSmp={bold:[119808,119834,120488,120514,120782,{988:120778,989:120779}],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},Ut.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],Ut.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Ut.SmpRemapGreekU={8711:25,1012:17},Ut.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},Ut.defaultAccentMap={94:"\u02c6",126:"\u02dc",768:"\u02cb",769:"\u02ca",770:"\u02c6",771:"\u02dc",772:"\u02c9",774:"\u02d8",775:"\u02d9",776:"\xa8",778:"\u02da",780:"\u02c7",8594:"\u20d7"},Ut.defaultMoMap={45:"\u2212"},Ut.defaultMnMap={45:"\u2212"},Ut.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.06,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,rule_factor:1.25,min_rule_thickness:1.25,separation_factor:1.75,extra_ic:.033,extender_factor:.333},Ut.defaultDelimiters={},Ut.defaultChars={},Ut.defaultSizeVariants=[],Ut.defaultStretchVariants=[],Ut.dynamicFiles={},Ut.dynamicExtensions=new Map;const Jt=MathJax._.core.Tree.Visitor.AbstractVisitor,$t=MathJax._.util.BBox.BBox;class qt extends $t{static from(t,e,s=null){const i=new this;return Object.assign(i,t),i.lineLeading=e,s&&(i.indentData=s),i}constructor(t,e=null){super(t),this.indentData=null,this.isFirst=!1,this.originalL=this.L,e&&(this.start=e)}append(t){this.isFirst&&(t.originalL+=t.L,t.L=0),t.indentData&&(this.indentData=t.indentData),this.lineLeading=t.lineLeading,super.append(t),this.isFirst=t.isFirst}copy(){const t=qt.from(this,this.lineLeading);return t.indentData=this.indentData,t.lineLeading=this.lineLeading,t}getIndentData(t){let{indentalign:e,indentshift:s,indentalignfirst:i,indentshiftfirst:n,indentalignlast:o,indentshiftlast:r}=t.attributes.getAllAttributes();"indentalign"===i&&(i=t.attributes.getInherited("indentalign")),"indentshift"===n&&(n=t.attributes.getInherited("indentshift")),"indentalign"===o&&(o=e),"indentshift"===r&&(r=s),this.indentData=[[i,n],[e,s],[o,r]]}copyIndentData(t){return t.indentData.map((([t,e])=>[t,e]))}}const Kt=MathJax._.core.MmlTree.OperatorDictionary,Xt=(Kt.OPDEF,Kt.MO,Kt.RANGES,Kt.getRange,Kt.MMLSPACING,Kt.OPTABLE),Qt=1e6;class Yt extends Jt{breakToWidth(t,e){}}class Gt extends Yt{constructor(){super(...arguments),this.PENALTY={newline:t=>0,nobreak:t=>Qt,goodbreak:t=>t-200*this.state.depth,badbreak:t=>t+200*this.state.depth,auto:t=>t},this.FACTORS={depth:t=>t+800*this.state.depth,width:t=>t+Math.floor((this.state.width-this.state.w)/this.state.width*2500),tail:t=>t+Math.floor(this.state.width/Math.max(1e-4,this.state.mathLeft-this.state.w)*500),open:(t,e)=>{const s=e.node.prevClass;if(s===Mt.BIN||s===Mt.REL||s===Mt.OP)return t+5e3;const i=this.getPrevious(e);if(i&&("postfix"!==i.attributes.get("form")||"nobreak"===i.attributes.get("linebreak")))return t+5e3;const n=e.node.Parent;if((null==n?void 0:n.isKind("mmultiscripts"))&&e.node===this.getFirstToken(n)){if(!!n.childNodes.filter((t=>t.isKind("mprescripts"))).length)return Qt}return t-500},close:(t,e)=>{var s;const i=e.node.Parent;return!(null==i?void 0:i.isKind("msubsup"))||i.isKind("mmultiscripts")&&(null===(s=i.childNodes[1])||void 0===s?void 0:s.isKind("mprescripts"))||e.node!==this.getLastToken(i.childNodes[0])?t+500:Qt},space:(t,e)=>{const s=e;if(!s.canBreak)return Qt;const i=s.getBBox().w;return i<0?Qt:i<1?t:t-100*(i+4)},separator:t=>t+500,fuzz:t=>.99*t},this.TEXCLASS={[Mt.BIN]:t=>t-250,[Mt.REL]:t=>t-500}}breakToWidth(t,e){const s=this.state;this.state=this.createState(t),this.state.width=e;const i=t.breakCount;for(let s=0;s<=i;s++){(t.lineBBox[s]||t.getLineBBox(s)).w>e&&this.breakLineToWidth(t,s)}for(const[t,e]of this.state.breaks){if(null===e){const e=t.coreMO();e.setBreakStyle(e.node.attributes.get("linebreakstyle")||"before")}else t.setBreakAt(e);t.invalidateBBox()}this.state=s}createState(t){const e=t.getBBox().w;return{breaks:new Set,potential:[],width:0,w:0,prevWidth:0,prevBreak:null,depth:0,mathWidth:e,mathLeft:e}}breakLineToWidth(t,e){const s=this.state;s.potential=[],s.w=0,s.prevWidth=0,s.prevBreak=null,s.depth=0,this.visitNode(t,e)}addWidth(t,e=null){null===e&&(e=t.L+t.w+t.R),e&&(e*=t.rscale,this.state.w+=e,this.state.potential.length&&(this.state.potential[0][4]+=e),this.processBreak())}processBreak(){const t=this.state;for(;t.potential.length&&t.w>this.state.width;){const e=t.potential.pop(),[s,,i,n,o]=e;t.breaks.add(s),t.w=t.potential.reduce(((t,e)=>t+e[4]),n+o),t.prevBreak&&t.prevWidth+i<=t.width?(t.breaks.delete(t.prevBreak[0]),t.prevWidth+=i):t.prevWidth=i+n,t.potential.forEach((t=>t[2]-=i)),t.prevBreak=e,t.mathLeft-=i}}pushBreak(t,e,s,i){var n;const o=this.state;if(!(e>=Qt||0===o.w&&0===o.prevWidth)){for(;o.potential.length&&o.potential[0][1]>this.FACTORS.fuzz(e);){const t=o.potential.shift();o.potential.length&&(o.potential[0][4]+=t[4])}o.potential.unshift([[t,i],e,o.w-((null===(n=o.prevBreak)||void 0===n?void 0:n[3])||0),s,0])}}getBorderLR(t){var e;const s=t.styleData;if(!s)return[0,0];const i=(null===(e=null==s?void 0:s.border)||void 0===e?void 0:e.width)||[0,0,0,0],n=(null==s?void 0:s.padding)||[0,0,0,0];return[i[3]+n[3],i[1]+n[1]]}getFirstToken(t){return t.isToken?t:this.getFirstToken(t.childNodes[0])}getLastToken(t){return t.isToken?t:this.getLastToken(t.childNodes[t.childNodes.length-1])}visitNode(t,e){this.state.depth++,t.node.isEmbellished&&!t.node.isKind("mo")?this.visitEmbellishedOperator(t,e):super.visitNode(t,e),this.state.depth--}visitDefault(t,e){const s=t.getLineBBox(e);if(t.node.isToken||t.node.linebreakContainer)this.addWidth(s);else{const[i,n]=this.getBorderLR(t);0===e&&this.addWidth(s,s.L+i),this.visitNode(t.childNodes[0],e),e===t.breakCount&&this.addWidth(s,s.R+n)}}visitEmbellishedOperator(t,e){const s=t.coreMO(),i=qt.from(t.getOuterBBox(),t.linebreakOptions.lineleading);i.getIndentData(s.node);const n=s.getBreakStyle(s.node.attributes.get("linebreakstyle")),o=s.processIndent("",i.indentData[1][1],"",i.indentData[0][1],this.state.width)[1],r=this.moPenalty(s);if("before"===n)this.pushBreak(t,r,o-i.L,null),this.addWidth(i);else{this.addWidth(i);const e=("after"===n?0:s.multChar?s.multChar.getBBox().w:i.w)+o;this.pushBreak(t,r,e,null)}}visitMoNode(t,e){const s=t,i=qt.from(s.getOuterBBox(),s.linebreakOptions.lineleading);i.getIndentData(s.node);const n=s.getBreakStyle(s.node.attributes.get("linebreakstyle")),o=s.processIndent("",i.indentData[1][1],"",i.indentData[0][1],this.state.width)[1],r=this.moPenalty(s);if("before"===n)this.pushBreak(t,r,o-i.L,null),this.addWidth(i);else{this.addWidth(i);const e=("after"===n?0:s.multChar?s.multChar.getBBox().w:i.w)+o;this.pushBreak(t,r,e,null)}}moPenalty(t){const{linebreak:e,fence:s,form:i}=t.node.attributes.getList("linebreak","fence","form"),n=this.FACTORS;let o=n.tail(n.width(0));const r=s&&"prefix"===i||t.node.texClass===Mt.OPEN,a=s&&"postfix"===i||t.node.texClass===Mt.CLOSE;return r&&(o=n.open(o,t),this.state.depth++),a&&(o=n.close(o,t),this.state.depth--),o=(this.TEXCLASS[t.node.texClass]||(t=>t))(o),(this.PENALTY[e]||(t=>t))(n.depth(o))}getPrevious(t){let e=t.node,s=e.parent,i=s.childIndex(e);for(;s&&(s.notParent||s.isKind("mrow"))&&0===i;)e=s,s=e.parent,i=s.childIndex(e);if(!s||!i)return null;const n=s.childNodes[i-1];return n.isEmbellished?n.coreMO():null}visitMspaceNode(t,e){const s=t.getLineBBox(e),i=t;if(i.canBreak){const e=this.mspacePenalty(i);s.getIndentData(t.node);const n=t.processIndent("",s.indentData[1][1],"",s.indentData[0][1],this.state.width)[1];this.pushBreak(t,e,n-s.w,null)}this.addWidth(s)}mspacePenalty(t){const e=t.node.attributes.get("linebreak"),s=this.FACTORS;let i=s.space(s.tail(s.width(0)),t);return(this.PENALTY[e]||(t=>t))(s.depth(i))}visitMtextNode(t,e){if(!t.getText().match(/ /))return void this.visitDefault(t,e);const s=t;s.clearBreakPoints();const i=s.textWidth(" "),n=t.getBBox(),[o,r]=this.getBorderLR(t);this.addWidth(n,n.L+o);const a=s.childNodes;for(const e of a.keys()){const o=a[e];if(o.node.isKind("text")){const r=o.node.getText().split(/ /),a=r.pop();for(const o of r.keys())this.addWidth(n,s.textWidth(r[o])),this.pushBreak(t,this.mtextPenalty(),-i,[e,o+1]),this.addWidth(n,i);this.addWidth(n,s.textWidth(a))}else this.addWidth(o.getBBox())}this.addWidth(n,n.R+r)}mtextPenalty(){const t=this.FACTORS;return t.depth(t.tail(t.width(0)))}visitMrowNode(t,e){const s=t.lineBBox[e]||t.getLineBBox(e),[i,n]=s.start||[0,0],[o,r]=s.end||[t.childNodes.length-1,0],[a,h]=this.getBorderLR(t);this.addWidth(s,s.L+a);for(let e=i;e<=o;e++)this.visitNode(t.childNodes[e],e===i?n:e===o?r:0);this.addWidth(s,s.R+h)}visitInferredMrowNode(t,e){this.state.depth--,this.visitMrowNode(t,e),this.state.depth++}visitMfracNode(t,e){const s=t;!s.node.attributes.get("bevelled")&&s.getOuterBBox().w>this.state.width&&(this.breakToWidth(s.childNodes[0],this.state.width),this.breakToWidth(s.childNodes[1],this.state.width)),this.visitDefault(t,e)}visitMsqrtNode(t,e){if(t.getOuterBBox().w>this.state.width){const e=t,s=e.childNodes[e.base];this.breakToWidth(s,this.state.width-e.rootWidth()),e.getStretchedSurd()}this.visitDefault(t,e)}visitMrootNode(t,e){this.visitMsqrtNode(t,e)}visitMsubNode(t,e){this.visitDefault(t,e);const s=t,i=s.getOffset()[0],n=s.scriptChild.getOuterBBox(),[o,r]=this.getBorderLR(t);this.addWidth(s.getLineBBox(e),i+o+n.rscale*n.w+s.font.params.scriptspace+r)}visitMsupNode(t,e){this.visitDefault(t,e);const s=t,i=s.getOffset()[0],n=s.scriptChild.getOuterBBox(),[o,r]=this.getBorderLR(t);this.addWidth(s.getLineBBox(e),i+o+n.rscale*n.w+s.font.params.scriptspace+r)}visitMsubsupNode(t,e){this.visitDefault(t,e);const s=t,i=s.subChild.getOuterBBox(),n=s.supChild.getOuterBBox(),o=s.getAdjustedIc(),r=Math.max(i.rscale*i.w,o+n.rscale*n.w)+s.font.params.scriptspace,[a,h]=this.getBorderLR(t);this.addWidth(t.getLineBBox(e),a+r+h)}visitMmultiscriptsNode(t,e){const s=t,i=s.scriptData;if(i.numPrescripts){const n=Math.max(i.psup.rscale*i.psup.w,i.psub.rscale*i.psub.w);this.addWidth(t.getLineBBox(e),n+s.font.params.scriptspace)}if(this.visitDefault(t,e),i.numScripts){const n=Math.max(i.sup.rscale*i.sup.w,i.sub.rscale*i.sub.w);this.addWidth(t.getLineBBox(e),n+s.font.params.scriptspace)}}visitMfencedNode(t,e){const s=t,i=t.getLineBBox(e),[n,o]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+n),this.visitNode(s.mrow,e),e===t.breakCount&&this.addWidth(i,i.R+o)}visitMactionNode(t,e){const s=t,i=t.getLineBBox(e),[n,o]=this.getBorderLR(t);0===e&&this.addWidth(i,i.L+n),this.visitNode(s.selected,e),e===t.breakCount&&this.addWidth(i,i.R+o)}}!function(){for(const t of Object.keys(Xt.postfix)){const e=Xt.postfix[t][3];e&&e.fence&&(e.linebreakstyle="after")}Xt.infix["\u2061"]=[...Xt.infix["\u2061"]],Xt.infix["\u2061"][3]={linebreak:"nobreak"}}();const Zt=MathJax._.util.lengths,te=Zt.BIGDIMEN,ee=(Zt.UNITS,Zt.RELUNITS,Zt.MATHSPACE,Zt.length2em),se=Zt.percent,ie=Zt.em,ne=(Zt.emRounded,Zt.px),oe=MathJax._.util.Styles,re=oe.TRBL,ae=(oe.WSC,oe.Styles),he=MathJax._.util.StyleList.CssStyles;class le extends Bt{get forceInlineBreaks(){return!1}constructor(t={},e=null,s=null){const[i,n]=t.fontData instanceof Ut?[t.fontData.constructor,t.fontData]:[t.fontData||s,null],[o,r]=Dt(t,i.OPTIONS);super(o),this.factory=this.options.wrapperFactory||new e,this.factory.jax=this,this.cssStyles=this.options.cssStyles||new he,this.font=n||new i(r),this.font.setOptions({mathmlSpacing:this.options.mathmlSpacing}),this.unknownCache=new Map;const a=this.options.linebreaks.LinebreakVisitor||Gt;this.linebreaks=new a(this.factory)}setAdaptor(t){super.setAdaptor(t),"auto"===this.options.htmlHDW&&(this.options.htmlHDW=t.canMeasureNodes?"ignore":"force")}addExtension(t){const e=this.font.CLASS.dynamicExtensions.get(t);return this.font.addExtension(e.data)}typeset(t,e){this.setDocument(e);let s=this.createNode();return this.toDOM(t,s,e),s}createNode(){const t=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:t})}setScale(t,e){let s=this.getInitialScale()*this.options.scale;if("scale"===e.node.attributes.get("overflow")&&this.math.display){const t=e.getOuterBBox().w,i=this.math.metrics.containerWidth/this.pxPerEm;t>i&&t&&(s*=i/t)}1!==s&&this.adaptor.setStyle(t,"fontSize",se(s))}getInitialScale(){return this.math.metrics.scale}toDOM(t,e,s=null){var i;this.setDocument(s),this.math=t,this.container=e,this.pxPerEm=t.metrics.ex/this.font.params.x_height,this.nodeMap=new Map,t.root.attributes.getAllInherited().overflow=this.options.displayOverflow;const n=t.root.attributes.get("overflow");this.adaptor.setAttribute(e,"overflow",n);"linebreak"===n&&this.getLinebreakWidth(),!this.options.linebreaks.inline||t.display||t.outputData.inlineMarked||(this.markInlineBreaks(null===(i=t.root.childNodes)||void 0===i?void 0:i[0]),t.outputData.inlineMarked=!0),t.root.setTeXclass(null);const o=this.factory.wrap(t.root);this.setScale(e,o),this.processMath(o,e),this.nodeMap=null,this.executeFilters(this.postFilters,t,s,e)}getBBox(t,e){this.setDocument(e),this.math=t,t.root.setTeXclass(null),this.nodeMap=new Map;let s=this.factory.wrap(t.root).getOuterBBox();return this.nodeMap=null,s}getLinebreakWidth(){const t=this.math.metrics.containerWidth/this.pxPerEm,e=this.math.root.attributes.get("maxwidth")||this.options.linebreaks.width;this.containerWidth=ee(e,t,1,this.pxPerEm)}markInlineBreaks(t){if(!t)return;const e=this.forceInlineBreaks;let s=!1,i=!1,n="";for(const o of t.childNodes)if(n)i=this.markInlineBreak(i,e,n,t,o),n="",s=!1;else if(o.isEmbellished){if(o===t.childNodes[0])continue;const r=o.coreMO(),a=r.texClass,h=r.attributes.get("linebreak"),l=r.attributes.get("linebreakstyle");(a===Mt.BIN||a===Mt.REL||a===Mt.ORD&&r.hasSpacingAttributes()||"auto"!==h)&&"nobreak"!==h&&("before"===l?s&&"auto"===h||(i=this.markInlineBreak(i,e,h,t,o,r)):n=h),s="newline"===h&&"after"===l}else if(o.isKind("mspace")){const n=o.attributes.get("linebreak");"nobreak"!==n&&(i=this.markInlineBreak(i,e,n,t,o)),s="newline"===n}else s=!1,o.isKind("mstyle")&&!o.attributes.get("style")&&!o.attributes.hasExplicit("mathbackground")||o.isKind("semantics")?(this.markInlineBreaks(o.childNodes[0]),o.getProperty("process-breaks")&&(o.setProperty("inline-breaks",!0),o.childNodes[0].setProperty("inline-breaks",!0),t.parent.setProperty("process-breaks","true"))):o.isKind("mrow")&&o.attributes.get("data-semantic-added")&&(this.markInlineBreaks(o),o.getProperty("process-breaks")&&(o.setProperty("inline-breaks",!0),t.parent.setProperty("process-breaks","true")))}markInlineBreak(t,e,s,i,n,o=null){return n.setProperty("breakable",!0),e&&"newline"!==s?(n.setProperty("forcebreak",!0),null==o||o.setProperty("forcebreak",!0)):(n.removeProperty("forcebreak"),null==o||o.removeProperty("forcebreak"),"newline"===s&&n.setProperty("newline",!0)),t||(i.setProperty("process-breaks",!0),i.parent.setProperty("process-breaks",!0),t=!0),t}getMetrics(t){this.setDocument(t);const e=this.adaptor,s=this.getMetricMaps(t);for(const i of t.math){const t=e.parent(i.start.node);if(i.state()<wt.METRICS&&t){const e=s[i.display?1:0],{em:n,ex:o,containerWidth:r,scale:a,family:h}=e.get(t);i.setMetrics(n,o,r,a),this.options.mtextInheritFont&&(i.outputData.mtextFamily=h),this.options.merrorInheritFont&&(i.outputData.merrorFamily=h),i.state(wt.METRICS)}}}getMetricsFor(t,e){const s=this.options.mtextInheritFont||this.options.merrorInheritFont,i=this.getTestElement(t,e),n=this.measureMetrics(i,s);return this.adaptor.remove(i),n}getMetricMaps(t){const e=this.adaptor,s=[new Map,new Map];for(const i of t.math){const t=e.parent(i.start.node);if(t&&i.state()<wt.METRICS){const e=s[i.display?1:0];e.has(t)||e.set(t,this.getTestElement(t,i.display))}}const i=this.options.mtextInheritFont||this.options.merrorInheritFont,n=[new Map,new Map];for(const t of n.keys())for(const e of s[t].keys())n[t].set(e,this.measureMetrics(s[t].get(e),i));for(const t of n.keys())for(const i of s[t].values())e.remove(i);return n}getTestElement(t,e){const s=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=s.clone(this.testInline),s.setStyle(this.testDisplay,"display","table"),s.setStyle(this.testDisplay,"margin-right",""),s.setStyle(s.firstChild(this.testDisplay),"display","none");const t=s.lastChild(this.testDisplay);s.setStyle(t,"display","table-cell"),s.setStyle(t,"width","10000em"),s.setStyle(t,"float","")}return s.append(t,s.clone(e?this.testDisplay:this.testInline))}measureMetrics(t,e){const s=this.adaptor,i=e?s.fontFamily(t):"",n=s.fontSize(t),[o,r]=s.nodeSize(s.childNode(t,1)),a=o?r/60:n*this.options.exFactor;return{em:n,ex:a,containerWidth:o?"table"===s.getStyle(t,"display")?s.nodeSize(s.lastChild(t))[0]-1:s.nodeBBox(s.lastChild(t)).left-s.nodeBBox(s.firstChild(t)).left-2:1e6,scale:Math.max(this.options.minScale,this.options.matchFontHeight?a/this.font.params.x_height/n:1),family:i}}styleSheet(t){if(this.setDocument(t),this.cssStyles.clear(),this.cssStyles.addStyles(this.constructor.commonStyles),"getStyles"in t)for(const e of t.getStyles())this.cssStyles.addStyles(e);this.addWrapperStyles(this.cssStyles),this.addFontStyles(this.cssStyles);return this.html("style",{id:"MJX-styles"},[this.text("\n"+this.cssStyles.cssText+"\n")])}addFontStyles(t){t.addStyles(this.font.styles)}addWrapperStyles(t){for(const e of this.factory.getKinds())this.addClassStyles(this.factory.getNodeClass(e),t)}addClassStyles(t,e){t.addStyles(e,this)}setDocument(t){t&&(this.document=t,this.adaptor.document=t.document)}html(t,e={},s=[],i){return this.adaptor.node(t,e,s,i)}text(t){return this.adaptor.text(t)}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}measureText(t,e,s=["",!1,!1]){const i=this.unknownText(t,e);if("-explicitFont"===e){const t=this.cssFontStyles(s);this.adaptor.setAttributes(i,{style:t})}return this.measureTextNodeWithCache(i,t,e,s)}measureTextNodeWithCache(t,e,s,i=["",!1,!1]){"-explicitFont"===s&&(s=[i[0],i[1]?"T":"F",i[2]?"T":"F",""].join("-")),this.unknownCache.has(s)||this.unknownCache.set(s,new Map);const n=this.unknownCache.get(s),o=n.get(e);if(o)return o;const r=this.measureTextNode(t);return n.set(e,r),r}cssFontStyles(t,e={}){const[s,i,n]=t;return e["font-family"]=this.font.getFamily(s),i&&(e["font-style"]="italic"),n&&(e["font-weight"]="bold"),e}getFontData(t){return t||(t=new ae),[this.font.getFamily(t.get("font-family")),"italic"===t.get("font-style"),"bold"===t.get("font-weight")]}}le.NAME="Common",le.OPTIONS=Object.assign(Object.assign({},Bt.OPTIONS),{scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",displayOverflow:"overflow",linebreaks:{inline:!0,width:"100%",lineleading:.2,LinebreakVisitor:null},font:"",htmlHDW:"auto",wrapperFactory:null,fontData:null,fontPath:"@mathjax/%%FONT%%-font",cssStyles:null}),le.commonStyles={'mjx-container[overflow="scroll"][display]':{"overflow-x":"auto","min-width":"initial !important"},'mjx-container[overflow="truncate"][display]':{"overflow-x":"hidden","min-width":"initial !important"}};const de=MathJax._.core.Tree.WrapperFactory.AbstractWrapperFactory;class ce extends de{constructor(){super(...arguments),this.jax=null}get Wrappers(){return this.node}}ce.defaultNodes={};const me=MathJax._.core.Tree.Wrapper.AbstractWrapper,pe=MathJax._.util.string,ue=(pe.sortLength,pe.quotePattern,pe.unicodeChars),ge=(pe.unicodeString,pe.isPercent),fe=pe.split,xe=(pe.replaceUnicode,2/18);function be(t,e){return t?e<xe?0:xe:e}const ye={[ie(0)]:"0",[ie(2/18)]:"1",[ie(3/18)]:"2",[ie(4/18)]:"3",[ie(5/18)]:"4",[ie(6/18)]:"5"};class ke extends me{static addStyles(t,e){t.addStyles(this.styles)}get jax(){return this.factory.jax}get adaptor(){return this.factory.jax.adaptor}get metrics(){return this.factory.jax.math.metrics}get containerWidth(){return this.jax.containerWidth}get linebreaks(){return this.jax.linebreaks}get linebreakOptions(){return this.jax.options.linebreaks}get fixesPWidth(){return!this.node.notParent&&!this.node.isToken}get breakCount(){if(this._breakCount<0){const t=this.node;this._breakCount=t.isEmbellished?this.coreMO().embellishedBreakCount:t.arity<0&&!t.linebreakContainer&&this.childNodes[0].isStack?this.childNodes[0].breakCount:0}return this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent?t:this.parent.breakTop(t,this)}constructor(t,e,s=null){super(t,e),this.parent=null,this.dom=null,this.removedStyles=null,this.styles=null,this.styleData=null,this.variant="",this.bboxComputed=!1,this._breakCount=-1,this.lineBBox=[],this.stretch=Vt,this.font=null,this.parent=s,this.font=t.jax.font,this.bbox=$t.zero(),this.getStyles(),this.getStyleData(),this.getVariant(),this.getScale(),this.getSpace(),this.childNodes=e.childNodes.map((t=>{const s=this.wrap(t);return s.bbox.pwidth&&(e.notParent||e.isKind("math"))&&(this.bbox.pwidth=$t.fullWidth),s}))}wrap(t,e=null){const s=this.factory.wrap(t,e||this);return e&&e.childNodes.push(s),this.jax.nodeMap.set(t,s),s}getBBox(t=!0){if(this.bboxComputed)return this.bbox;const e=t?this.bbox:$t.zero();return this.computeBBox(e),this.bboxComputed=t,e}getOuterBBox(t=!0){var e;const s=this.getBBox(t);if(!this.styleData)return s;const i=this.styleData.padding,n=(null===(e=this.styleData.border)||void 0===e?void 0:e.width)||[0,0,0,0],o=s.copy();for(const[,t,e]of $t.boxSides)o[e]+=i[t]+n[t];return o}getUnbrokenHD(){const t=this.breakCount+1;let e=0,s=0;for(let i=0;i<t;i++){const{h:t,d:n}=this.getLineBBox(i);t>e&&(e=t),n>s&&(s=n)}return[e,s]}computeBBox(t,e=!1){t.empty();for(const e of this.childNodes)t.append(e.getOuterBBox());t.clean(),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0)}getLineBBox(t){if(!this.lineBBox[t]){const e=this.breakCount;if(e){const s=this.embellishedBBox(t)||this.computeLineBBox(t);this.lineBBox[t]=s,0===t&&(!this.node.isKind("mo")&&this.node.isEmbellished?s.originalL=this.getBBox().L:s.L=this.getBBox().L),t===e&&(s.R=this.getBBox().R)}else{const e=this.getOuterBBox();this.lineBBox[t]=qt.from(e,this.linebreakOptions.lineleading)}}return this.lineBBox[t]}embellishedBBox(t){if(!this.node.isEmbellished||this.node.isKind("mo"))return null;const e=this.coreMO();return e.moLineBBox(t,e.embellishedBreakStyle,this.getOuterBBox())}computeLineBBox(t){return this.getChildLineBBox(this.childNodes[0],t)}getBreakNode(t){var e,s;if(!t.start)return[this,null];const[i,n]=t.start;if(this.node.isEmbellished)return[this,this.coreMO()];const o=(null===(s=null===(e=this.childNodes[0])||void 0===e?void 0:e.node)||void 0===s?void 0:s.isInferred)?this.childNodes[0].childNodes:this.childNodes;return this.node.isToken||!o[i]?[this,null]:o[i].getBreakNode(o[i].getLineBBox(n))}getChildLineBBox(t,e){const s=this.breakCount;let i=t.getLineBBox(e);return(this.styleData||this.bbox.L||this.bbox.R)&&(i=i.copy()),this.addMiddleBorders(i),0===e?(i.L+=this.bbox.L,this.addLeftBorders(i)):e===s&&(i.R+=this.bbox.R,this.addRightBorders(i)),i}addLeftBorders(t){var e;if(!this.styleData)return;const s=this.styleData.border,i=this.styleData.padding;t.w+=((null===(e=null==s?void 0:s.width)||void 0===e?void 0:e[3])||0)+((null==i?void 0:i[3])||0)}addMiddleBorders(t){var e,s;if(!this.styleData)return;const i=this.styleData.border,n=this.styleData.padding;t.h+=((null===(e=null==i?void 0:i.width)||void 0===e?void 0:e[0])||0)+((null==n?void 0:n[0])||0),t.d+=((null===(s=null==i?void 0:i.width)||void 0===s?void 0:s[2])||0)+((null==n?void 0:n[2])||0)}addRightBorders(t){var e;if(!this.styleData)return;const s=this.styleData.border,i=this.styleData.padding;t.w+=((null===(e=null==s?void 0:s.width)||void 0===e?void 0:e[1])||0)+((null==i?void 0:i[1])||0)}setChildPWidths(t,e=null,s=!0){if(t)return!1;s&&(this.bbox.pwidth="");let i=!1;for(const n of this.childNodes){const o=n.getBBox();o.pwidth&&n.setChildPWidths(t,null===e?o.w:e,s)&&(i=!0)}return i}breakToWidth(t){}invalidateBBox(t=!0){(this.bboxComputed||this._breakCount>=0)&&(this.bboxComputed=!1,this.lineBBox=[],this._breakCount=-1,this.parent&&t&&this.parent.invalidateBBox())}copySkewIC(t){var e,s,i;const n=this.childNodes[0];(null===(e=null==n?void 0:n.bbox)||void 0===e?void 0:e.sk)&&(t.sk=n.bbox.sk),(null===(s=null==n?void 0:n.bbox)||void 0===s?void 0:s.dx)&&(t.dx=n.bbox.dx);const o=this.childNodes[this.childNodes.length-1];(null===(i=null==o?void 0:o.bbox)||void 0===i?void 0:i.ic)&&(t.ic=o.bbox.ic,t.w+=t.ic)}getStyles(){const t=this.node.attributes.getExplicit("style");if(!t)return;const e=this.styles=new ae(t);for(let t=0,s=ke.removeStyles.length;t<s;t++){const s=ke.removeStyles[t];e.get(s)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[s]=e.get(s),e.set(s,""))}}getStyleData(){if(!this.styles)return;const t=Array(4).fill(0),e=Array(4).fill(0),s=Array(4),i=Array(4);let n=!1,o=!1;for(const[r,a]of $t.boxSides){const h="border"+r,l=this.styles.get(h+"Width");l&&(o=!0,e[a]=Math.max(0,this.length2em(l,1)),s[a]=this.styles.get(h+"Style")||"solid",i[a]=this.styles.get(h+"Color"));const d=this.styles.get("padding"+r);d&&(n=!0,t[a]=Math.max(0,this.length2em(d,1)))}this.styleData=n||o?{padding:t,border:o?{width:e,style:s,color:i}:null}:null}getVariant(){if(!this.node.isToken)return;const t=this.node.attributes;let e=t.get("mathvariant");if(t.hasExplicit("mathvariant"))this.font.getVariant(e)||(console.warn(`Invalid variant: ${e}`),e="normal");else{const s=t.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){const t=this.removedStyles;t.fontFamily&&(s.family=t.fontFamily),t.fontWeight&&(s.weight=t.fontWeight),t.fontStyle&&(s.style=t.fontStyle)}s.fontfamily&&(s.family=s.fontfamily),s.fontweight&&(s.weight=s.fontweight),s.fontstyle&&(s.style=s.fontstyle),s.weight&&s.weight.match(/^\d+$/)&&(s.weight=parseInt(s.weight)>600?"bold":"normal"),s.family?e=this.explicitVariant(s.family,s.weight,s.style):(this.node.getProperty("variantForm")&&(e="-tex-variant"),e=(ke.BOLDVARIANTS[s.weight]||{})[e]||e,e=(ke.ITALICVARIANTS[s.style]||{})[e]||e)}this.variant=e}explicitVariant(t,e,s){let i=this.styles;return i||(i=this.styles=new ae),i.set("fontFamily",t),e&&i.set("fontWeight",e),s&&i.set("fontStyle",s),"-explicitFont"}getScale(){let t=1,e=this.parent,s=e?e.bbox.scale:1,i=this.node.attributes,n=Math.min(i.get("scriptlevel"),2),o=i.get("fontsize"),r=this.node.isToken||this.node.isKind("mstyle")?i.get("mathsize"):i.getInherited("mathsize");if(0!==n&&(t=Math.pow(i.get("scriptsizemultiplier"),n)),this.removedStyles&&this.removedStyles.fontSize&&!o&&(o=this.removedStyles.fontSize),o&&!i.hasExplicit("mathsize")&&(r=o),"1"!==r&&(t*=this.length2em(r,1,1)),0!==n){let e=this.length2em(i.get("scriptminsize"),.4,1);t<e&&(t=e)}this.bbox.scale=t,this.bbox.rscale=t/s}getSpace(){const t=this.isTopEmbellished(),e=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||e?t&&this.getMathMLSpacing():this.getTeXSpacing(t,e)}getMathMLSpacing(){const t=this.node.coreMO(),e=t.coreParent(),s=e.parent;if(!s||!s.isKind("mrow")||1===s.childNodes.length)return;const i=t.attributes,n=i.get("scriptlevel")>0;this.bbox.L=i.isSet("lspace")?Math.max(0,this.length2em(i.get("lspace"))):be(n,t.lspace),this.bbox.R=i.isSet("rspace")?Math.max(0,this.length2em(i.get("rspace"))):be(n,t.rspace);const o=s.childIndex(e);if(0===o)return;const r=s.childNodes[o-1];if(!r.isEmbellished)return;const a=this.jax.nodeMap.get(r).getBBox();a.R&&(this.bbox.L=Math.max(0,this.bbox.L-a.R))}getTeXSpacing(t,e){if(!e){const t=this.node.texSpacing();t&&(this.bbox.L=this.length2em(t))}if(t||e){const t=this.node.coreMO().attributes;t.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(t.get("lspace")))),t.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(t.get("rspace"))))}}isTopEmbellished(){return this.node.isEmbellished&&!(this.node.parent&&this.node.parent.isEmbellished)}core(){return this.jax.nodeMap.get(this.node.core())}coreMO(){return this.jax.nodeMap.get(this.node.coreMO())}coreRScale(){let t=this.bbox.rscale,e=this.coreMO();for(;e!==this&&e;)t*=e.bbox.rscale,e=e.parent;return t}getRScale(){let t=1,e=this;for(;e;)t*=e.bbox.rscale,e=e.parent;return t}getText(){let t="";if(this.node.isToken)for(const e of this.node.childNodes)e instanceof jt&&(t+=e.getText());return t}canStretch(t){if(this.stretch=Vt,this.node.isEmbellished){let e=this.core();e&&e.node!==this.node&&e.canStretch(t)&&(this.stretch=e.stretch)}return this.stretch.dir!==Et.None}getAlignShift(){let{indentalign:t,indentshift:e,indentalignfirst:s,indentshiftfirst:i}=this.node.attributes.getAllAttributes();return"indentalign"!==s&&(t=s),"indentshift"!==i&&(e=i),this.processIndent(t,e)}processIndent(t,e,s="",i="",n=this.metrics.containerWidth){if(!this.jax.math.display)return["left",0];s&&"auto"!==s||(s=this.jax.math.outputData.inlineMarked?"left":this.jax.options.displayAlign),i&&"auto"!==i||(i=this.jax.math.outputData.inlineMarked?"0":this.jax.options.displayIndent),"auto"===t&&(t=s),"auto"===e&&(e=i,"right"!==t||e.match(/^\s*0[a-z]*\s*$/)||(e=("-"+e.trim()).replace(/^--/,"")));return[t,this.length2em(e,n)]}getAlignX(t,e,s){return"right"===s?t-(e.w+e.R)*e.rscale:"left"===s?e.L*e.rscale:(t-e.w*e.rscale)/2}getAlignY(t,e,s,i,n){return"top"===n?t-s:"bottom"===n?i-e:"center"===n?(t-s-(e-i))/2:0}getWrapWidth(t){return this.childNodes[t].getBBox().w}getChildAlign(t){return"left"}percent(t){return se(t)}em(t){return ie(t)}px(t,e=-te){return ne(t,e,this.metrics.em)}length2em(t,e=1,s=null){null===s&&(s=this.bbox.scale);const i=this.font.params.rule_thickness,n=Ot(t,{medium:1,thin:2/3,thick:5/3},0);return n?n*i:ee(t,e,s,this.jax.pxPerEm)}unicodeChars(t,e=this.variant){let s=ue(t);const i=this.font.getVariant(e);if(i&&i.chars){const t=i.chars;s=s.map((e=>{var s,i;return(null===(i=null===(s=t[e])||void 0===s?void 0:s[3])||void 0===i?void 0:i.smp)||e}))}return s}remapChars(t){return t}mmlText(t){return this.node.factory.create("text").setText(t)}mmlNode(t,e={},s=[]){return this.node.factory.create(t,e,s)}createMo(t){const e=this.node.factory,s=e.create("text").setText(t),i=e.create("mo",{stretchy:!0},[s]);i.inheritAttributesFrom(this.node),i.parent=this.node.parent;const n=this.wrap(i);return n.parent=this,n}getVariantChar(t,e){const s=this.font.getChar(t,e)||[0,0,0,{unknown:!0}];return 3===s.length&&(s[3]={}),s}html(t,e={},s=[]){return this.jax.html(t,e,s)}}ke.kind="unknown",ke.styles={},ke.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],ke.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},ke.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},ke.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}};const Be={"70.7%":"s","70%":"s","50%":"ss","60%":"Tn","85%":"sm","120%":"lg","144%":"Lg","173%":"LG","207%":"hg","249%":"HG"};class Ce extends ke{toCHTML(t){this.toEmbellishedCHTML(t)||this.addChildren(this.standardChtmlNodes(t))}toEmbellishedCHTML(t){if(t.length<=1||!this.node.isEmbellished)return!1;const e=this.adaptor;t.forEach((t=>e.append(t,this.html("mjx-linestrut"))));const s=this.coreMO().embellishedBreakStyle,i=[];for(const[n,o]of[[t[0],"before"],[t[1],"after"]])s!==o?(this.toCHTML([n]),i.push(this.dom[0]),"after"===o&&e.removeAttribute(this.dom[0],"space")):i.push(this.createChtmlNodes([n])[0]);return this.dom=i,!0}addChildren(t){for(const e of this.childNodes)e.toCHTML(t)}standardChtmlNodes(t){this.markUsed();const e=this.createChtmlNodes(t);return this.handleStyles(),this.handleScale(),this.handleBorders(),this.handleColor(),this.handleSpace(),this.handleAttributes(),this.handlePWidth(),e}markUsed(){this.jax.wrapperUsage.add(this.kind)}createChtmlNodes(t){this.dom=t.map((t=>this.html("mjx-"+this.node.kind))),t=this.handleHref(t);for(const e of t.keys())this.adaptor.append(t[e],this.dom[e]);return this.dom}handleHref(t){const e=this.node.attributes.get("href");return e?t.map((t=>this.adaptor.append(t,this.html("a",{href:e})))):t}handleStyles(){if(!this.styles)return;const t=this.styles.cssText;if(t){const e=this.adaptor;this.dom.forEach((s=>e.setAttribute(s,"style",t)));const s=this.styles.get("font-family");s&&this.dom.forEach((t=>e.setStyle(t,"font-family",this.font.cssFamilyPrefix+", "+s)))}}handleScale(){this.dom.forEach((t=>this.setScale(t,this.bbox.rscale)))}setScale(t,e){const s=Math.abs(e-1)<.001?1:e;if(t&&1!==s){const e=this.percent(s);Be[e]?this.adaptor.setAttribute(t,"size",Be[e]):this.adaptor.setStyle(t,"fontSize",e)}return t}handleSpace(){const t=this.adaptor,e=!!this.node.getProperty("breakable")&&!this.node.getProperty("newline"),s=this.dom.length-1;for(const i of[[this.getLineBBox(0).L,"space","marginLeft",0],[this.getLineBBox(s).R,"rspace","marginRight",s]]){const[s,n,o,r]=i,a=this.em(s);if(e&&"space"===n){const e=t.node("mjx-break",ye[a]?{size:ye[a]}:{style:`letter-spacing: ${this.em(s-1)}`});t.insert(e,this.dom[r])}else s&&(ye[a]?t.setAttribute(this.dom[r],n,ye[a]):t.setStyle(this.dom[r],o,a))}}handleBorders(){var t,e;const s=null===(t=this.styleData)||void 0===t?void 0:t.border,i=null===(e=this.styleData)||void 0===e?void 0:e.padding,n=this.dom.length-1;if(!s||!n)return;const o=this.adaptor;for(const t of this.dom.keys()){const e=this.dom[t];t&&(s.width[3]&&o.setStyle(e,"border-left"," none"),i[3]&&o.setStyle(e,"padding-left","0")),t!==n&&(s.width[1]&&o.setStyle(e,"border-right","none"),i[1]&&o.setStyle(e,"padding-right","0"))}}handleColor(){var t;const e=this.adaptor,s=this.node.attributes,i=s.getExplicit("mathcolor")||s.getExplicit("color"),n=s.getExplicit("mathbackground")||s.getExplicit("background")||(null===(t=this.styles)||void 0===t?void 0:t.get("background-color"));i&&this.dom.forEach((t=>e.setStyle(t,"color",i))),n&&this.dom.forEach((t=>e.setStyle(t,"backgroundColor",n)))}handleAttributes(){const t=this.adaptor,e=this.node.attributes,s=e.getAllDefaults(),i=Ce.skipAttributes;for(const n of e.getExplicitNames())if(!1===i[n]||!(n in s)&&!i[n]&&!t.hasAttribute(this.dom[0],n)){const s=e.getExplicit(n);this.dom.forEach((e=>t.setAttribute(e,n,s)))}if(e.get("class")){const s=e.get("class").trim().split(/ +/);for(const e of s)this.dom.forEach((s=>t.addClass(s,e)))}this.node.getProperty("inline-breaks")&&this.dom.forEach((e=>t.setAttribute(e,"inline-breaks","true")))}handlePWidth(){if(this.bbox.pwidth){const t=this.adaptor;this.bbox.pwidth===$t.fullWidth?this.dom.forEach((e=>t.setAttribute(e,"width","full"))):this.dom.forEach((e=>t.setStyle(e,"width",this.bbox.pwidth)))}}setIndent(t,e,s){const i=this.adaptor;if("center"===e||"left"===e){const e=this.getBBox().L;i.setStyle(t,"margin-left",this.em(s+e))}if("center"===e||"right"===e){const e=this.getBBox().R;i.setStyle(t,"margin-right",this.em(-s+e))}}drawBBox(){let{w:t,h:e,d:s,R:i}=this.getOuterBBox();const n=this.html("mjx-box",{style:{opacity:.25,"margin-left":this.em(-t-i)}},[this.html("mjx-box",{style:{height:this.em(e),width:this.em(t),"background-color":"red"}}),this.html("mjx-box",{style:{height:this.em(s),width:this.em(t),"margin-left":this.em(-t),"vertical-align":this.em(-s),"background-color":"green"}})]),o=this.dom[0]||this.parent.dom[0],r=this.adaptor.getAttribute(o,"size");r&&this.adaptor.setAttribute(n,"size",r);const a=this.adaptor.getStyle(o,"fontSize");a&&this.adaptor.setStyle(n,"fontSize",a),this.adaptor.append(this.adaptor.parent(o),n),this.adaptor.setStyle(o,"backgroundColor","#FFEE00")}html(t,e={},s=[]){return this.jax.html(t,e,s)}text(t){return this.jax.text(t)}char(t){return this.font.charSelector(t).substring(1)}}function we(t){return class extends t{getWrapWidth(t){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm}computeBBox(t,e=!1){super.computeBBox(t,e);const s=this.node.attributes;if(!this.parent&&this.jax.math.display&&"linebreak"===s.get("overflow")){const e=this.containerWidth;t.w>e&&this.childNodes[0].breakToWidth(e),t.updateFrom(this.childNodes[0].getBBox())}}}}Ce.kind="unknown",Ce.autoStyle=!0;const ve=MathJax._.core.MmlTree.MmlNodes.math.MmlMath,Me=function(){var t;const e=we(Ce);return(t=class extends e{handleDisplay(t){const e=this.adaptor,[s,i]=this.getAlignShift();if("center"!==s&&e.setAttribute(t,"justify",s),this.bbox.pwidth===$t.fullWidth){if(e.setAttribute(t,"width","full"),this.jax.table){let{L:n,w:o,R:r}=this.jax.table.getOuterBBox();"right"===s?r=Math.max(r||-i,-i):"left"===s?n=Math.max(n||i,i):"center"===s&&(o+=2*Math.abs(i));const a=this.em(Math.max(0,n+o+r));e.setStyle(t,"min-width",a),e.setStyle(this.jax.table.dom[0],"min-width",a)}}else this.setIndent(this.dom[0],s,i)}handleInline(t){const e=this.adaptor,s=e.getStyle(this.dom[0],"margin-right");s&&(e.setStyle(this.dom[0],"margin-right",""),e.setStyle(t,"margin-right",s),e.setStyle(t,"width","0"))}toCHTML(t){super.toCHTML(t);const e=this.adaptor;"block"===this.node.attributes.get("display")?(e.setAttribute(this.dom[0],"display","true"),e.setAttribute(t[0],"display","true"),this.handleDisplay(t[0])):this.handleInline(t[0]),e.addClass(this.dom[0],`${this.font.cssFontPrefix}-N`)}setChildPWidths(t,e=null,s=!0){return!!this.parent&&super.setChildPWidths(t,e,s)}handleAttributes(){super.handleAttributes();const t=this.adaptor;this.node.getProperty("process-breaks")&&this.dom.forEach((e=>t.setAttribute(e,"breakable","true")))}}).kind=ve.prototype.kind,t.styles={"mjx-math":{"line-height":0,"text-align":"left","text-indent":0,"font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","letter-spacing":"normal","word-wrap":"normal","word-spacing":"normal",direction:"ltr",padding:"1px 0"},'mjx-container[jax="CHTML"][display="true"]':{display:"block","text-align":"center","justify-content":"center",margin:"1em 0"},'mjx-container[jax="CHTML"][display="true"][width="full"]':{display:"flex"},'mjx-container[jax="CHTML"][display="true"] mjx-math':{padding:0},'mjx-container[jax="CHTML"][justify="left"]':{"text-align":"left","justify-content":"left"},'mjx-container[jax="CHTML"][justify="right"]':{"text-align":"right","justify-content":"right"},'mjx-container[jax="CHTML"] mjx-break::after':{content:'" "',"white-space":"normal","font-family":"MJX-BRK"},'mjx-break[size="0"]':{"letter-spacing":"-0.999em"},'mjx-break[size="1"]':{"letter-spacing":"-0.889em"},'mjx-break[size="2"]':{"letter-spacing":"-0.833em"},'mjx-break[size="3"]':{"letter-spacing":"-0.778em"},'mjx-break[size="4"]':{"letter-spacing":"-0.722em"},'mjx-break[size="5"]':{"letter-spacing":"-0.667em"},"mjx-math[breakable]":{display:"inline"}},t}();function Se(t){return class extends t{computeBBox(t,e=!1){super.computeBBox(t),this.copySkewIC(t)}}}const je=MathJax._.core.MmlTree.MmlNodes.mi.MmlMi,Le=function(){var t;const e=Se(Ce);return(t=class extends e{}).kind=je.prototype.kind,t}();function Ne(t){return class extends t{get breakCount(){return this.breakStyle?1:0}get embellishedBreakCount(){return this.embellishedBreakStyle?1:0}get embellishedBreakStyle(){return this.breakStyle||this.getBreakStyle()}protoBBox(t){const e=this.stretch.dir!==Et.None;e&&null===this.size&&this.getStretchedVariant([0]),e&&this.size<0||(super.computeBBox(t),0!==t.w||!this.node.attributes.hasExplicit("fence")||""!==this.node.getText()||this.node.texClass!==Mt.OPEN&&this.node.texClass!==Mt.CLOSE||this.jax.options.mathmlSpacing||(t.R=this.font.params.nulldelimiterspace),this.copySkewIC(t))}getAccentOffset(){const t=$t.empty();return this.protoBBox(t),-t.w/2}getCenterOffset(t=null){return t||(t=$t.empty(),super.computeBBox(t)),(t.h+t.d)/2+this.font.params.axis_height-t.h}getStretchedVariant(t,e=!1){if(this.stretch.dir!==Et.None){let s=this.getWH(t);const i=this.getSize("minsize",0),n=this.getSize("maxsize",1/0),o=this.node.getProperty("mathaccent");s=Math.max(i,Math.min(n,s));const r=this.font.params.delimiterfactor/1e3,a=this.font.params.delimitershortfall,h=i||e?s:o?Math.min(s/r,s+a):Math.max(s*r,s-a),l=this.stretch,d=l.c||this.getText().codePointAt(0);let c=0;if(l.sizes)for(const t of l.sizes){if(t>=h)return o&&c&&c--,void this.setDelimSize(d,c);c++}l.stretch?(this.size=-1,this.invalidateBBox(),this.getStretchBBox(t,this.checkExtendedHeight(s,l),l)):this.setDelimSize(d,c-1)}}setDelimSize(t,e){const s=this.stretch;this.variant=this.font.getSizeVariant(t,e),this.size=e;const i=s.schar&&s.schar[Math.min(e,s.schar.length-1)]||t;this.stretch=Object.assign(Object.assign({},s),{c:i}),this.childNodes[0].invalidateBBox()}getSize(t,e){let s=this.node.attributes;return s.isSet(t)&&(e=this.length2em(s.get(t),1,1)),e}getWH(t){if(0===t.length)return 0;if(1===t.length)return t[0];let[e,s]=t;const i=this.font.params.axis_height;return this.node.attributes.get("symmetric")?2*Math.max(e-i,s+i):e+s}getStretchBBox(t,e,s){s.hasOwnProperty("min")&&s.min>e&&(e=s.min);let[i,n,o]=s.HDW;if(this.stretch.dir===Et.Vertical)[i,n]=this.getBaseline(t,e,s);else if(o=e,this.stretch.hd&&!this.jax.options.mathmlSpacing){const t=this.font.params.extender_factor;i=i*(1-t)+this.stretch.hd[0]*t,n=n*(1-t)+this.stretch.hd[1]*t}this.bbox.h=i,this.bbox.d=n,this.bbox.w=o}getBaseline(t,e,s){const i=2===t.length&&t[0]+t[1]===e,n=this.node.attributes.get("symmetric"),[o,r]=i?t:[e,0];let[a,h]=[o+r,0];if(n){const t=this.font.params.axis_height;i&&(a=2*Math.max(o-t,r+t)),h=a/2-t}else if(i)h=r;else{let[t,e]=s.HDW||[.75,.25];h=e*(a/(t+e))}return[a-h,h]}checkExtendedHeight(t,e){if(e.fullExt){const[s,i]=e.fullExt;t=i+Math.ceil(Math.max(0,t-i)/s)*s}return t}setBreakStyle(t=""){if(this.breakStyle=this.node.parent.isEmbellished&&!t?"":this.getBreakStyle(t),this.breakCount&&this.multChar){const t=this.parent.node.childIndex(this.node),e=this.parent.node.childNodes[t+1];e&&e.setTeXclass(this.multChar.node)}}getBreakStyle(t=""){const e=this.node.attributes;let s=t||("newline"===e.get("linebreak")||this.node.getProperty("forcebreak")?e.get("linebreakstyle"):"");return"infixlinebreakstyle"===s&&(s=e.get(s)),s}getMultChar(){const t=this.node.attributes.get("linebreakmultchar");t&&"\u2062"===this.getText()&&"\u2062"!==t&&(this.multChar=this.createMo(t))}constructor(t,e,s=null){super(t,e,s),this.size=null,this.isAccent=this.node.isAccent,this.getMultChar(),this.setBreakStyle()}computeBBox(t,e=!1){if(this.protoBBox(t),this.node.attributes.get("symmetric")&&this.stretch.dir!==Et.Horizontal){const e=this.getCenterOffset(t);t.h+=e,t.d-=e}this.node.getProperty("mathaccent")&&(this.stretch.dir===Et.None||this.size>=0)&&(t.w=0)}computeLineBBox(t){return this.moLineBBox(t,this.breakStyle)}moLineBBox(t,e,s=null){const i=this.node.attributes.get("lineleading"),n=this.length2em(i,this.linebreakOptions.lineleading);if(0===t&&"before"===e){const t=qt.from($t.zero(),n);return t.originalL=this.bbox.L,this.bbox.L=0,t}let o=qt.from(s||this.getOuterBBox(),n);return 1===t&&("after"===e?(o.w=o.h=o.d=0,o.isFirst=!0,this.bbox.R=0):"duplicate"===e?o.L=0:this.multChar&&(o=qt.from(this.multChar.getOuterBBox(),n)),o.getIndentData(this.node)),o}canStretch(t){if(this.stretch.dir!==Et.None)return this.stretch.dir===t;if(!this.node.attributes.get("stretchy"))return!1;const e=this.getText();if(1!==Array.from(e).length)return!1;const s=this.font.getDelimiter(e.codePointAt(0));return this.stretch=s&&s.dir===t?s:Vt,this.stretch.dir!==Et.None}getVariant(){this.node.attributes.get("largeop")?this.variant=this.node.attributes.get("displaystyle")?"-largeop":"-smallop":this.node.attributes.hasExplicit("mathvariant")||!1!==this.node.getProperty("pseudoscript")?super.getVariant():this.variant="-tex-variant"}remapChars(t){const e=this.node.getProperty("primes");if(e)return ue(e);if(1===t.length){const e=this.node.coreParent().parent,s=this.isAccent&&!e.isKind("mrow")?"accent":"mo",i=this.font.getRemappedChar(s,t[0]);i&&(t=this.unicodeChars(i,this.variant))}return t}}}const Te=MathJax._.core.MmlTree.MmlNodes.mo.MmlMo;class Ae{constructor(){this.used=new Set,this.needsUpdate=[]}add(t){const e=JSON.stringify(t);this.used.has(e)||this.needsUpdate.push(t),this.used.add(e)}has(t){return this.used.has(JSON.stringify(t))}clear(){this.used.clear(),this.needsUpdate=[]}update(){const t=this.needsUpdate;return this.needsUpdate=[],t}}class De extends Ut{constructor(){super(...arguments),this.charUsage=new Ae,this.delimUsage=new Ae,this.fontUsage={},this.newFonts=0}static charOptions(t,e){return super.charOptions(t,e)}static addFontURLs(t,e,s){for(const i of Object.keys(e)){const n=Object.assign({},e[i]);n.src=n.src.replace(/%%URL%%/,s),t[i]=n}}static addDynamicFontCss(t,e,s){const i={};for(const s of e){const e=s.slice(4);i[`@font-face /* ${e} */`]={"font-family":s,src:`url("%%URL%%/${s.toLowerCase()}.woff") format("woff")`},t[`.${e}`]={"font-family":`${this.defaultCssFamilyPrefix}, ${s}`}}this.addFontURLs(t,i,s)}static addExtension(t,e=""){super.addExtension(t,e),t.fonts&&this.addDynamicFontCss(this.defaultStyles,t.fonts,t.fontURL)}addExtension(t,e=""){if(super.addExtension(t,e),!t.fonts||!this.options.adaptiveCSS)return[];const s={},i=new he;return this.constructor.addDynamicFontCss(s,t.fonts,t.fontURL),i.addStyles(s),i.getStyleRules()}adaptiveCSS(t){this.options.adaptiveCSS=t}clearCache(){this.options.adaptiveCSS&&(this.charUsage.clear(),this.delimUsage.clear())}createVariant(t,e=null,s=null){super.createVariant(t,e,s),this.variant[t].letter=this.constructor.defaultVariantLetters[t]}defineChars(t,e){super.defineChars(t,e);const s=this.variant[t].letter,i=this.constructor;for(const t of Object.keys(e)){const n=parseInt(t);if(!Array.isArray(e[n]))continue;const o=i.charOptions(e,n);void 0===o.f&&(o.f=s);for(const[t,e]of i.combiningChars)if(n>=t&&n<=e){o.cmb=!0;break}}}addDynamicFontCss(t,e=this.options.fontURL){this.constructor.addDynamicFontCss(this.fontUsage,t,e)}updateDynamicStyles(){const t=this.fontUsage;return this.fontUsage={},!this.options.adaptiveCSS&&this.updateStyles(t),t}get styles(){const t=this.constructor,e=Object.assign(Object.assign({},t.defaultStyles),this.fontUsage);return this.fontUsage={},t.addFontURLs(e,t.defaultFonts,this.options.fontURL),this.options.adaptiveCSS?this.updateStyles(e):this.allStyles(e),e}updateStyles(t){for(const e of this.delimUsage.update())this.addDelimiterStyles(t,e,this.getDelimiter(e));for(const[e,s]of this.charUsage.update()){const i=this.variant[e];this.addCharStyles(t,i.letter,s,i.chars[s])}return t}allStyles(t){var e;for(const e of Object.keys(this.delimiters)){const s=parseInt(e);this.addDelimiterStyles(t,s,this.delimiters[s])}for(const s of Object.keys(this.variant)){const i=this.variant[s],n=i.letter;for(const s of Object.keys(i.chars)){const o=parseInt(s),r=i.chars[o];!(null===(e=null==r?void 0:r[3])||void 0===e?void 0:e.smp)&&Array.isArray(r)&&(r.length<4&&(r[3]={}),this.addCharStyles(t,n,o,r))}}}addDelimiterStyles(t,e,s){if(!s.stretch)return;const i=s.c&&s.c!==e?this.charSelector(s.c):this.charSelector(e);s.dir===Et.Vertical?this.addDelimiterVStyles(t,e,i,s):this.addDelimiterHStyles(t,e,i,s)}addDelimiterVStyles(t,e,s,i){const n=i.HDW,[o,r,a,h]=i.stretch,[l,d,c,m]=this.getStretchVariants(e),p=this.addDelimiterVPart(t,s,"beg",o,l,n);this.addDelimiterVPart(t,s,"ext",r,d,n);const u=this.addDelimiterVPart(t,s,"end",a,c,n);if(h){const e=this.addDelimiterVPart(t,s,"mid",h,m,n),i=this.em(e/2-.03);t[`mjx-stretchy-v${s} > mjx-ext:first-of-type`]={height:"50%","border-width":`${this.em0(p-.03)} 0 ${i}`},t[`mjx-stretchy-v${s} > mjx-ext:last-of-type`]={height:"50%","border-width":`${i} 0 ${this.em0(u-.03)}`}}else(u||p)&&(t["mjx-stretchy-v"+s+" > mjx-ext"]={"border-width":`${this.em0(p-.03)} 0 ${this.em0(u-.03)}`})}addDelimiterVPart(t,e,s,i,n,o){if(!i)return 0;const[r,a,h]=this.getChar(n,i),l={width:this.em0(h)};if("ext"!==s){h>o[2]&&(l.margin=`0 ${this.em((o[2]-h)/2)}`);const t="beg"===s?r:"end"===s?-a:(r-a)/2;t>0?l["padding-top"]=this.em(t):t<0&&(l.transform=`translateY(${this.em(t)})`)}else{const t=r-(r+a)/5;l.transform=`translateY(${this.em(t)}) scaleY(500)`,l["transform-origin"]=`center ${this.em(.03-t)}`}return t[`mjx-stretchy-v${e} mjx-${s} mjx-c`]=l,r+a}addDelimiterHStyles(t,e,s,i){const n=[...i.HDW],[o,r,a,h]=i.stretch,[l,d,c,m]=this.getStretchVariants(e);if(i.hd&&!this.options.mathmlSpacing){const t=this.params.extender_factor;n[0]=n[0]*(1-t)+i.hd[0]*t,n[1]=n[1]*(1-t)+i.hd[1]*t}const p=this.addDelimiterHPart(t,s,"beg",o,l,n);this.addDelimiterHPart(t,s,"ext",r,d,n);const u=this.addDelimiterHPart(t,s,"end",a,c,n);if(h){const e=this.addDelimiterHPart(t,s,"mid",h,m,n),i=this.em0(e/2-.03);t[`mjx-stretchy-h${s} > mjx-ext:first-of-type`]={width:"50%","border-width":`0 ${i} 0 ${this.em0(p-.03)}`},t[`mjx-stretchy-h${s} > mjx-ext:last-of-type`]={width:"50%","border-width":`0 ${this.em0(u-.03)} 0 ${i}`}}else(p||u)&&(t[`mjx-stretchy-h${s} > mjx-ext`]={"border-width":`0 ${this.em0(u-.03)} 0 ${this.em0(p-.03)}`})}addDelimiterHPart(t,e,s,i,n,o){if(!i)return 0;const[,,r,a]=this.getChar(n,i),h={padding:this.padding(o,r-o[2])};return"end"===s?h["margin-left"]=this.em(-r):"mid"===s&&(h["margin-left"]=this.em(-r/2)),this.checkCombiningChar(a,h),t[`mjx-stretchy-h${e} mjx-${s} mjx-c`]=h,r}addCharStyles(t,e,s,i){const n=i[3],o=void 0!==n.f?n.f:e,r=n.ff||(o?`${this.cssFontPrefix}-${o}`:""),a="mjx-c"+this.charSelector(s)+(r?"."+r:""),h=n.oc||n.ic||0;t[a]={padding:this.padding(i,h)},n.oc&&(t[a+"[noic]"]={"padding-right":this.em(i[2])}),this.checkCombiningChar(n,t[a])}checkCombiningChar(t,e){if(!t.cmb)return;const s=e.padding.split(/ /);e.width=s[1],s[1]="0",s[3]||s.pop(),e.padding=s.join(" ")}em(t){return ie(t)}em0(t){return ie(Math.max(0,t))}padding([t,e,s],i=0){return[t,s+i,e,0].map(this.em0).join(" ")}charSelector(t){return".mjx-c"+t.toString(16).toUpperCase()}}function Oe(t,e){for(const s of Object.keys(e)){const i=parseInt(s),n=e[i];n.c&&(n.c=n.c.replace(/\\[0-9A-F]+/gi,(t=>String.fromCodePoint(parseInt(t.substring(1),16))))),Object.assign(Ut.charOptions(t,i),n)}return t}De.OPTIONS=Object.assign(Object.assign({},Ut.OPTIONS),{dynamicPrefix:"./output/chtml/fonts",fontURL:"js/output/chtml/fonts/woff"}),De.JAX="CHTML",De.defaultVariantLetters={},De.defaultStyles={},De.defaultFonts={},De.combiningChars=[[768,879],[8400,8447]];const We=function(){var t;const e=Ne(Ce);return(t=class extends e{toCHTML(t){const e=this.adaptor,s=this.node.attributes,i=s.get("symmetric")&&this.stretch.dir!==Et.Horizontal,n=this.stretch.dir!==Et.None;n&&null===this.size&&this.getStretchedVariant([]),t.length>1&&t.forEach((t=>e.append(t,this.html("mjx-linestrut"))));let o=this.standardChtmlNodes(t);if(o.length>1&&"duplicate"!==this.breakStyle){const t="after"===this.breakStyle?1:0;e.remove(o[t]),o[t]=null}if(n&&this.size<0)this.stretchHTML(o);else{if(i||s.get("largeop")){const t=this.em(this.getCenterOffset());"0"!==t&&o.forEach((s=>s&&e.setStyle(s,"verticalAlign",t)))}this.node.getProperty("mathaccent")&&o.forEach((t=>{e.setStyle(t,"width","0"),e.setStyle(t,"margin-left",this.em(this.getAccentOffset()))})),o[0]&&this.addChildren([o[0]]),o[1]&&(this.multChar||this).addChildren([o[1]])}}stretchHTML(t){const e=this.getText().codePointAt(0);this.font.delimUsage.add(e),this.childNodes[0].markUsed();const s=this.stretch,i=s.stretch,n=this.font.getStretchVariants(e),o=[];this.createPart("mjx-beg",i[0],n[0],o),this.createPart("mjx-ext",i[1],n[1],o),4===i.length&&(this.createPart("mjx-mid",i[3],n[3],o),this.createPart("mjx-ext",i[1],n[1],o)),this.createPart("mjx-end",i[2],n[2],o);const r={},{h:a,d:h,w:l}=this.bbox;s.dir===Et.Vertical?(o.push(this.html("mjx-mark")),r.height=this.em(a+h),r.verticalAlign=this.em(-h)):r.width=this.em(l);const d={class:this.char(s.c||e),style:r},c=this.html("mjx-stretchy-"+s.dir,d,o),m=this.adaptor;t[0]&&m.append(t[0],c),t[1]&&m.append(t[1],t[0]?m.clone(c):c)}createPart(t,e,s,i){if(e){const n=this.font.getChar(s,e)[3],o=n.f||("normal"===s?"":this.font.getVariant(s).letter),r=n.ff||(o?`${this.font.cssFontPrefix}-${o}`:"");let a=(n.c||String.fromCodePoint(e)).replace(/\\[0-9A-F]+/gi,(t=>String.fromCodePoint(parseInt(t.substring(1),16))));i.push(this.html(t,{},[this.html("mjx-c",r?{class:r}:{},[this.text(a)])]))}}}).kind=Te.prototype.kind,t.styles={"mjx-stretchy-h":{display:"inline-block"},"mjx-stretchy-h > *":{display:"inline-block",width:0},"mjx-stretchy-h > mjx-ext":{"/* IE */ overflow":"hidden","/* others */ overflow":"clip visible",width:"100%",border:"0px solid transparent","box-sizing":"border-box","text-align":"center"},"mjx-stretchy-h > mjx-ext > mjx-c":{transform:"scalex(500)",width:0},"mjx-stretchy-v":{display:"inline-block","text-align":"center"},"mjx-stretchy-v > *":{display:"block",height:0},"mjx-stretchy-v > mjx-ext":{"/* IE */ overflow":"hidden","/* others */ overflow":"visible clip",height:"100%",border:"0px solid transparent","box-sizing":"border-box"},"mjx-mark":{display:"inline-block",height:0}},t}();function Pe(t){return class extends t{remapChars(t){if(t.length){const e=this.font.getRemappedChar("mn",t[0]);if(e){const s=this.unicodeChars(e,this.variant);1===s.length?t[0]=s[0]:t=s.concat(t.slice(1))}}return t}}}const Re=MathJax._.core.MmlTree.MmlNodes.mn.MmlMn,He=function(){var t;const e=Pe(Ce);return(t=class extends e{}).kind=Re.prototype.kind,t}();function Ee(t){return class extends t{createText(t){const e=this.wrap(this.mmlText(t));return e.parent=this,e}constructor(t,e,s=null){super(t,e,s);const i=this.node.attributes;let n=i.getList("lquote","rquote");"monospace"!==this.variant&&(i.isSet("lquote")||'"'!==n.lquote||(n.lquote="\u201c"),i.isSet("rquote")||'"'!==n.rquote||(n.rquote="\u201d")),this.childNodes.unshift(this.createText(n.lquote)),this.childNodes.push(this.createText(n.rquote))}}}const Fe=MathJax._.core.MmlTree.MmlNodes.ms.MmlMs,Ie=function(){var t;const e=Ee(Ce);return(t=class extends e{}).kind=Fe.prototype.kind,t}();function _e(t){var e;return e=class extends t{constructor(){super(...arguments),this.breakPoints=[]}textWidth(t){let e=this.textNode;if(!e){const t=this.node.factory.create("text");t.parent=this.node,e=this.textNode=this.factory.wrap(t),e.parent=this}return e.node.setText(t),e.invalidateBBox(!1),e.getBBox().w}get breakCount(){return this.breakPoints.length}getVariant(){const t=this.jax.options,e=this.jax.math.outputData,s=(!!e.merrorFamily||!!t.merrorFont)&&this.node.Parent.isKind("merror");if(e.mtextFamily||t.mtextFont||s){const i=this.node.attributes.get("mathvariant"),n=this.constructor.INHERITFONTS[i]||this.jax.font.getCssFont(i),o=n[0]||(s?e.merrorFamily||t.merrorFont:e.mtextFamily||t.mtextFont);this.variant=this.explicitVariant(o,n[2]?"bold":"",n[1]?"italic":"")}else super.getVariant()}setBreakAt(t){this.breakPoints.push(t)}clearBreakPoints(){this.breakPoints=[]}computeLineBBox(t){const e=qt.from(this.getOuterBBox(),this.linebreakOptions.lineleading);return this.breakCount?(e.w=this.getBreakWidth(t),0===t?(e.R=0,this.addLeftBorders(e)):(e.L=0,e.indentData=[["left","0"],["left","0"],["left","0"]],t===this.breakCount&&this.addRightBorders(e)),e):e}getBreakWidth(t){const e=this.childNodes;let[s,i]=this.breakPoints[t-1]||[0,0],[n,o]=this.breakPoints[t]||[e.length,0],r=e[s].node.getText().split(/ /);if(s===n)return this.textWidth(r.slice(i,o).join(" "));let a=this.textWidth(r.slice(i).join(" "));for(;++s<n&&s<e.length;)a+=e[s].getBBox().w;return s<e.length&&(r=e[s].node.getText().split(/ /),a+=this.textWidth(r.slice(0,o).join(" "))),a}},e.INHERITFONTS={normal:["",!1,!1],bold:["",!1,!0],italic:["",!0,!1],"bold-italic":["",!0,!0]},e}const Ve=MathJax._.core.MmlTree.MmlNodes.mtext.MmlMtext,ze=function(){var t;const e=_e(Ce);return(t=class extends e{toCHTML(t){if(!this.breakCount)return void super.toCHTML(t);const e=this.standardChtmlNodes(t),s=this.textNode.node,i=this.childNodes;for(const t of e.keys()){const n=[e[t]];this.adaptor.append(e[t],this.html("mjx-linestrut"));let[o,r]=this.breakPoints[t-1]||[0,0],[a,h]=this.breakPoints[t]||[i.length,0],l=i[o].node.getText().split(/ /);if(o!==a){for(s.setText(l.slice(r).join(" ")),this.textNode.toCHTML(n);++o<a&&o<i.length;)i[o].toCHTML(n);o<i.length&&(l=i[o].node.getText().split(/ /),s.setText(l.slice(0,h).join(" ")),this.textNode.toCHTML(n))}else s.setText(l.slice(r,h).join(" ")),this.textNode.toCHTML(n)}}}).kind=Ve.prototype.kind,t}();function Ue(t){return class extends t{get canBreak(){return this.node.canBreak}get breakCount(){return this.breakStyle?1:0}setBreakStyle(t=""){this.breakStyle=t||(this.node.hasNewline||this.node.getProperty("forcebreak")?"before":"")}constructor(t,e,s=null){super(t,e,s),this.setBreakStyle()}computeBBox(t,e=!1){const s=this.node.attributes;t.w=this.length2em(s.get("width"),0),t.h=this.length2em(s.get("height"),0),t.d=this.length2em(s.get("depth"),0)}computeLineBBox(t){const e=this.node.attributes.get("data-lineleading"),s=this.length2em(e,this.linebreakOptions.lineleading),i=qt.from($t.zero(),s);return 1===t&&(i.getIndentData(this.node),i.w=this.getBBox().w,i.isFirst=0===i.w),i}}}const Je=MathJax._.core.MmlTree.MmlNodes.mspace.MmlMspace,$e=function(){var t;const e=Ue(Ce);return(t=class extends e{toCHTML(t){t.length>1&&t.forEach((t=>this.adaptor.append(t,this.html("mjx-linestrut"))));let e=this.standardChtmlNodes(t),{w:s,h:i,d:n}=this.getBBox();s<0&&(this.adaptor.setStyle(e[0],"marginRight",this.em(s)),s=0),s&&!this.breakCount&&this.adaptor.setStyle(e[0],"width",this.em(s)),i=Math.max(0,i+n),i&&this.adaptor.setStyle(e[0],"height",this.em(Math.max(0,i))),n&&this.adaptor.setStyle(e[0],"verticalAlign",this.em(-n))}}).kind=Je.prototype.kind,t}();function qe(t){return class extends t{getDimens(){const t=this.node.attributes.getList("width","height","depth","lspace","voffset"),e=this.childNodes[0].getOuterBBox();let{w:s,h:i,d:n}=e,o=s,r=i,a=n,h=0,l=0,d=0;""!==t.width&&(s=this.dimen(t.width,e,"w",0)),""!==t.height&&(i=this.dimen(t.height,e,"h",0)),""!==t.depth&&(n=this.dimen(t.depth,e,"d",0)),""!==t.voffset&&(l=this.dimen(t.voffset,e)),""!==t.lspace&&(h=this.dimen(t.lspace,e));const c=this.node.attributes.get("data-align");return c&&(d=this.getAlignX(s,e,c)),[r,a,o,i-r,n-a,s-o,h,l,d]}dimen(t,e,s="",i=null){const n=(t=String(t)).match(/width|height|depth/),o=n?e[n[0].charAt(0)]:s?e[s]:0;let r=this.length2em(t,o)||0;return t.match(/^[-+]/)&&s&&(r+=o),null!=i&&(r=Math.max(i,r)),r}setBBoxDimens(t){const[e,s,i,n,o,r]=this.getDimens();t.w=i+r,t.h=e+n,t.d=s+o}computeBBox(t,e=!1){this.setBBoxDimens(t);if(this.childNodes[0].getOuterBBox().w>t.w){const e=this.node.attributes.get("data-overflow");("linebreak"===e||"auto"===e&&"linebreak"===this.jax.math.root.attributes.get("overflow"))&&(this.childNodes[0].breakToWidth(t.w),this.setBBoxDimens(t))}this.setChildPWidths(e,t.w)}getWrapWidth(t){return this.getBBox().w}getChildAlign(t){return this.node.attributes.get("data-align")||"left"}}}const Ke=MathJax._.core.MmlTree.MmlNodes.mpadded.MmlMpadded,Xe=function(){var t;const e=qe(Ce);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;let e=this.standardChtmlNodes(t);const s=[],i={},[,,n,o,r,a,h,l,d]=this.getDimens();if((a||this.childNodes[0].getBBox().pwidth)&&(i.width=this.em(n+a)),(o||r)&&(i.margin=this.em(o)+" 0 "+this.em(r)),h+d||l){i.position="relative";const t=this.html("mjx-rbox",{style:{left:this.em(h+d),top:this.em(-l),"max-width":i.width}});h+d&&this.childNodes[0].getBBox().pwidth&&(this.adaptor.setAttribute(t,"width","full"),this.adaptor.setStyle(t,"left",this.em(h))),s.push(t)}e=[this.adaptor.append(e[0],this.html("mjx-block",{style:i},s))],this.childNodes[0].childNodes.length?this.childNodes[0].toCHTML([s[0]||e[0]]):(o||r)&&this.adaptor.append(s[0]||e[0],this.html("mjx-box"))}}).kind=Ke.prototype.kind,t.styles={"mjx-mpadded":{display:"inline-block"},"mjx-rbox":{display:"inline-block",position:"relative"}},t}(),Qe=4,Ye=1,Ge=2,Ze=.067,ts=.2,es=Ze+"em solid",ss={top:0,right:1,bottom:2,left:3},is=Object.keys(ss),ns=t=>new Array(4).fill(t.thickness+t.padding),os=t=>new Array(4).fill(t.padding),rs=t=>new Array(4).fill(t.thickness),as=t=>Math.max(t.padding,t.thickness*(t.arrowhead.x+t.arrowhead.dx+1)),hs=(t,e)=>{if(t.childNodes[0]){const{h:s,d:i}=t.childNodes[0].getBBox();e[0]=e[2]=Math.max(0,t.thickness*t.arrowhead.y-(s+i)/2)}return e},ls=(t,e)=>{if(t.childNodes[0]){const{w:s}=t.childNodes[0].getBBox();e[1]=e[3]=Math.max(0,t.thickness*t.arrowhead.y-s/2)}return e},ds={up:[-Math.PI/2,!1,!0,"verticalstrike"],down:[Math.PI/2,!1,!0,"verticakstrike"],right:[0,!1,!1,"horizontalstrike"],left:[Math.PI,!1,!1,"horizontalstrike"],updown:[Math.PI/2,!0,!0,"verticalstrike uparrow downarrow"],leftright:[0,!0,!1,"horizontalstrike leftarrow rightarrow"]},cs={updiagonal:[-1,0,!1,"updiagonalstrike northeastarrow"],northeast:[-1,0,!1,"updiagonalstrike updiagonalarrow"],southeast:[1,0,!1,"downdiagonalstrike"],northwest:[1,Math.PI,!1,"downdiagonalstrike"],southwest:[-1,Math.PI,!1,"updiagonalstrike"],northeastsouthwest:[-1,0,!0,"updiagonalstrike northeastarrow updiagonalarrow southwestarrow"],northwestsoutheast:[1,0,!0,"downdiagonalstrike northwestarrow southeastarrow"]},ms={up:t=>ls(t,[as(t),0,t.padding,0]),down:t=>ls(t,[t.padding,0,as(t),0]),right:t=>hs(t,[0,as(t),0,t.padding]),left:t=>hs(t,[0,t.padding,0,as(t)]),updown:t=>ls(t,[as(t),0,as(t),0]),leftright:t=>hs(t,[0,as(t),0,as(t)])},ps=function(t){return e=>{const s=ss[e];return[e,{renderer:t,bbox:t=>{const e=[0,0,0,0];return e[s]=t.thickness+t.padding,e},border:t=>{const e=[0,0,0,0];return e[s]=t.thickness,e}}]}},us=function(t){return(e,s,i)=>{const n=ss[s],o=ss[i];return[e,{renderer:t,bbox:t=>{const e=t.thickness+t.padding,s=[0,0,0,0];return s[n]=s[o]=e,s},border:t=>{const e=[0,0,0,0];return e[n]=e[o]=t.thickness,e},remove:s+" "+i}]}},gs=function(t){return e=>{const s="mjx-"+e.charAt(0)+"strike";return[e+"diagonalstrike",{renderer:t(s),bbox:ns}]}},fs=function(t){return e=>{const[s,i,n,o]=cs[e];return[e+"arrow",{renderer:(e,o)=>{const[r,a]=e.arrowAW(),h=e.arrow(a,s*(r-i),n);t(e,h)},bbox:t=>{const{a:e,x:s,y:i}=t.arrowData(),[n,o,r]=[t.arrowhead.x,t.arrowhead.y,t.arrowhead.dx],[a,h]=t.getArgMod(n+r,o),l=i+(a>e?t.thickness*h*Math.sin(a-e):0),d=s+(a>Math.PI/2-e?t.thickness*h*Math.sin(a+e-Math.PI/2):0);return[l,d,l,d]},remove:o}]}},xs=function(t){return e=>{const[s,i,n,o]=ds[e];return[e+"arrow",{renderer:(e,o)=>{const{w:r,h:a,d:h}=e.getBBox(),[l,d]=n?[a+h,"X"]:[r,"Y"],c=e.getOffset(d),m=e.arrow(l,s,i,d,c);t(e,m)},bbox:ms[e],remove:o}]}};function bs(t){return class extends t{getParameters(){const t=this.node.attributes,e=t.get("data-padding");void 0!==e&&(this.padding=this.length2em(e,ts));const s=t.get("data-thickness");void 0!==s&&(this.thickness=this.length2em(s,Ze));const i=t.get("data-arrowhead");if(void 0!==i){let[t,e,s]=fe(i);this.arrowhead={x:t?parseFloat(t):Qe,y:e?parseFloat(e):Ge,dx:s?parseFloat(s):Ye}}}getNotations(){const t=this.constructor.notations;for(const e of fe(this.node.attributes.get("notation"))){const s=t.get(e);s&&(this.notations[e]=s,s.renderChild&&(this.renderChild=s.renderer))}}removeRedundantNotations(){for(const t of Object.keys(this.notations))if(this.notations[t]){const e=this.notations[t].remove||"";for(const t of e.split(/ /))delete this.notations[t]}}initializeNotations(){for(const t of Object.keys(this.notations)){const e=this.notations[t].init;e&&e(this)}}getBBoxExtenders(){let t=[0,0,0,0];for(const e of Object.keys(this.notations))this.maximizeEntries(t,this.notations[e].bbox(this));return t}getPadding(){let t=[0,0,0,0];for(const e of Object.keys(this.notations)){const s=this.notations[e].border;s&&this.maximizeEntries(t,s(this))}return[0,1,2,3].map((e=>this.TRBL[e]-t[e]))}maximizeEntries(t,e){for(let s=0;s<t.length;s++)t[s]<e[s]&&(t[s]=e[s])}getOffset(t){let[e,s,i,n]=this.TRBL;const o=("X"===t?s-n:i-e)/2;return Math.abs(o)>.001?o:0}getArgMod(t,e){return[Math.atan2(e,t),Math.sqrt(t*t+e*e)]}arrow(t,e,s,i="",n=0){return null}arrowData(){const[t,e]=[this.padding,this.thickness],s=e*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),{h:i,d:n,w:o}=this.childNodes[0].getBBox(),r=i+n,a=Math.sqrt(r*r+o*o),h=Math.max(t,s*o/a),l=Math.max(t,s*r/a),[d,c]=this.getArgMod(o+2*h,r+2*l);return{a:d,W:c,x:h,y:l}}arrowAW(){const{h:t,d:e,w:s}=this.childNodes[0].getBBox(),[i,n,o,r]=this.TRBL;return this.getArgMod(r+s+n,i+t+e+o)}createMsqrt(t){const e=this.node.factory.create("msqrt");e.inheritAttributesFrom(this.node),e.childNodes[0]=t.node;const s=this.wrap(e);return s.parent=this,s}sqrtTRBL(){const t=this.msqrt.getBBox(),e=this.msqrt.childNodes[0].getBBox();return[t.h-e.h,0,t.d-e.d,t.w-e.w]}constructor(t,e,s=null){super(t,e,s),this.notations={},this.renderChild=null,this.msqrt=null,this.padding=ts,this.thickness=Ze,this.arrowhead={x:Qe,y:Ge,dx:Ye},this.TRBL=[0,0,0,0],this.getParameters(),this.getNotations(),this.removeRedundantNotations(),this.initializeNotations(),this.TRBL=this.getBBoxExtenders()}computeBBox(t,e=!1){let[s,i,n,o]=this.TRBL;const r=this.childNodes[0].getBBox();t.combine(r,o,0),t.h+=s,t.d+=n,t.w+=i,this.setChildPWidths(e)}}}const ys=MathJax._.core.MmlTree.MmlNodes.menclose.MmlMenclose,ks=function(t,e=""){return(s,i)=>{const n=s.adjustBorder(s.html("mjx-"+t));if(e){const t=s.getOffset(e);if(s.thickness!==Ze||t){const i=`translate${e}(${s.Em(s.thickness/2-t)})`;s.adaptor.setStyle(n,"transform",i)}}s.adaptor.append(s.dom[0],n)}},Bs=function(t){return ps(((e,s)=>{e.adaptor.setStyle(s,"border-"+t,e.Em(e.thickness)+" solid")}))(t)},Cs=function(t,e,s){return us(((t,i)=>{const n=t.Em(t.thickness)+" solid";t.adaptor.setStyle(i,"border-"+e,n),t.adaptor.setStyle(i,"border-"+s,n)}))(t,e,s)},ws=function(t,e){return gs((t=>(s,i)=>{const{w:n,h:o,d:r}=s.getBBox(),[a,h]=s.getArgMod(n,o+r),l=e*s.thickness/2,d=s.adjustBorder(s.html(t,{style:{width:s.Em(h),transform:"rotate("+s.fixed(-e*a)+"rad) translateY("+l+"em)"}}));s.adaptor.append(s.dom[0],d)}))(t)},vs=function(t){return fs(((t,e)=>{t.adaptor.append(t.dom[0],e)}))(t)},Ms=function(t){return xs(((t,e)=>{t.adaptor.append(t.dom[0],e)}))(t)};function Ss(t,e){return Math.atan2(t,e).toFixed(3).replace(/\.?0+$/,"")}const js=Ss(Ye,Ge),Ls=function(){var t;const e=bs(Ce);return(t=class extends e{adjustArrow(t,e){const s=this.thickness,i=this.arrowhead;if(i.x===Qe&&i.y===Ge&&i.dx===Ye&&s===Ze)return;const[n,o]=[s*i.x,s*i.y].map((t=>this.em(t))),r=Ss(i.dx,i.y),[a,h,l,d,c]=this.adaptor.childNodes(t);this.adjustHead(h,[o,"0","1px",n],r),this.adjustHead(l,["1px","0",o,n],"-"+r),this.adjustHead(d,[o,n,"1px","0"],"-"+r),this.adjustHead(c,["1px",n,o,"0"],r),this.adjustLine(a,s,i.x,e)}adjustHead(t,e,s){t&&(this.adaptor.setStyle(t,"border-width",e.join(" ")),this.adaptor.setStyle(t,"transform","skewX("+s+"rad)"))}adjustLine(t,e,s,i){this.adaptor.setStyle(t,"borderTop",this.em(e)+" solid"),this.adaptor.setStyle(t,"top",this.em(-e/2)),this.adaptor.setStyle(t,"right",this.em(e*(s-1))),i&&this.adaptor.setStyle(t,"left",this.em(e*(s-1)))}moveArrow(t,e,s){if(!s)return;const i=this.adaptor.getStyle(t,"transform");this.adaptor.setStyle(t,"transform",`translate${e}(${this.em(-s)})${i?" "+i:""}`)}adjustBorder(t){return this.thickness!==Ze&&this.adaptor.setStyle(t,"borderWidth",this.em(this.thickness)),t}adjustThickness(t){return this.thickness!==Ze&&this.adaptor.setStyle(t,"strokeWidth",this.fixed(this.thickness)),t}fixed(t,e=3){return Math.abs(t)<6e-4?"0":t.toFixed(e).replace(/\.?0+$/,"")}Em(t){return super.em(t)}toCHTML(t){const e=this.adaptor,s=this.standardChtmlNodes(t),i=e.append(s[0],this.html("mjx-box"));this.renderChild?this.renderChild(this,i):this.childNodes[0].toCHTML([i]);for(const t of Object.keys(this.notations)){const e=this.notations[t];!e.renderChild&&e.renderer(this,i)}const n=this.getPadding();for(const t of is){const s=ss[t];n[s]>0&&e.setStyle(i,"padding-"+t,this.em(n[s]))}}arrow(t,e,s,i="",n=0){const o=this.getBBox().w,r={width:this.em(t)};o!==t&&(r.left=this.em((o-t)/2)),e&&(r.transform="rotate("+this.fixed(e)+"rad)");const a=this.html("mjx-arrow",{style:r},[this.html("mjx-aline"),this.html("mjx-rthead"),this.html("mjx-rbhead")]);return s&&(this.adaptor.append(a,this.html("mjx-lthead")),this.adaptor.append(a,this.html("mjx-lbhead")),this.adaptor.setAttribute(a,"double","true")),this.adjustArrow(a,s),this.moveArrow(a,i,n),a}}).kind=ys.prototype.kind,t.styles={"mjx-menclose":{position:"relative"},"mjx-menclose > mjx-dstrike":{display:"inline-block",left:0,top:0,position:"absolute","border-top":es,"transform-origin":"top left"},"mjx-menclose > mjx-ustrike":{display:"inline-block",left:0,bottom:0,position:"absolute","border-top":es,"transform-origin":"bottom left"},"mjx-menclose > mjx-hstrike":{"border-top":es,position:"absolute",left:0,right:0,bottom:"50%",transform:"translateY("+ie(Ze/2)+")"},"mjx-menclose > mjx-vstrike":{"border-left":es,position:"absolute",top:0,bottom:0,right:"50%",transform:"translateX("+ie(Ze/2)+")"},"mjx-menclose > mjx-rbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:es,"border-radius":ie(Ze+ts)},"mjx-menclose > mjx-cbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:es,"border-radius":"50%"},"mjx-menclose > mjx-arrow":{position:"absolute",left:0,bottom:"50%",height:0,width:0},"mjx-menclose > mjx-arrow > *":{display:"block",position:"absolute","transform-origin":"bottom","border-left":ie(Ze*Qe)+" solid","border-right":0,"box-sizing":"border-box"},"mjx-menclose > mjx-arrow > mjx-aline":{left:0,top:ie(-Ze/2),right:ie(Ze*(Qe-1)),height:0,"border-top":ie(Ze)+" solid","border-left":0},"mjx-menclose > mjx-arrow[double] > mjx-aline":{left:ie(Ze*(Qe-1)),height:0},"mjx-menclose > mjx-arrow > mjx-rthead":{transform:"skewX("+js+"rad)",right:0,bottom:"-1px","border-bottom":"1px solid transparent","border-top":ie(Ze*Ge)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-rbhead":{transform:"skewX(-"+js+"rad)","transform-origin":"top",right:0,top:"-1px","border-top":"1px solid transparent","border-bottom":ie(Ze*Ge)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lthead":{transform:"skewX(-"+js+"rad)",left:0,bottom:"-1px","border-left":0,"border-right":ie(Ze*Qe)+" solid","border-bottom":"1px solid transparent","border-top":ie(Ze*Ge)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lbhead":{transform:"skewX("+js+"rad)","transform-origin":"top",left:0,top:"-1px","border-left":0,"border-right":ie(Ze*Qe)+" solid","border-top":"1px solid transparent","border-bottom":ie(Ze*Ge)+" solid transparent"},"mjx-menclose > mjx-dbox-top":{position:"absolute",top:0,bottom:"50%",left:0,width:ie(1.5*ts),border:ie(Ze)+" solid","border-style":"solid solid none none","border-radius":"0 100% 0 0","box-sizing":"border-box"},"mjx-menclose > mjx-dbox-bot":{position:"absolute",top:"50%",bottom:0,left:0,width:ie(1.5*ts),"border-width":ie(Ze),"border-style":"none solid solid none","border-radius":"0 0 100% 0","box-sizing":"border-box"}},t.notations=new Map([Bs("top"),Bs("right"),Bs("bottom"),Bs("left"),Cs("actuarial","top","right"),Cs("madruwb","bottom","right"),ws("up",1),ws("down",-1),["horizontalstrike",{renderer:ks("hstrike","Y"),bbox:t=>[0,t.padding,0,t.padding]}],["verticalstrike",{renderer:ks("vstrike","X"),bbox:t=>[t.padding,0,t.padding,0]}],["box",{renderer:(t,e)=>{t.adaptor.setStyle(e,"border",t.Em(t.thickness)+" solid")},bbox:ns,border:rs,remove:"left right top bottom"}],["roundedbox",{renderer:ks("rbox"),bbox:ns}],["circle",{renderer:ks("cbox"),bbox:ns}],["phasorangle",{renderer:(t,e)=>{const{h:s,d:i}=t.getBBox(),[n,o]=t.getArgMod(1.75*t.padding,s+i),r=t.thickness*Math.sin(n)*.9;t.adaptor.setStyle(e,"border-bottom",t.Em(t.thickness)+" solid");const a=t.adjustBorder(t.html("mjx-ustrike",{style:{width:t.Em(o),transform:"translateX("+t.Em(r)+") rotate("+t.fixed(-n)+"rad)"}}));t.adaptor.append(t.dom[0],a)},bbox:t=>{const e=t.padding/2,s=t.thickness;return[2*e,e,e+s,3*e+s]},border:t=>[0,0,t.thickness,0],remove:"bottom"}],Ms("up"),Ms("down"),Ms("left"),Ms("right"),Ms("updown"),Ms("leftright"),vs("updiagonal"),vs("northeast"),vs("southeast"),vs("northwest"),vs("southwest"),vs("northeastsouthwest"),vs("northwestsoutheast"),["longdiv",{renderer:(t,e)=>{const s=t.adaptor;s.setStyle(e,"border-top",t.Em(t.thickness)+" solid");const i=s.append(t.dom[0],t.html("mjx-dbox-top")),n=s.append(t.dom[0],t.html("mjx-dbox-bot")),o=t.thickness,r=t.padding;o!==Ze&&(s.setStyle(i,"border-width",t.Em(o)),s.setStyle(n,"border-width",t.Em(o))),r!==ts&&(s.setStyle(i,"width",t.Em(1.5*r)),s.setStyle(n,"width",t.Em(1.5*r)))},bbox:t=>{const e=t.padding,s=t.thickness;return[e+s,e,e,2*e+s/2]}}],["radical",{renderer:(t,e)=>{t.msqrt.toCHTML([e]);const s=t.sqrtTRBL();t.adaptor.setStyle(t.msqrt.dom[0],"margin",s.map((e=>t.Em(-e))).join(" "))},init:t=>{t.msqrt=t.createMsqrt(t.childNodes[0])},bbox:t=>t.sqrtTRBL(),renderChild:!0}]]),t}();function Ns(t){return class extends t{stretchChildren(){let t=[];for(const e of this.childNodes)e.canStretch(Et.Vertical)&&t.push(e);let e=t.length,s=this.childNodes.length;if(e&&s>1){let i=0,n=0,o=e>1&&e===s;for(const t of this.childNodes){const e=t.stretch.dir===Et.None;if(o||e){const e=t.getBBox().rscale;let[s,o]=t.getUnbrokenHD();s*=e,o*=e,s>i&&(i=s),o>n&&(n=o)}}for(const e of t){const t=e.coreRScale();e.coreMO().getStretchedVariant([i/t,n/t])}}}get fixesPWidth(){return!1}get breakCount(){return this._breakCount<0&&(this._breakCount=this.childNodes.length?this.childNodes.reduce(((t,e)=>t+e.breakCount),0):0),this._breakCount}breakTop(t,e){const s=this;return this.isStack?this.parent.breakTop(s,s):s}constructor(t,e,s=null){super(t,e,s),this.dh=0;const i=this;this.isStack=!this.parent||this.parent.node.isInferred||this.parent.breakTop(i,i)!==i,this.stretchChildren();for(const t of this.childNodes)if(t.bbox.pwidth){this.bbox.pwidth=$t.fullWidth;break}}computeBBox(t,e=!1){const s=this.breakCount;this.lineBBox=s?[new qt({h:.75,d:.25,w:0},[0,0])]:[],t.empty();for(const e of this.childNodes.keys()){const i=this.childNodes[e];t.append(i.getOuterBBox()),s&&this.computeChildLineBBox(i,e)}t.clean(),s&&this.computeLinebreakBBox(t),this.fixesPWidth&&this.setChildPWidths(e)&&this.computeBBox(t,!0),this.vboxAdjust(t)}computeLinebreakBBox(t){var e;t.empty();const s=this.isStack,i=this.lineBBox,n=i.length-1;if(s)for(const t of i.keys()){const e=i[t];this.addMiddleBorders(e),0===t&&this.addLeftBorders(e),t===n&&this.addRightBorders(e)}let o=0;for(const s of i.keys()){const n=i[s];t.combine(n,0,o),o-=Math.max(.25,n.d)+n.lineLeading+Math.max(.75,(null===(e=i[s+1])||void 0===e?void 0:e.h)||0)}s?(i[0].L=this.bbox.L,i[n].R=this.bbox.R):(t.w=Math.max(...this.lineBBox.map((t=>t.w))),this.shiftLines(t.w),this.jax.math.display||this.linebreakOptions.inline||(t.pwidth=$t.fullWidth,this.node.isInferred&&(this.parent.bbox.pwidth=$t.fullWidth))),t.clean()}vboxAdjust(t){if(!this.parent)return;const e=this.breakCount,s=this.parent.node.attributes.get("data-vertical-align");if(e&&"bottom"===s)this.dh=e?t.d-this.lineBBox[e-1].d:0;else{if(!("center"===s||e&&"middle"===s))return void(this.dh=0);{const{h:e,d:s}=t,i=this.font.params.axis_height;this.dh=(e+s)/2+i-e}}t.h+=this.dh,t.d-=this.dh}computeChildLineBBox(t,e){const s=this.lineBBox[this.lineBBox.length-1];s.end=[e,0],s.append(t.getLineBBox(0));const i=t.breakCount+1;if(1!==i)for(let s=1;s<i;s++){const i=new qt({h:.75,d:.25,w:0});i.start=i.end=[e,s],i.isFirst=!0,i.append(t.getLineBBox(s)),this.lineBBox.push(i)}}getLineBBox(t){return this.getBBox(),this.isStack?super.getLineBBox(t):qt.from(this.getOuterBBox(),this.linebreakOptions.lineleading)}shiftLines(t){var e,s;const i=this.lineBBox,n=i.length-1,[o,r]=(null===(e=i[1].indentData)||void 0===e?void 0:e[0])||["left","0"];for(const e of i.keys()){const a=i[e];let[h,l]=0===e?[o,r]:(null===(s=a.indentData)||void 0===s?void 0:s[e===n?2:1])||["left","0"];const[d,c]=this.processIndent(h,l,o,r,t);a.L=0,a.L=this.getAlignX(t,a,d)+c}}setChildPWidths(t,e=null,s=!0){return this.breakCount?!t&&(null!==e&&this.bbox.w!==e&&(this.bbox.w=e,this.shiftLines(e)),!0):super.setChildPWidths(t,e,s)}breakToWidth(t){this.linebreaks.breakToWidth(this,t)}}}function Ts(t){return class extends t{getScale(){this.bbox.scale=this.parent.bbox.scale,this.bbox.rscale=1}}}const As=MathJax._.core.MmlTree.MmlNodes.mrow,Ds=As.MmlMrow,Os=As.MmlInferredMrow,Ws=function(){var t;const e=Ns(Ce);return t=class extends e{constructor(){super(...arguments),this.linebreakCount=0}toCHTML(t){const e=this.linebreakCount=this.isStack?0:this.breakCount;e||!this.node.isInferred?t=this.standardChtmlNodes(t):this.dom=t,this.addChildren(t),e?this.placeLines(t,e):(this.handleVerticalAlign(t[0]),this.handleNegativeWidth(t[0]))}placeLines(t,e){var s,i;this.getBBox();const n=this.lineBBox,o=this.adaptor,[r,a]=(null===(s=n[1].indentData)||void 0===s?void 0:s[0])||["left","0"];for(const s of t.keys()){const h=n[s];let[l,d]=0===s?[r,a]:(null===(i=h.indentData)||void 0===i?void 0:i[s===e?2:1])||["left","0"];const[c,m]=this.processIndent(l,d,r,a);o.setAttribute(t[s],"align",c),m&&(o.setStyle(t[s],"position","relative"),o.setStyle(t[s],"left",this.em(m))),s<e&&this.jax.math.display&&o.setStyle(t[s],"margin-bottom",this.em(h.lineLeading))}}handleVerticalAlign(t){this.dh&&this.adaptor.setStyle(this.adaptor.parent(t),"vertical-align",this.em(this.dh))}handleNegativeWidth(t){const{w:e}=this.getBBox();e<0&&(this.adaptor.setStyle(t,"width",this.em(Math.max(0,e))),this.adaptor.setStyle(t,"marginRight",this.em(e)))}createChtmlNodes(t){const e=this.linebreakCount;if(!e)return super.createChtmlNodes(t);const s=this.adaptor,i=this.node.isInferred?"mjx-linestack":"mjx-"+this.node.kind;if(this.dom=[s.append(t[0],this.html(i))],"mjx-mrow"!==i||this.isStack||s.setAttribute(this.dom[0],"break-top","true"),this.node.getProperty("process-breaks")&&s.setAttribute(this.dom[0],"breakable","true"),this.node.isInferred||!this.isStack){const t=this.parent.node.attributes.get("data-vertical-align");"middle"!==t&&"center"!==t&&"bottom"!==t||s.setAttribute(this.dom[0],"break-align",t)}this.dom=[s.append(this.handleHref(t)[0],this.dom[0])];const n=Array(e);for(let t=0;t<=e;t++)n[t]=s.append(this.dom[0],this.html("mjx-linebox",{lineno:t}));return n}addChildren(t){let e=0;for(const s of this.childNodes){const i=s.breakCount;s.toCHTML(t.slice(e,e+i+1)),e+=i}}},t.kind=Ds.prototype.kind,t.styles={"mjx-linestack, mjx-mrow[break-top]":{display:"inline-table",width:"100%"},'mjx-linestack[break-align="bottom"], mjx-mrow[break-top][break-align="bottom"]':{display:"inline-block"},'mjx-linestack[break-align="middle"], mjx-mrow[break-top][break-align="middle"]':{"vertical-align":"middle"},'mjx-linestack[break-align="center"], mjx-mrow[break-top][break-align="center"]':{"vertical-align":"middle"},"mjx-linestack[breakable]":{display:"inline"},"mjx-linestack[breakable] > mjx-linebox":{display:"inline"},"mjx-linestack[breakable] > mjx-linebox::before":{"white-space":"pre",content:'"\\A"'},"mjx-linestack[breakable] > mjx-linebox::after":{"white-space":"normal",content:'" "',"letter-spacing":"-.999em","font-family":"MJX-BRK"},"mjx-linestack[breakable] > mjx-linebox:first-of-type::before":{display:"none"},"mjx-linestack[breakable] > mjx-linebox:last-of-type::after":{display:"none"},"mjx-linebox":{display:"block"},'mjx-linebox[align="left"]':{"text-align":"left"},'mjx-linebox[align="center"]':{"text-align":"center"},'mjx-linebox[align="right"]':{"text-align":"right"},"mjx-linestrut":{display:"inline-block",height:"1em","vertical-align":"-.25em"}},t}(),Ps=function(){var t;const e=Ts(Ws);return(t=class extends e{}).kind=Os.prototype.kind,t}();function Rs(t){return class extends t{createMrow(){const t=this.node.factory.create("inferredMrow");t.inheritAttributesFrom(this.node),this.mrow=this.wrap(t),this.mrow.parent=this}addMrowChildren(){const t=this.node,e=this.mrow;this.addMo(t.open),this.childNodes.length&&e.childNodes.push(this.childNodes[0]);let s=0;for(const i of this.childNodes.slice(1))this.addMo(t.separators[s++]),e.childNodes.push(i);this.addMo(t.close),e.stretchChildren()}addMo(t){if(!t)return;const e=this.wrap(t);this.mrow.childNodes.push(e),e.parent=this.mrow}constructor(t,e,s=null){super(t,e,s),this.mrow=null,this.createMrow(),this.addMrowChildren()}computeBBox(t,e=!1){t.updateFrom(this.mrow.getOuterBBox()),this.setChildPWidths(e)}get breakCount(){return this.mrow.breakCount}computeLineBBox(t){return this.mrow.getLineBBox(t)}}}const Hs=MathJax._.core.MmlTree.MmlNodes.mfenced.MmlMfenced,Es=function(){var t;const e=Rs(Ce);return(t=class extends e{toCHTML(t){const e=this.standardChtmlNodes(t);this.mrow.toCHTML(e)}}).kind=Hs.prototype.kind,t}();function Fs(t){return class extends t{getFractionBBox(t,e,s){const i=this.childNodes[0].getOuterBBox(),n=this.childNodes[1].getOuterBBox(),o=this.font.params.axis_height,{T:r,u:a,v:h}=this.getTUV(e,s);t.combine(i,0,o+r+Math.max(i.d*i.rscale,a)),t.combine(n,0,o-r-Math.max(n.h*n.rscale,h)),t.w+=2*this.pad+.2}getTUV(t,e){const s=this.font.params,i=s.axis_height,n=(t?3.5:1.5)*e;return{T:(t?3.5:1.5)*e,u:(t?s.num1:s.num2)-i-n,v:(t?s.denom1:s.denom2)+i-n}}getAtopBBox(t,e){const{u:s,v:i,nbox:n,dbox:o}=this.getUVQ(e);t.combine(n,0,s),t.combine(o,0,-i),t.w+=2*this.pad}getUVQ(t){const e=this.childNodes[0].getOuterBBox(),s=this.childNodes[1].getOuterBBox(),i=this.font.params;let[n,o]=t?[i.num1,i.denom1]:[i.num3,i.denom2],r=(t?7:3)*i.rule_thickness,a=n-e.d*e.scale-(s.h*s.scale-o);return a<r&&(n+=(r-a)/2,o+=(r-a)/2,a=r),{u:n,v:o,q:a,nbox:e,dbox:s}}getBevelledBBox(t,e){const{u:s,v:i,delta:n,nbox:o,dbox:r}=this.getBevelData(e),a=this.bevel.getOuterBBox();t.combine(o,0,s),t.combine(a,t.w-n/2,0),t.combine(r,t.w-n/2,i)}getBevelData(t){const e=this.childNodes[0].getOuterBBox(),s=this.childNodes[1].getOuterBBox(),i=t?.4:.15,n=Math.max(e.scale*(e.h+e.d),s.scale*(s.h+s.d))+2*i,o=this.font.params.axis_height;return{H:n,delta:i,u:e.scale*(e.d-e.h)/2+o+i,v:s.scale*(s.d-s.h)/2+o-i,nbox:e,dbox:s}}isDisplay(){const{displaystyle:t,scriptlevel:e}=this.node.attributes.getList("displaystyle","scriptlevel");return t&&0===e}constructor(t,e,s=null){if(super(t,e,s),this.bevel=null,this.pad=this.node.getProperty("withDelims")?0:this.font.params.nulldelimiterspace,this.node.attributes.get("bevelled")){const{H:t}=this.getBevelData(this.isDisplay()),e=this.bevel=this.createMo("/");e.node.attributes.set("symmetric",!0),e.canStretch(Et.Vertical),e.getStretchedVariant([t],!0)}}computeBBox(t,e=!1){t.empty();const{linethickness:s,bevelled:i}=this.node.attributes.getList("linethickness","bevelled"),n=this.isDisplay();let o=null;if(i)this.getBevelledBBox(t,n);else{const e=this.length2em(String(s),.06);o=-2*this.pad,0===e?this.getAtopBBox(t,n):(this.getFractionBBox(t,n,e),o-=.2),o+=t.w}t.clean(),this.setChildPWidths(e,o)}canStretch(t){return!1}getChildAlign(t){const e=this.node.attributes;return e.get("bevelled")?"left":e.get(["numalign","denomalign"][t])}getWrapWidth(t){const e=this.node.attributes;if(e.get("bevelled"))return this.childNodes[t].getOuterBBox().w;return this.getBBox().w-(this.length2em(e.get("linethickness"))?.2:0)-2*this.pad}}}const Is=MathJax._.core.MmlTree.MmlNodes.mfrac.MmlMfrac,_s=function(){var t;const e=Fs(Ce);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;this.standardChtmlNodes(t);const{linethickness:e,bevelled:s}=this.node.attributes.getList("linethickness","bevelled"),i=this.isDisplay();if(s)this.makeBevelled(i);else{const t=this.length2em(String(e),.06);0===t?this.makeAtop(i):this.makeFraction(i,t)}}makeFraction(t,e){const{numalign:s,denomalign:i}=this.node.attributes.getList("numalign","denomalign"),n=t?{type:"d"}:{},o=this.node.getProperty("withDelims")?Object.assign(Object.assign({},n),{delims:"true"}):Object.assign({},n),r="center"!==s?{align:s}:{},a="center"!==i?{align:i}:{},h=Object.assign({},n),l=Object.assign({},n),d=this.font.params;if(.06!==e){const s=d.axis_height,i=this.font.params.rule_factor,r=this.em(e),{T:a,u:c,v:m}=this.getTUV(t,e),p=(t?this.em(3*e):r)+" -.1em";n.style={height:r,"border-top":this.em(e*i)+" solid",margin:p};const u=this.em(Math.max(0,c));l.style={height:u,"vertical-align":"-"+u},h.style={height:this.em(Math.max(0,m))},o.style={"vertical-align":this.em(s-a)}}let c,m;this.adaptor.append(this.dom[0],this.html("mjx-frac",o,[c=this.html("mjx-num",r,[this.html("mjx-nstrut",l)]),this.html("mjx-dbox",{},[this.html("mjx-dtable",{},[this.html("mjx-line",n),this.html("mjx-row",{},[m=this.html("mjx-den",a,[this.html("mjx-dstrut",h)])])])])])),this.childNodes[0].toCHTML([c]),this.childNodes[1].toCHTML([m])}makeAtop(t){const{numalign:e,denomalign:s}=this.node.attributes.getList("numalign","denomalign"),i=t?{type:"d",atop:!0}:{atop:!0},n=this.node.getProperty("withDelims")?Object.assign(Object.assign({},i),{delims:!0}):Object.assign({},i),o="center"!==e?{align:e}:{},r="center"!==s?{align:s}:{},{v:a,q:h}=this.getUVQ(t);let l,d;o.style={"padding-bottom":this.em(h)},n.style={"vertical-align":this.em(-a)},this.adaptor.append(this.dom[0],this.html("mjx-frac",n,[l=this.html("mjx-num",o),d=this.html("mjx-den",r)])),this.childNodes[0].toCHTML([l]),this.childNodes[1].toCHTML([d])}makeBevelled(t){const e=this.adaptor;e.setAttribute(this.dom[0],"bevelled","ture");const s=e.append(this.dom[0],this.html("mjx-num"));this.childNodes[0].toCHTML([s]),this.bevel.toCHTML(this.dom);const i=e.append(this.dom[0],this.html("mjx-den"));this.childNodes[1].toCHTML([i]);const{u:n,v:o,delta:r,nbox:a,dbox:h}=this.getBevelData(t);n&&e.setStyle(s,"verticalAlign",this.em(n/a.scale)),o&&e.setStyle(i,"verticalAlign",this.em(o/h.scale));const l=this.em(-r/2);e.setStyle(this.bevel.dom[0],"marginLeft",l),e.setStyle(this.bevel.dom[0],"marginRight",l)}}).kind=Is.prototype.kind,t.styles={"mjx-frac":{display:"inline-block","vertical-align":"0.17em",padding:"0 .22em"},'mjx-frac[type="d"]':{"vertical-align":".04em"},"mjx-frac[delims]":{padding:"0 .1em"},"mjx-frac[atop]":{padding:"0 .12em"},"mjx-frac[atop][delims]":{padding:"0"},"mjx-dtable":{display:"inline-table",width:"100%"},"mjx-dtable > *":{"font-size":"2000%"},"mjx-dbox":{display:"block","font-size":"5%"},"mjx-num":{display:"block","text-align":"center"},"mjx-den":{display:"block","text-align":"center"},"mjx-mfrac[bevelled] > mjx-num":{display:"inline-block"},"mjx-mfrac[bevelled] > mjx-den":{display:"inline-block"},'mjx-den[align="right"], mjx-num[align="right"]':{"text-align":"right"},'mjx-den[align="left"], mjx-num[align="left"]':{"text-align":"left"},"mjx-nstrut":{display:"inline-block",height:".054em",width:0,"vertical-align":"-.054em"},'mjx-nstrut[type="d"]':{height:".217em","vertical-align":"-.217em"},"mjx-dstrut":{display:"inline-block",height:".505em",width:0},'mjx-dstrut[type="d"]':{height:".726em"},"mjx-line":{display:"block","box-sizing":"border-box","min-height":"1px",height:".06em","border-top":".075em solid",margin:".06em -.1em",overflow:"hidden"},'mjx-line[type="d"]':{margin:".18em -.1em"}},t}();function Vs(t){return class extends t{get base(){return 0}get root(){return null}combineRootBBox(t,e,s){}getPQ(t){const e=this.font.params.rule_thickness,s=this.font.params.surd_height,i=this.node.attributes.get("displaystyle")?this.font.params.x_height:e;return[i,t.h+t.d>this.surdH?(t.h+t.d-(this.surdH-e-s-i/2))/2:s+i/4]}getRootDimens(t,e){return[0,0,0,0]}rootWidth(){return 1.25}getStretchedSurd(){const t=this.font.params.rule_thickness,e=this.font.params.surd_height,s=this.node.attributes.get("displaystyle")?this.font.params.x_height:t,{h:i,d:n}=this.childNodes[this.base].getOuterBBox();this.surdH=i+n+t+e+s/4,this.surd.getStretchedVariant([this.surdH-n,n],!0)}constructor(t,e,s=null){super(t,e,s),this.surd=this.createMo("\u221a"),this.surd.canStretch(Et.Vertical),this.getStretchedSurd()}computeBBox(t,e=!1){t.empty();const s=this.surd.getBBox(),i=new $t(this.childNodes[this.base].getOuterBBox()),n=this.getPQ(s)[1],o=this.font.params.rule_thickness,r=this.font.params.surd_height,a=i.h+n+o,[h]=this.getRootDimens(s,a);t.h=a+r,this.combineRootBBox(t,s,a),t.combine(s,h,a-s.h),t.combine(i,h+s.w,0),t.clean(),this.setChildPWidths(e)}invalidateBBox(){super.invalidateBBox(),this.surd.childNodes[0].invalidateBBox()}}}const zs=MathJax._.core.MmlTree.MmlNodes.msqrt.MmlMsqrt,Us=function(){var t;const e=Vs(Ce);return t=class extends e{toCHTML(t){const e=this.surd,s=this.childNodes[this.base],i=e.getBBox(),n=s.getOuterBBox(),[,o]=this.getPQ(i),r=this.font.params.surd_height,a=n.h+o+r,h=this.adaptor,l=this.standardChtmlNodes(t);let d,c,m,p;null!=this.root&&(m=h.append(l[0],this.html("mjx-root")),p=this.childNodes[this.root]);const u=h.append(l[0],this.html("mjx-sqrt",{},[d=this.html("mjx-surd"),c=this.html("mjx-box",{style:{paddingTop:this.em(o)}})]));.06!==r&&h.setStyle(c,"border-top-width",this.em(r*this.font.params.rule_factor)),this.addRoot(m,p,i,a),e.toCHTML([d]),s.toCHTML([c]),e.size<0&&h.addClass(u,"mjx-tall")}addRoot(t,e,s,i){}},t.kind=zs.prototype.kind,t.styles={"mjx-root":{display:"inline-block","white-space":"nowrap"},"mjx-surd":{display:"inline-block","vertical-align":"top"},"mjx-sqrt":{display:"inline-block","padding-top":".075em"},"mjx-sqrt > mjx-box":{"border-top":".075em solid","padding-left":".03em","margin-left":"-.03em"},"mjx-sqrt.mjx-tall > mjx-box":{"padding-left":".3em","margin-left":"-.3em"}},t}();function Js(t){return class extends t{get root(){return 1}combineRootBBox(t,e,s){const i=this.childNodes[this.root].getOuterBBox(),n=this.getRootDimens(e,s)[1];t.combine(i,0,n)}getRootDimens(t,e){const s=this.surd,i=this.childNodes[this.root].getOuterBBox(),n=(s.size<0?.5:.6)*t.w,{w:o,rscale:r}=i,a=Math.max(o,n/r),h=Math.max(0,a-o);return[a*r-n,this.rootHeight(i,t,s.size,e),h]}rootHeight(t,e,s,i){const n=e.h+e.d;return(s<0?1.9:.55*n)-(n-i)+Math.max(0,t.d*t.rscale)}rootWidth(){const t=this.childNodes[this.root].getOuterBBox();return.4+t.w*t.rscale}}}const $s=MathJax._.core.MmlTree.MmlNodes.mroot.MmlMroot,qs=function(){var t;const e=Js(Us);return t=class extends e{addRoot(t,e,s,i){e.toCHTML([t]);const n=this.adaptor,[o,r,a]=this.getRootDimens(s,i);n.setStyle(t,"verticalAlign",this.em(r)),n.setStyle(t,"width",this.em(o)),a&&n.setStyle(n.firstChild(t),"paddingLeft",this.em(a))}},t.kind=$s.prototype.kind,t}();function Ks(t){var e;return(e=class extends t{get scriptChild(){return this.childNodes[this.node.sub]}getOffset(){return[this.baseIsChar?0:this.getAdjustedIc(),-this.getV()]}}).useIC=!1,e}function Xs(t){return class extends t{get scriptChild(){return this.childNodes[this.node.sup]}getOffset(){return[this.getAdjustedIc()-(this.baseRemoveIc?0:this.baseIc),this.getU()]}}}function Qs(t){var e;return e=class extends t{constructor(){super(...arguments),this.UVQ=null}get subChild(){return this.childNodes[this.node.sub]}get supChild(){return this.childNodes[this.node.sup]}get scriptChild(){return this.supChild}getUVQ(t=this.subChild.getOuterBBox(),e=this.supChild.getOuterBBox()){const s=this.baseCore,i=s.getLineBBox(s.breakCount);if(this.UVQ)return this.UVQ;const n=this.font.params,o=3*n.rule_thickness,r=this.length2em(this.node.attributes.get("subscriptshift"),n.sub2),a=this.baseCharZero(i.d*this.baseScale+n.sub_drop*t.rscale),h=e.d*e.rscale,l=t.h*t.rscale;let[d,c]=[this.getU(),Math.max(a,r)],m=d-h-(l-c);if(m<o){c+=o-m;const t=.8*n.x_height-(d-h);t>0&&(d+=t,c-=t)}return d=Math.max(this.length2em(this.node.attributes.get("superscriptshift"),d),d),c=Math.max(this.length2em(this.node.attributes.get("subscriptshift"),c),c),m=d-h-(l-c),this.UVQ=[d,-c,m],this.UVQ}appendScripts(t){const[e,s]=[this.subChild.getOuterBBox(),this.supChild.getOuterBBox()],i=this.getBaseWidth(),n=this.getAdjustedIc(),[o,r]=this.getUVQ(),a=t.d-this.baseChild.getLineBBox(this.baseChild.breakCount).d;return t.combine(e,i+(this.baseIsChar?0:n),r-a),t.combine(s,i+n,o-a),t.w+=this.font.params.scriptspace,t}},e.useIC=!1,e}function Ys(t){var e;return(e=class extends t{get baseChild(){return this.childNodes[this.node.base]}get scriptChild(){return this.childNodes[1]}getBaseCore(){let t=this.getSemanticBase()||this.childNodes[0],e=null==t?void 0:t.node;for(;t&&(1===t.childNodes.length&&(e.isKind("mrow")||e.isKind("TeXAtom")||e.isKind("mstyle")||e.isKind("mpadded")&&!e.getProperty("vbox")||e.isKind("mphantom")||e.isKind("semantics"))||e.isKind("munderover")&&t.isMathAccent);)this.setBaseAccentsFor(t),t=t.childNodes[0],e=null==t?void 0:t.node;return t||(this.baseHasAccentOver=this.baseHasAccentUnder=!1),t||this.childNodes[0]}setBaseAccentsFor(t){t.node.isKind("munderover")&&(null===this.baseHasAccentOver&&(this.baseHasAccentOver=!!t.node.attributes.get("accent")),null===this.baseHasAccentUnder&&(this.baseHasAccentUnder=!!t.node.attributes.get("accentunder")))}getSemanticBase(){let t=this.node.attributes.getExplicit("data-semantic-fencepointer");return this.getBaseFence(this.baseChild,t)}getBaseFence(t,e){if(!t||!t.node.attributes||!e)return null;if(t.node.attributes.getExplicit("data-semantic-id")===e)return t;for(const s of t.childNodes){const t=this.getBaseFence(s,e);if(t)return t}return null}getBaseScale(){let t=this.baseCore,e=1;for(;t&&t!==this;){e*=t.getOuterBBox().rscale,t=t.parent}return e}getBaseIc(){return this.baseCore.getOuterBBox().ic*this.baseScale}getAdjustedIc(){return this.baseIc?1.05*this.baseIc+.05:0}isCharBase(){let t=this.baseCore;return(t.node.isKind("mo")&&null===t.size||t.node.isKind("mi")||t.node.isKind("mn"))&&1===t.bbox.rscale&&1===Array.from(t.getText()).length}checkLineAccents(){if(this.node.isKind("munderover"))if(this.node.isKind("mover"))this.isLineAbove=this.isLineAccent(this.scriptChild);else if(this.node.isKind("munder"))this.isLineBelow=this.isLineAccent(this.scriptChild);else{const t=this;this.isLineAbove=this.isLineAccent(t.overChild),this.isLineBelow=this.isLineAccent(t.underChild)}}isLineAccent(t){const e=t.coreMO().node;return e.isToken&&"\u2015"===e.getText()}getBaseWidth(){const t=this.baseChild.getLineBBox(this.baseChild.breakCount);return t.w*t.rscale-(this.baseRemoveIc?this.baseIc:0)+this.font.params.extra_ic}getOffset(){return[0,0]}baseCharZero(t){const e=!!this.baseCore.node.attributes.get("largeop"),s=!(!this.baseCore.node.isKind("mo")||!this.baseCore.size),i=this.baseScale;return!this.baseIsChar||e||s||1!==i?t:0}getV(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),s=this.scriptChild.getOuterBBox(),i=this.font.params,n=this.length2em(this.node.attributes.get("subscriptshift"),i.sub1);return Math.max(this.baseCharZero(e.d*this.baseScale+i.sub_drop*s.rscale),n,s.h*s.rscale-.8*i.x_height)}getU(){const t=this.baseCore,e=t.getLineBBox(t.breakCount),s=this.scriptChild.getOuterBBox(),i=this.font.params,n=this.node.attributes.getList("displaystyle","superscriptshift"),o=this.node.getProperty("texprimestyle")?i.sup3:n.displaystyle?i.sup1:i.sup2,r=this.length2em(n.superscriptshift,o);return Math.max(this.baseCharZero(e.h*this.baseScale-i.sup_drop*s.rscale),r,s.d*s.rscale+1/4*i.x_height)}hasMovableLimits(){const t=this.node.attributes.get("displaystyle"),e=this.baseChild.coreMO().node;return!t&&!!e.attributes.get("movablelimits")}getOverKU(t,e){const s=this.node.attributes.get("accent"),i=this.font.params,n=e.d*e.rscale,o=i.rule_thickness*i.separation_factor,r=this.baseHasAccentOver?o:0,a=this.isLineAbove?3*i.rule_thickness:o,h=(s?a:Math.max(i.big_op_spacing1,i.big_op_spacing3-Math.max(0,n)))-r;return[h,t.h*t.rscale+h+n]}getUnderKV(t,e){const s=this.node.attributes.get("accentunder"),i=this.font.params,n=e.h*e.rscale,o=i.rule_thickness*i.separation_factor,r=this.baseHasAccentUnder?o:0,a=this.isLineBelow?3*i.rule_thickness:o,h=(s?a:Math.max(i.big_op_spacing2,i.big_op_spacing4-n))-r;return[h,-(t.d*t.rscale+h+n)]}getDeltaW(t,e=[0,0,0]){const s=this.node.attributes.get("align"),i=t.map((t=>t.w*t.rscale));i[0]-=this.baseRemoveIc&&!this.baseCore.node.attributes.get("largeop")?this.baseIc:0;const n=Math.max(...i),o=[];let r=0;for(const t of i.keys())o[t]=("center"===s?(n-i[t])/2:"right"===s?n-i[t]:0)+e[t],o[t]<r&&(r=-o[t]);if(r)for(const t of o.keys())o[t]+=r;return[1,2].map((e=>o[e]+=t[e]?t[e].dx*t[0].rscale:0)),o}getDelta(t,e=!1){const s=this.node.attributes.get("accent");let{sk:i,ic:n}=this.baseCore.getOuterBBox();return s&&(i-=t.getOuterBBox().sk),((s&&!e?i:0)+this.font.skewIcFactor*n)*this.baseScale}stretchChildren(){let t=[];for(const e of this.childNodes)e.canStretch(Et.Horizontal)&&t.push(e);let e=t.length,s=this.childNodes.length;if(e&&s>1){let i=0,n=e>1&&e===s;for(const t of this.childNodes){const e=t.stretch.dir===Et.None;if(n||e){const{w:s,rscale:n}=t.getOuterBBox(e);s*n>i&&(i=s*n)}}for(const e of t){const t=e.coreMO();null===t.size&&t.getStretchedVariant([i/e.coreRScale()])}}}constructor(t,e,s=null){super(t,e,s),this.baseScale=1,this.baseIc=0,this.baseRemoveIc=!1,this.baseIsChar=!1,this.baseHasAccentOver=null,this.baseHasAccentUnder=null,this.isLineAbove=!1,this.isLineBelow=!1,this.isMathAccent=!1;const i=this.baseCore=this.getBaseCore();i&&(this.setBaseAccentsFor(i),this.baseScale=this.getBaseScale(),this.baseIc=this.getBaseIc(),this.baseIsChar=this.isCharBase(),this.isMathAccent=this.baseIsChar&&this.scriptChild&&!!this.scriptChild.coreMO().node.getProperty("mathaccent"),this.checkLineAccents(),this.baseRemoveIc=!this.isLineAbove&&!this.isLineBelow&&(!this.constructor.useIC||this.isMathAccent))}computeBBox(t,e=!1){t.empty(),t.append(this.baseChild.getOuterBBox()),this.appendScripts(t),t.clean(),this.setChildPWidths(e)}appendScripts(t){const e=this.getBaseWidth(),[s,i]=this.getOffset();return t.combine(this.scriptChild.getOuterBBox(),e+s,i),t.w+=this.font.params.scriptspace,t}get breakCount(){return this._breakCount<0&&(this._breakCount=this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.node.linebreakContainer?0:this.childNodes[0].breakCount),this._breakCount}breakTop(t,e){return this.node.linebreakContainer||!this.parent||this.node.childIndex(e.node)?t:this.parent.breakTop(t,this)}computeLineBBox(t){const e=this.breakCount;if(!e)return qt.from(this.getOuterBBox(),this.linebreakOptions.lineleading);const s=this.baseChild.getLineBBox(t).copy();return t<e?(0===t&&this.addLeftBorders(s),this.addMiddleBorders(s)):(this.appendScripts(s),this.addMiddleBorders(s),this.addRightBorders(s)),s}}).useIC=!0,e}const Gs=function(){var t;const e=Ys(Ce);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;this.dom=this.standardChtmlNodes(t);const[e,s]=this.getOffset(),i=e-(this.baseRemoveIc?this.baseIc:0),n={"vertical-align":this.em(s)};i&&(n["margin-left"]=this.em(i)),this.baseChild.toCHTML(this.dom);const o=this.dom[this.dom.length-1];this.scriptChild.toCHTML([this.adaptor.append(o,this.html("mjx-script",{style:n}))])}markUsed(){super.markUsed(),this.jax.wrapperUsage.add(oi.kind)}setDeltaW(t,e){for(let s=0;s<e.length;s++)e[s]&&this.adaptor.setStyle(t[s],"paddingLeft",this.em(e[s]))}adjustOverDepth(t,e){e.d>=0||this.adaptor.setStyle(t,"marginBottom",this.em(e.d*e.rscale))}adjustUnderDepth(t,e){if(e.d>=0)return;const s=this.adaptor,i=this.em(e.d),n=this.html("mjx-box",{style:{"margin-bottom":i,"vertical-align":i}});for(const e of s.childNodes(s.firstChild(t)))s.append(n,e);s.append(s.firstChild(t),n)}adjustBaseHeight(t,e){if(this.node.attributes.get("accent")){const s=this.font.params.x_height*this.baseScale;e.h<s&&(this.adaptor.setStyle(t,"paddingTop",this.em(s-e.h)),e.h=s)}}}).kind="scriptbase",t}(),Zs=MathJax._.core.MmlTree.MmlNodes.msubsup,ti=Zs.MmlMsubsup,ei=Zs.MmlMsub,si=Zs.MmlMsup,ii=function(){var t;const e=Ks(Gs);return(t=class extends e{}).kind=ei.prototype.kind,t}(),ni=function(){var t;const e=Xs(Gs);return(t=class extends e{}).kind=si.prototype.kind,t}(),oi=function(){var t;const e=Qs(Gs);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;const e=this.adaptor,s=this.standardChtmlNodes(t),[i,n,o]=[this.baseChild,this.supChild,this.subChild],[,r,a]=this.getUVQ(),h={"vertical-align":this.em(r)};i.toCHTML(s);const l=e.append(s[s.length-1],this.html("mjx-script",{style:h}));n.toCHTML([l]),e.append(l,this.html("mjx-spacer",{style:{"margin-top":this.em(a)}})),o.toCHTML([l]);const d=this.getAdjustedIc();d&&(e.setStyle(n.dom[0],"marginLeft",this.em(d/n.bbox.rscale)),this.baseIsChar||e.setStyle(o.dom[0],"marginLeft",this.em(d/n.bbox.rscale))),this.baseRemoveIc&&e.setStyle(l,"marginLeft",this.em(-this.baseIc))}}).kind=ti.prototype.kind,t.styles={"mjx-script":{display:"inline-block","padding-right":".05em","padding-left":".033em"},"mjx-script > mjx-spacer":{display:"block"}},t}();function ri(t){return class extends t{get scriptChild(){return this.childNodes[this.node.under]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t,e=!1){if(this.hasMovableLimits())return void super.computeBBox(t,e);t.empty();const s=this.baseChild.getOuterBBox(),i=this.scriptChild.getOuterBBox(),n=this.getUnderKV(s,i)[1],o=this.isLineBelow?0:this.getDelta(this.scriptChild,!0),[r,a]=this.getDeltaW([s,i],[0,-o]);t.combine(s,r,0),t.combine(i,a,n),t.d+=this.font.params.big_op_spacing5,t.clean(),this.setChildPWidths(e)}}}function ai(t){return class extends t{get scriptChild(){return this.childNodes[this.node.over]}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())return void super.computeBBox(t);t.empty();const e=this.baseChild.getOuterBBox(),s=this.scriptChild.getOuterBBox();this.node.attributes.get("accent")&&(e.h=Math.max(e.h,this.font.params.x_height*this.baseScale));const i=this.getOverKU(e,s)[1],n=this.isLineAbove?0:this.getDelta(this.scriptChild),[o,r]=this.getDeltaW([e,s],[0,n]);t.combine(e,o,0),t.combine(s,r,i),t.h+=this.font.params.big_op_spacing5,t.clean()}}}function hi(t){return class extends t{get underChild(){return this.childNodes[this.node.under]}get overChild(){return this.childNodes[this.node.over]}get subChild(){return this.underChild}get supChild(){return this.overChild}constructor(...t){super(...t),this.stretchChildren()}computeBBox(t){if(this.hasMovableLimits())return void super.computeBBox(t);t.empty();const e=this.overChild.getOuterBBox(),s=this.baseChild.getOuterBBox(),i=this.underChild.getOuterBBox();this.node.attributes.get("accent")&&(s.h=Math.max(s.h,this.font.params.x_height*this.baseScale));const n=this.getOverKU(s,e)[1],o=this.getUnderKV(s,i)[1],r=this.getDelta(this.overChild),a=this.getDelta(this.underChild,!0),[h,l,d]=this.getDeltaW([s,i,e],[0,this.isLineBelow?0:-a,this.isLineAbove?0:r]);t.combine(s,h,0),t.combine(e,d,n),t.combine(i,l,o);const c=this.font.params.big_op_spacing5;t.h+=c,t.d+=c,t.clean()}}}const li=MathJax._.core.MmlTree.MmlNodes.munderover,di=li.MmlMunderover,ci=li.MmlMunder,mi=li.MmlMover,pi=function(){var t;const e=ri(ii);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.dom[0],"limits","false");this.dom=this.standardChtmlNodes(t);const e=this.adaptor.append(this.adaptor.append(this.dom[0],this.html("mjx-row")),this.html("mjx-base")),s=this.adaptor.append(this.adaptor.append(this.dom[0],this.html("mjx-row")),this.html("mjx-under"));this.baseChild.toCHTML([e]),this.scriptChild.toCHTML([s]);const i=this.baseChild.getOuterBBox(),n=this.scriptChild.getOuterBBox(),o=this.getUnderKV(i,n)[0],r=this.isLineBelow?0:this.getDelta(this.scriptChild,!0);this.adaptor.setStyle(s,"paddingTop",this.em(o)),this.setDeltaW([e,s],this.getDeltaW([i,n],[0,-r])),this.adjustUnderDepth(s,n)}}).kind=ci.prototype.kind,t.styles={"mjx-over":{"text-align":"left"},'mjx-munder:not([limits="false"])':{display:"inline-table"},"mjx-munder > mjx-row":{"text-align":"left"},"mjx-under":{"padding-bottom":".1em"}},t}(),ui=function(){var t;const e=ai(ni);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.dom[0],"limits","false");this.dom=this.standardChtmlNodes(t);const e=this.adaptor.append(this.dom[0],this.html("mjx-over")),s=this.adaptor.append(this.dom[0],this.html("mjx-base"));this.scriptChild.toCHTML([e]),this.baseChild.toCHTML([s]);const i=this.scriptChild.getOuterBBox(),n=this.baseChild.getOuterBBox();this.adjustBaseHeight(s,n);const o=this.getOverKU(n,i)[0],r=this.isLineAbove?0:this.getDelta(this.scriptChild);this.adaptor.setStyle(e,"paddingBottom",this.em(o)),this.setDeltaW([s,e],this.getDeltaW([n,i],[0,r])),this.adjustOverDepth(e,i)}}).kind=mi.prototype.kind,t.styles={'mjx-mover:not([limits="false"])':{"padding-top":".1em"},'mjx-mover:not([limits="false"]) > *':{display:"block","text-align":"left"}},t}(),gi=function(){var t;const e=hi(oi);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;if(this.hasMovableLimits())return super.toCHTML(t),void this.adaptor.setAttribute(this.dom[0],"limits","false");this.dom=this.standardChtmlNodes(t);const e=this.adaptor.append(this.dom[0],this.html("mjx-over")),s=this.adaptor.append(this.adaptor.append(this.dom[0],this.html("mjx-box")),this.html("mjx-munder")),i=this.adaptor.append(this.adaptor.append(s,this.html("mjx-row")),this.html("mjx-base")),n=this.adaptor.append(this.adaptor.append(s,this.html("mjx-row")),this.html("mjx-under"));this.overChild.toCHTML([e]),this.baseChild.toCHTML([i]),this.underChild.toCHTML([n]);const o=this.overChild.getOuterBBox(),r=this.baseChild.getOuterBBox(),a=this.underChild.getOuterBBox();this.adjustBaseHeight(i,r);const h=this.getOverKU(r,o)[0],l=this.getUnderKV(r,a)[0],d=this.getDelta(this.overChild),c=this.getDelta(this.underChild,!0);this.adaptor.setStyle(e,"paddingBottom",this.em(h)),this.adaptor.setStyle(n,"paddingTop",this.em(l)),this.setDeltaW([i,n,e],this.getDeltaW([r,a,o],[0,this.isLineBelow?0:-c,this.isLineAbove?0:d])),this.adjustOverDepth(e,o),this.adjustUnderDepth(n,a)}}).kind=di.prototype.kind,t.styles={'mjx-munderover:not([limits="false"])':{"padding-top":".1em"},'mjx-munderover:not([limits="false"]) > *':{display:"block"}},t}(),fi={base:"subList",subList:"supList",supList:"subList",psubList:"psupList",psupList:"psubList"},xi=["sup","sup","psup","psub"];function bi(t){return class extends t{combinePrePost(t,e){const s=new $t(t);return s.combine(e,0,0),s}getScriptData(){const t=this.scriptData={base:null,sub:$t.empty(),sup:$t.empty(),psub:$t.empty(),psup:$t.empty(),numPrescripts:0,numScripts:0},e=this.getScriptBBoxLists();this.combineBBoxLists(t.sub,t.sup,e.subList,e.supList),this.combineBBoxLists(t.psub,t.psup,e.psubList,e.psupList),t.base=e.base[0],t.numPrescripts=e.psubList.length,t.numScripts=e.subList.length}getScriptBBoxLists(){const t={base:[],subList:[],supList:[],psubList:[],psupList:[]};let e="base";for(const s of this.childNodes)s.node.isKind("mprescripts")?e="psubList":(t[e].push(s.getOuterBBox()),e=fi[e]);return this.firstPrescript=t.subList.length+t.supList.length+2,this.padLists(t.subList,t.supList),this.padLists(t.psubList,t.psupList),t}padLists(t,e){t.length>e.length&&e.push($t.empty())}combineBBoxLists(t,e,s,i){for(let n=0;n<s.length;n++){const[o,r,a]=this.getScaledWHD(s[n]),[h,l,d]=this.getScaledWHD(i[n]),c=Math.max(o,h);t.w+=c,e.w+=c,r>t.h&&(t.h=r),a>t.d&&(t.d=a),l>e.h&&(e.h=l),d>e.d&&(e.d=d)}}getScaledWHD(t){const{w:e,h:s,d:i,rscale:n}=t;return[e*n,s*n,i*n]}getCombinedUV(){const t=this.scriptData,e=this.combinePrePost(t.sub,t.psub),s=this.combinePrePost(t.sup,t.psup);return this.getUVQ(e,s)}addPrescripts(t,e,s){const i=this.scriptData;if(i.numPrescripts){const n=this.font.params.scriptspace;t.combine(i.psup,n,e),t.combine(i.psub,n,s)}return t}addPostscripts(t,e,s){const i=this.scriptData;if(i.numScripts){const n=t.w;t.combine(i.sup,n,e),t.combine(i.sub,n,s),t.w+=this.font.params.scriptspace}return t}constructor(...t){super(...t),this.scriptData=null,this.firstPrescript=0,this.getScriptData()}appendScripts(t){t.empty();const[e,s]=this.getCombinedUV();return this.addPrescripts(t,e,s),t.append(this.scriptData.base),this.addPostscripts(t,e,s),t.clean(),t}computeLineBBox(t){const e=this.baseChild.breakCount,s=this.baseChild.getLineBBox(t).copy();let i=s;const[n,o]=this.getCombinedUV();return 0===t?(i=qt.from(this.addPrescripts($t.zero(),n,o),this.linebreakOptions.lineleading),i.append(s),this.addLeftBorders(i),i.L=this.bbox.L):t===e&&(i=this.addPostscripts(i,n,o),this.addRightBorders(i),i.R=this.bbox.R),this.addMiddleBorders(i),i}getUVQ(t,e){if(!this.UVQ){let[s,i,n]=[0,0,0];0===t.w?s=this.getU():0===e.w?s=-this.getV():[s,i,n]=super.getUVQ(t,e),this.UVQ=[s,i,n]}return this.UVQ}}}const yi=MathJax._.core.MmlTree.MmlNodes.mmultiscripts,ki=yi.MmlMmultiscripts,Bi=(yi.MmlMprescripts,yi.MmlNone,function(){var t;const e=bi(oi);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;const e=this.standardChtmlNodes(t),s=this.scriptData,i=this.node.getProperty("scriptalign")||"right left",[n,o]=fe(i+" "+i),[r,a]=this.getCombinedUV();if(s.numPrescripts){const t=this.addScripts(this.dom[0],r,-a,!0,s.psub,s.psup,this.firstPrescript,s.numPrescripts);"right"!==n&&this.adaptor.setAttribute(t,"script-align",n)}if(this.childNodes[0].toCHTML(e),s.numScripts){const t=this.addScripts(this.dom[this.dom.length-1],r,-a,!1,s.sub,s.sup,1,s.numScripts);"left"!==o&&this.adaptor.setAttribute(t,"script-align",o)}}addScripts(t,e,s,i,n,o,r,a){const h=this.adaptor,l=e-o.d+(s-n.h),d=e<0&&0===s?n.h+e:e,c=l>0?{style:{height:this.em(l)}}:{},m=d?{style:{"vertical-align":this.em(d)}}:{},p=this.html("mjx-row"),u=this.html("mjx-row",c),g=this.html("mjx-row"),f="mjx-"+(i?"pre":"")+"scripts";let x=r+2*a;for(;r<x;)this.childNodes[r++].toCHTML([h.append(g,this.html("mjx-cell"))]),this.childNodes[r++].toCHTML([h.append(p,this.html("mjx-cell"))]);return h.append(t,this.html(f,m,[p,u,g]))}}).kind=ki.prototype.kind,t.styles={"mjx-prescripts":{display:"inline-table","padding-left":".05em"},"mjx-scripts":{display:"inline-table","padding-right":".05em"},"mjx-prescripts > mjx-row > mjx-cell":{"text-align":"right"},'[script-align="left"] > mjx-row > mjx-cell':{"text-align":"left"},'[script-align="center"] > mjx-row > mjx-cell':{"text-align":"center"},'[script-align="right"] > mjx-row > mjx-cell':{"text-align":"right"}},t}()),Ci=MathJax._.util.numeric,wi=Ci.sum,vi=Ci.max;let Mi=.333;function Si(t){return class extends t{get tableRows(){return this.childNodes}findContainer(){let t=this,e=t.parent;for(;e&&(e.node.notParent||e.node.isKind("mrow"));)t=e,e=e.parent;this.container=e,this.containerI=t.node.childPosition()}getPercentageWidth(){if(this.hasLabels)this.bbox.pwidth=$t.fullWidth;else{const t=this.node.attributes.get("width");ge(t)&&(this.bbox.pwidth=t)}}stretchRows(){const t=this.node.attributes.get("equalrows"),e=t?this.getEqualRowHeight():0,{H:s,D:i}=t?this.getTableData():{H:[0],D:[0]},n=this.tableRows;for(let o=0;o<this.numRows;o++){const r=t?[(e+s[o]-i[o])/2,(e-s[o]+i[o])/2]:null;n[o].stretchChildren(r)}}stretchColumns(){for(let t=0;t<this.numCols;t++){const e="number"==typeof this.cWidths[t]?this.cWidths[t]:null;this.stretchColumn(t,e),null!==e&&this.breakColumn(t,e)}}stretchColumn(t,e){let s=[];for(const e of this.tableRows){const i=e.getChild(t);if(i){const t=i.childNodes[0];t.stretch.dir===Et.None&&t.canStretch(Et.Horizontal)&&s.push(t)}}let i=s.length,n=this.childNodes.length;if(i&&n>1&&null===e){e=0;let s=i>1&&i===n;for(const i of this.tableRows){const n=i.getChild(t);if(n){const t=n.childNodes[0],i=t.stretch.dir===Et.None;if(s||i){const{w:s}=t.getBBox(i);s>e&&(e=s)}}}}if(null!==e)for(const t of s)t.coreMO().getStretchedVariant([Math.max(e,t.getBBox().w)/t.coreRScale()])}breakColumn(t,e){if("linebreak"!==this.jax.math.root.attributes.get("overflow")||!this.jax.math.display)return;const{D:s}=this.getTableData();let i=0,n=0;for(const o of this.tableRows){const r=o.getChild(t);if(r&&r.getBBox().w>e){r.childNodes[0].breakToWidth(e);const t=r.getBBox();s[i]=Math.max(s[i],t.d),t.w>n&&(n=t.w)}i++}n>this.cWidths[t]&&(this.cWidths[t]=n)}getTableData(){if(this.data)return this.data;const t=new Array(this.numRows).fill(0),e=new Array(this.numRows).fill(0),s=new Array(this.numCols).fill(0),i=new Array(this.numRows),n=new Array(this.numRows),o=[0],r=this.tableRows;for(let a=0;a<r.length;a++){let h=0;const l=r[a],d=l.node.attributes.get("rowalign");for(let i=0;i<l.numCells;i++){const n=l.getChild(i);h=this.updateHDW(n,i,a,d,t,e,s,h),this.recordPWidthCell(n,i)}i[a]=t[a],n[a]=e[a],l.labeled&&(h=this.updateHDW(l.childNodes[0],0,a,d,t,e,o,h)),this.extendHD(a,t,e,h),this.extendHD(a,i,n,h)}const a=o[0];return this.data={H:t,D:e,W:s,NH:i,ND:n,L:a},this.data}updateHDW(t,e,s,i,n,o,r,a){let{h,d:l,w:d}=t.getBBox();const c=t.parent.bbox.rscale;1!==t.parent.bbox.rscale&&(h*=c,l*=c,d*=c),this.node.getProperty("useHeight")&&(h<.75&&(h=.75),l<.25&&(l=.25));let m=0;return"baseline"!==(i=t.node.attributes.get("rowalign")||i)&&"axis"!==i&&(m=h+l,h=l=0),h>n[s]&&(n[s]=h),l>o[s]&&(o[s]=l),m>a&&(a=m),r&&d>r[e]&&(r[e]=d),a}extendHD(t,e,s,i){const n=(i-(e[t]+s[t]))/2;n<1e-5||(e[t]+=n,s[t]+=n)}recordPWidthCell(t,e){t.childNodes[0]&&t.childNodes[0].getBBox().pwidth&&this.pwidthCells.push([t,e])}setColumnPWidths(){const t=this.cWidths;for(const[e,s]of this.pwidthCells)e.setChildPWidths(!1,t[s])&&(e.invalidateBBox(),e.getBBox())}getBBoxHD(t){const[e,s]=this.getAlignmentRow();if(null===s){const s=this.font.params.axis_height,i=t/2;return{top:[0,t],center:[i,i],bottom:[t,0],baseline:[i,i],axis:[i+s,i-s]}[e]||[i,i]}{const i=this.getVerticalPosition(s,e);return[i,t-i]}}getBBoxLR(){var t;if(this.hasLabels){const t=this.node.attributes,e=t.get("side");let[s,i]=this.getPadAlignShift(e);const n=this.hasLabels&&!!t.get("data-width-includes-label");return n&&this.frame&&this.fSpace[0]&&(s-=this.fSpace[0]),"center"!==i||n?"left"===e?[s,0]:[0,s]:[s,s]}return[(null===(t=this.bbox)||void 0===t?void 0:t.L)||0,0]}getPadAlignShift(t){const{L:e}=this.getTableData();let s=e+this.length2em(this.node.attributes.get("minlabelspacing"));const[i,n]=null==this.styles?["",""]:[this.styles.get("padding-left"),this.styles.get("padding-right")];(i||n)&&(s=Math.max(s,this.length2em(i||"0"),this.length2em(n||"0")));let[o,r]=this.getAlignShift();return o===t&&(r="left"===t?Math.max(s,r)-s:Math.min(-s,r)+s),[s,o,r]}getWidth(){return this.pWidth||this.getBBox().w}adjustWideTable(){const t=this.node.attributes;if("auto"!==t.get("width"))return;const[e,s]=this.getPadAlignShift(t.get("side")),i=Math.max(this.containerWidth/10,this.containerWidth-e-("center"===s?e:0));this.naturalWidth()>i&&this.adjustColumnWidths(i)}naturalWidth(){const t=this.getComputedWidths();return wi(t.concat(this.cLines,this.cSpace))+2*this.fLine+this.fSpace[0]+this.fSpace[2]}getEqualRowHeight(){const{H:t,D:e}=this.getTableData(),s=Array.from(t.keys()).map((s=>t[s]+e[s]));return Math.max.apply(Math,s)}getComputedWidths(){const t=this.getTableData().W;let e=Array.from(t.keys()).map((e=>"number"==typeof this.cWidths[e]?this.cWidths[e]:t[e]));return this.node.attributes.get("equalcolumns")&&(e=Array(e.length).fill(vi(e))),e}getColumnWidths(){const t=this.node.attributes.get("width");if(this.node.attributes.get("equalcolumns"))return this.getEqualColumns(t);const e=this.getColumnAttributes("columnwidth",0);return"auto"===t?this.getColumnWidthsAuto(e):ge(t)?this.getColumnWidthsPercent(e):this.getColumnWidthsFixed(e,this.length2em(t))}getEqualColumns(t){const e=Math.max(1,this.numCols);let s;if("auto"===t){const{W:t}=this.getTableData();s=vi(t)}else if(ge(t))s=this.percent(1/e);else{const i=wi([].concat(this.cLines,this.cSpace))+this.fSpace[0]+this.fSpace[2];s=Math.max(0,this.length2em(t)-i)/e}return Array(this.numCols).fill(s)}getColumnWidthsAuto(t){return t.map((t=>"auto"===t||"fit"===t?null:ge(t)?t:this.length2em(t)))}getColumnWidthsPercent(t){const e=t.indexOf("fit")>=0,{W:s}=e?this.getTableData():{W:null};return Array.from(t.keys()).map((i=>{const n=t[i];return"fit"===n?null:"auto"===n?e?s[i]:null:ge(n)?n:this.length2em(n)}))}getColumnWidthsFixed(t,e){const s=Array.from(t.keys()),i=s.filter((e=>"fit"===t[e])),n=s.filter((e=>"auto"===t[e])),o=i.length||n.length,{W:r}=o?this.getTableData():{W:null},a=e-wi([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let h=a;s.forEach((e=>{const s=t[e];h-="fit"===s||"auto"===s?r[e]:this.length2em(s,a)}));const l=o&&h>0?h/o:0;return s.map((e=>{const s=t[e];return"fit"===s?r[e]+l:"auto"===s?r[e]+(0===i.length?l:0):this.length2em(s,a)}))}adjustColumnWidths(t){const{W:e}=this.getTableData(),s=this.getColumnAttributes("columnwidth",0),i=Array.from(s.keys()),n=[...i.filter((t=>"fit"===s[t])).sort(((t,s)=>e[s]-e[t])),...i.filter((t=>"auto"===s[t])).sort(((t,s)=>e[s]-e[t])),...i.filter((t=>ge(s[t]))).sort(((t,s)=>e[s]-e[t])),...i.filter((t=>"fit"!==s[t]&&"auto"!==s[t]&&!ge(s[t]))).sort(((t,s)=>e[s]-e[t]))];if(!n.length)return;this.cWidths=i.map((t=>"number"==typeof this.cWidths[t]?this.cWidths[t]:e[t]));const o=t-wi([].concat(this.cLines,this.cSpace))-this.fSpace[0]-this.fSpace[2];let r=wi(this.cWidths)-o,a=0,h=0;for(;h<n.length&&(a+=e[n[h++]],!(a&&r/a<Mi)););r=1-r/a,n.slice(0,h).forEach((t=>this.cWidths[t]*=r))}getVerticalPosition(t,e){const s=this.node.attributes.get("equalrows"),{H:i,D:n}=this.getTableData(),o=s?this.getEqualRowHeight():0,r=this.getRowHalfSpacing();let a=this.fLine;for(let e=0;e<t;e++)a+=r[e]+(s?o:i[e]+n[e])+r[e+1]+this.rLines[e];const[h,l]=s?[(o+i[t]-n[t])/2,(o-i[t]+n[t])/2]:[i[t],n[t]];return a+={top:0,center:r[t]+(h+l)/2,bottom:r[t]+h+l+r[t+1],baseline:r[t]+h,axis:r[t]+h-.25}[e]||0,a}getFrameSpacing(){const t=this.fframe?this.convertLengths(this.getAttributeArray("framespacing")):[0,0];t[2]=t[0];const e=this.node.attributes.get("data-array-padding");if(e){const[s,i]=this.convertLengths(fe(e));t[0]=s,t[2]=i}return t}getEmHalfSpacing(t,e,s=1){const i=this.addEm(e,2/s);return i.unshift(this.em(t[0]*s)),i.push(this.em(t[1]*s)),i}getRowHalfSpacing(){const t=this.rSpace.map((t=>t/2));return t.unshift(this.fSpace[1]),t.push(this.fSpace[1]),t}getColumnHalfSpacing(){const t=this.cSpace.map((t=>t/2));return t.unshift(this.fSpace[0]),t.push(this.fSpace[2]),t}getAlignmentRow(){const[t,e]=fe(this.node.attributes.get("align"));if(null==e)return[t,null];let s=parseInt(e);return s<0&&(s+=this.numRows+1),[t,s<1||s>this.numRows?null:s-1]}getColumnAttributes(t,e=1){const s=this.numCols-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getRowAttributes(t,e=1){const s=this.numRows-e,i=this.getAttributeArray(t);if(0===i.length)return null;for(;i.length<s;)i.push(i[i.length-1]);return i.length>s&&i.splice(s),i}getAttributeArray(t){const e=this.node.attributes.get(t);return e?fe(e):[this.node.attributes.getDefault(t)]}addEm(t,e=1){return t?t.map((t=>this.em(t/e))):null}convertLengths(t){return t?t.map((t=>this.length2em(t))):null}constructor(t,e,s=null){super(t,e,s),this.numCols=0,this.numRows=0,this.data=null,this.pwidthCells=[],this.pWidth=0,this.numCols=vi(this.tableRows.map((t=>t.numCells))),this.numRows=this.childNodes.length,this.hasLabels=this.childNodes.reduce(((t,e)=>t||e.node.isKind("mlabeledtr")),!1),this.findContainer(),this.isTop=!this.container||this.container.node.isKind("math")&&!this.container.parent,this.isTop&&(this.jax.table=this),this.getPercentageWidth();const i=this.node.attributes,n=i.get("frame");this.frame="none"!==n,this.fframe=this.frame||void 0!==i.get("data-frame-styles"),this.fLine=this.frame?.07:0,this.fSpace=this.getFrameSpacing(),this.cSpace=this.convertLengths(this.getColumnAttributes("columnspacing")),this.rSpace=this.convertLengths(this.getRowAttributes("rowspacing")),this.cLines=this.getColumnAttributes("columnlines").map((t=>"none"===t?0:.07)),this.rLines=this.getRowAttributes("rowlines").map((t=>"none"===t?0:.07)),this.cWidths=this.getColumnWidths(),this.adjustWideTable(),this.stretchColumns(),this.stretchRows()}getStyles(){super.getStyles();const t=this.node.attributes.get("data-frame-styles");if(!t)return;this.styles||(this.styles=new ae(""));const e=t.split(/ /);for(const t of re.keys()){const s=e[t];"none"!==s&&this.styles.set(`border-${re[t]}`,`.07em ${s}`)}}computeBBox(t,e=!1){const{H:s,D:i}=this.getTableData();let n,o;if(this.node.attributes.get("equalrows")){const t=this.getEqualRowHeight();n=wi([].concat(this.rLines,this.rSpace))+t*this.numRows}else n=wi(s.concat(i,this.rLines,this.rSpace));n+=2*(this.fLine+this.fSpace[1]),o=this.naturalWidth();const r=this.node.attributes.get("width");"auto"!==r&&(o=Math.max(this.length2em(r,0)+2*this.fLine,o));let[a,h]=this.getBBoxHD(n);t.h=a,t.d=h,t.w=o;let[l,d]=this.getBBoxLR();t.L=l,t.R=d,ge(r)||this.setColumnPWidths()}setChildPWidths(t,e,s){const i=this.node.attributes.get("width");if(!ge(i))return!1;this.hasLabels||(this.bbox.pwidth="",this.container.bbox.pwidth="");const{w:n,L:o,R:r}=this.bbox,a=this.node.attributes.get("data-width-includes-label"),h=Math.max(n,this.length2em(i,Math.max(e,o+n+r)))-(a?o+r:0),l=this.node.attributes.get("equalcolumns")?Array(this.numCols).fill(this.percent(1/Math.max(1,this.numCols))):this.getColumnAttributes("columnwidth",0);return this.cWidths=this.getColumnWidthsFixed(l,h),this.pWidth=this.naturalWidth(),this.isTop&&(this.bbox.w=this.pWidth),this.setColumnPWidths(),this.pWidth!==n&&this.parent.invalidateBBox(),this.pWidth!==n}getAlignShift(){return this.isTop?super.getAlignShift():[this.container.getChildAlign(this.containerI),0]}}}const ji=MathJax._.core.MmlTree.MmlNodes.mtable.MmlMtable,Li=function(){var t;const e=Si(Ce);return t=class extends e{constructor(t,e,s=null){super(t,e,s),this.itable=this.html("mjx-itable"),this.labels=this.html("mjx-itable")}getAlignShift(){const t=super.getAlignShift();return this.isTop||(t[1]=0),t}toCHTML(t){const e=this.standardChtmlNodes(t);this.adaptor.append(e[0],this.html("mjx-table",{},[this.itable]));for(const t of this.childNodes)t.toCHTML([this.itable]);this.padRows(),this.handleColumnSpacing(),this.handleColumnLines(),this.handleColumnWidths(),this.handleRowSpacing(),this.handleRowLines(),this.handleRowHeights(),this.handleFrame(),this.handleWidth(),this.handleLabels(),this.handleAlign(),this.handleJustify(),this.shiftColor()}shiftColor(){const t=this.adaptor,e=t.getStyle(this.dom[0],"backgroundColor");e&&(t.setStyle(this.dom[0],"backgroundColor",""),t.setStyle(this.itable,"backgroundColor",e))}padRows(){const t=this.adaptor;for(const e of t.childNodes(this.itable))for(;t.childNodes(e).length<this.numCols;)t.append(e,this.html("mjx-mtd",{extra:!0}))}handleColumnSpacing(){const t=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,e=this.getEmHalfSpacing([this.fSpace[0],this.fSpace[2]],this.cSpace,t);for(const t of this.tableRows){let s=0;for(const i of t.tableCells){const n=e[s++],o=e[s],r=i?i.dom[0]:this.adaptor.childNodes(t.dom[0])[s];(s>1&&"0.4em"!==n||"0"!==n&&1===s)&&this.adaptor.setStyle(r,"paddingLeft",n),(s<this.numCols&&"0.4em"!==o||"0"!==o&&s===this.numCols)&&this.adaptor.setStyle(r,"paddingRight",o)}}}handleColumnLines(){if("none"===this.node.attributes.get("columnlines"))return;const t=this.getColumnAttributes("columnlines");for(const e of this.childNodes){let s=0;for(const i of this.adaptor.childNodes(e.dom[0]).slice(1)){const e=t[s++];"none"!==e&&this.adaptor.setStyle(i,"borderLeft",".07em "+e)}}}handleColumnWidths(){for(const t of this.childNodes){let e=0;for(const s of this.adaptor.childNodes(t.dom[0])){const t=this.cWidths[e++];if(null!==t){const e="number"==typeof t?this.em(t):t;this.adaptor.setStyle(s,"width",e),this.adaptor.setStyle(s,"maxWidth",e),this.adaptor.setStyle(s,"minWidth",e)}}}}handleRowSpacing(){const t=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,e=this.getEmHalfSpacing([this.fSpace[1],this.fSpace[1]],this.rSpace,t),s=this.fframe;let i=0;for(const t of this.childNodes){const n=e[i++],o=e[i];for(const e of t.childNodes)(i>1&&"0.215em"!==n||s&&1===i)&&this.adaptor.setStyle(e.dom[0],"paddingTop",n),(i<this.numRows&&"0.215em"!==o||s&&i===this.numRows)&&this.adaptor.setStyle(e.dom[0],"paddingBottom",o)}}handleRowLines(){if("none"===this.node.attributes.get("rowlines"))return;const t=this.getRowAttributes("rowlines");let e=0;for(const s of this.childNodes.slice(1)){const i=t[e++];if("none"!==i)for(const t of this.adaptor.childNodes(s.dom[0]))this.adaptor.setStyle(t,"borderTop",".07em "+i)}}handleRowHeights(){this.node.attributes.get("equalrows")&&this.handleEqualRows()}handleEqualRows(){const t=this.getRowHalfSpacing(),{H:e,D:s,NH:i,ND:n}=this.getTableData(),o=this.getEqualRowHeight();for(let r=0;r<this.numRows;r++){const a=this.childNodes[r];this.setRowHeight(a,o+t[r]+t[r+1]+this.rLines[r]),o!==i[r]+n[r]&&this.setRowBaseline(a,o,(o-e[r]+s[r])/2)}}setRowHeight(t,e){this.adaptor.setStyle(t.dom[0],"height",this.em(e))}setRowBaseline(t,e,s){const i=t.node.attributes.get("rowalign");for(const n of t.childNodes)if(this.setCellBaseline(n,i,e,s))break}setCellBaseline(t,e,s,i){const n=t.node.attributes.get("rowalign");if("baseline"===n||"axis"===n){const n=this.adaptor,o=n.lastChild(t.dom[0]);n.setStyle(o,"height",this.em(s)),n.setStyle(o,"verticalAlign",this.em(-i));const r=t.parent;if(!(r.node.isKind("mlabeledtr")&&t===r.childNodes[0]||"baseline"!==e&&"axis"!==e))return!0}return!1}handleFrame(){if(this.frame&&this.fLine){const t=this.node.attributes.get("frame");this.adaptor.setStyle(this.itable,"border",`${this.em(this.fLine)} ${t}`)}}handleWidth(){const t=this.adaptor,e=this.dom[0],{w:s,L:i,R:n}=this.getBBox();t.setStyle(e,"minWidth",this.em(i+s+n));let o=this.node.attributes.get("width");if(ge(o))t.setStyle(e,"width",""),t.setAttribute(e,"width","full");else if(!this.hasLabels){if("auto"===o)return;o=this.em(this.length2em(o)+2*this.fLine)}const r=t.firstChild(e);if(t.setStyle(r,"width",o),t.setStyle(r,"minWidth",this.em(s)),i||n){t.setStyle(e,"margin","");const s=this.node.attributes.get("data-width-includes-label")?"padding":"margin";i===n?t.setStyle(r,s,"0 "+this.em(n)):t.setStyle(r,s,"0 "+this.em(n)+" 0 "+this.em(i))}t.setAttribute(this.itable,"width","full")}handleAlign(){const[t,e]=this.getAlignmentRow(),s=this.dom[0];if(null===e)"axis"!==t&&this.adaptor.setAttribute(s,"align",t);else{const i=this.getVerticalPosition(e,t);this.adaptor.setAttribute(s,"align","top"),this.adaptor.setStyle(s,"verticalAlign",this.em(i))}}handleJustify(){const t=this.getAlignShift()[0];"center"!==t&&this.adaptor.setAttribute(this.dom[0],"justify",t)}handleLabels(){if(!this.hasLabels)return;const t=this.labels,e=this.node.attributes,s=this.adaptor,i=e.get("side");s.setAttribute(this.dom[0],"side",i),s.setAttribute(t,"align",i),s.setStyle(t,i,"0");const[n,o]=this.addLabelPadding(i);if(o){const t=s.firstChild(this.dom[0]);this.setIndent(t,n,o)}this.updateRowHeights(),this.addLabelSpacing()}addLabelPadding(t){const[,e,s]=this.getPadAlignShift(t),i={};if("right"===t&&!this.node.attributes.get("data-width-includes-label")){const t=this.node.attributes.get("width"),{w:e,L:s,R:n}=this.getBBox();i.style={width:ge(t)?"calc("+t+" + "+this.em(s+n)+")":this.em(s+e+n)}}return this.adaptor.append(this.dom[0],this.html("mjx-labels",i,[this.labels])),[e,s]}updateRowHeights(){let{H:t,D:e,NH:s,ND:i}=this.getTableData();const n=this.getRowHalfSpacing();for(let o=0;o<this.numRows;o++){const r=this.childNodes[o];this.setRowHeight(r,t[o]+e[o]+n[o]+n[o+1]+this.rLines[o]),t[o]!==s[o]||e[o]!==i[o]?this.setRowBaseline(r,t[o]+e[o],e[o]):r.node.isKind("mlabeledtr")&&this.setCellBaseline(r.childNodes[0],"",t[o]+e[o],e[o])}}addLabelSpacing(){const t=this.adaptor,e=this.node.attributes.get("equalrows"),{H:s,D:i}=this.getTableData(),n=e?this.getEqualRowHeight():0,o=this.getRowHalfSpacing();let r=this.fLine,a=t.firstChild(this.labels);for(let h=0;h<this.numRows;h++){this.childNodes[h].node.isKind("mlabeledtr")?(r&&t.insert(this.html("mjx-mtr",{style:{height:this.em(r)}}),a),t.setStyle(a,"height",this.em((e?n:s[h]+i[h])+o[h]+o[h+1])),a=t.next(a),r=this.rLines[h]):r+=o[h]+(e?n:s[h]+i[h])+o[h+1]+this.rLines[h]}}},t.kind=ji.prototype.kind,t.styles={"mjx-mtable":{"vertical-align":".25em","text-align":"center",position:"relative","box-sizing":"border-box","border-spacing":0,"border-collapse":"collapse"},'mjx-mstyle[size="s"] mjx-mtable':{"vertical-align":".354em"},"mjx-labels":{position:"absolute",left:0,top:0},"mjx-table":{display:"inline-block","vertical-align":"-.5ex","box-sizing":"border-box"},"mjx-table > mjx-itable":{"vertical-align":"middle","text-align":"left","box-sizing":"border-box"},"mjx-labels > mjx-itable":{position:"absolute",top:0},'mjx-mtable[justify="left"]':{"text-align":"left"},'mjx-mtable[justify="right"]':{"text-align":"right"},'mjx-mtable[justify="left"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="left"][side="right"]':{"padding-left":"0 ! important"},'mjx-mtable[justify="right"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="right"][side="right"]':{"padding-left":"0 ! important"},"mjx-mtable[align]":{"vertical-align":"baseline"},'mjx-mtable[align="top"] > mjx-table':{"vertical-align":"top"},'mjx-mtable[align="bottom"] > mjx-table':{"vertical-align":"bottom"},'mjx-mtable[side="right"] mjx-labels':{"min-width":"100%"}},t}();function Ni(t){return class extends t{get numCells(){return this.childNodes.length}get labeled(){return!1}get tableCells(){return this.childNodes}getChild(t){return this.childNodes[t]}getChildBBoxes(){return this.childNodes.map((t=>t.getBBox()))}stretchChildren(t=null){let e=[],s=this.labeled?this.childNodes.slice(1):this.childNodes;for(const t of s){const s=t.childNodes[0];s.canStretch(Et.Vertical)&&e.push(s)}let i=e.length,n=this.childNodes.length;if(i&&n>1&&!t){let e=0,o=0,r=i>1&&i===n;for(const t of s){const s=t.childNodes[0],i=s.stretch.dir===Et.None;if(r||i){const{h:t,d:n}=s.getBBox(i);t>e&&(e=t),n>o&&(o=n)}}t=[e,o]}if(t)for(const s of e){const e=s.coreRScale();s.coreMO().getStretchedVariant(t.map((t=>t*e)))}}get fixesPWidth(){return!1}}}function Ti(t){return class extends t{get numCells(){return Math.max(0,this.childNodes.length-1)}get labeled(){return!0}get tableCells(){return this.childNodes.slice(1)}getChild(t){return this.childNodes[t+1]}getChildBBoxes(){return this.childNodes.slice(1).map((t=>t.getBBox()))}}}const Ai=MathJax._.core.MmlTree.MmlNodes.mtr,Di=Ai.MmlMtr,Oi=Ai.MmlMlabeledtr,Wi=function(){var t;const e=Ni(Ce);return(t=class extends e{toCHTML(t){super.toCHTML(t);const e=this.node.attributes.get("rowalign");"baseline"!==e&&this.adaptor.setAttribute(this.dom[0],"rowalign",e)}}).kind=Di.prototype.kind,t.styles={"mjx-mtr":{display:"table-row"},'mjx-mtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},t}(),Pi=function(){var t;const e=Ti(Wi);return(t=class extends e{toCHTML(t){super.toCHTML(t);const e=this.adaptor.firstChild(this.dom[0]);if(e){this.adaptor.remove(e);const t=this.node.attributes.get("rowalign"),s="baseline"!==t&&"axis"!==t?{rowalign:t}:{},i=this.html("mjx-mtr",s,[e]);this.adaptor.append(this.parent.labels,i)}}markUsed(){super.markUsed(),this.jax.wrapperUsage.add(Wi.kind)}}).kind=Oi.prototype.kind,t.styles={"mjx-mlabeledtr":{display:"table-row"},'mjx-mlabeledtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mlabeledtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mlabeledtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mlabeledtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mlabeledtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},t}();function Ri(t){return class extends t{get fixesPWidth(){return!1}invalidateBBox(){this.bboxComputed=!1,this.lineBBox=[]}getWrapWidth(t){const e=this.parent.parent,s=this.parent,i=this.node.childPosition()-(s.labeled?1:0);return"number"==typeof e.cWidths[i]?e.cWidths[i]:e.getTableData().W[i]}getChildAlign(t){return this.node.attributes.get("columnalign")}}}const Hi=MathJax._.core.MmlTree.MmlNodes.mtd.MmlMtd,Ei=function(){var t;const e=Ri(Ce);return(t=class extends e{toCHTML(t){super.toCHTML(t);const e=this.node.attributes.get("rowalign"),s=this.node.attributes.get("columnalign");e!==this.parent.node.attributes.get("rowalign")&&this.adaptor.setAttribute(this.dom[0],"rowalign",e),"center"===s||"mlabeledtr"===this.parent.kind&&this===this.parent.childNodes[0]&&s===this.parent.parent.node.attributes.get("side")||this.adaptor.setStyle(this.dom[0],"textAlign",s),this.parent.parent.node.getProperty("useHeight")&&this.adaptor.append(this.dom[0],this.html("mjx-tstrut"))}}).kind=Hi.prototype.kind,t.styles={"mjx-mtd":{display:"table-cell","text-align":"center",padding:".215em .4em"},"mjx-mtd:first-child":{"padding-left":0},"mjx-mtd:last-child":{"padding-right":0},"mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd":{"padding-top":0},"mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd":{"padding-bottom":0},"mjx-tstrut":{display:"inline-block",height:"1em","vertical-align":"-.25em"},'mjx-labels[align="left"] > mjx-mtr > mjx-mtd':{"text-align":"left"},'mjx-labels[align="right"] > mjx-mtr > mjx-mtd':{"text-align":"right"},"mjx-mtd[extra]":{padding:0},'mjx-mtd[rowalign="top"]':{"vertical-align":"top"},'mjx-mtd[rowalign="center"]':{"vertical-align":"middle"},'mjx-mtd[rowalign="bottom"]':{"vertical-align":"bottom"},'mjx-mtd[rowalign="baseline"]':{"vertical-align":"baseline"},'mjx-mtd[rowalign="axis"]':{"vertical-align":".25em"}},t}(),Fi={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:(t,e)=>{e.clearTimer.has(t)&&(clearTimeout(e.clearTimer.get(t)),e.clearTimer.delete(t)),e.hoverTimer.has(t)&&(clearTimeout(e.hoverTimer.get(t)),e.hoverTimer.delete(t))}};function Ii(t){return class extends t{get selected(){const t=this.node.attributes.get("selection"),e=Math.max(1,Math.min(this.childNodes.length,t))-1;return this.childNodes[e]||this.wrap(this.node.selected)}getParameters(){const t=this.node.attributes.get("data-offsets");let[e,s]=fe(t||"");this.tipDx=this.length2em(e||Fi.dx),this.tipDy=this.length2em(s||Fi.dy)}constructor(t,e,s=null){super(t,e,s);const i=this.constructor.actions,n=this.node.attributes.get("actiontype"),[o,r]=i.get(n)||[(t,e)=>{},{}];this.action=o,this.data=r,this.getParameters()}computeBBox(t,e=!1){t.updateFrom(this.selected.getOuterBBox()),this.selected.setChildPWidths(e)}get breakCount(){return this.node.isEmbellished?this.selected.coreMO().embellishedBreakCount:this.selected.breakCount}computeLineBBox(t){return this.getChildLineBBox(this.selected,t)}}}const _i=MathJax._.core.MmlTree.MmlNodes.maction.MmlMaction,Vi=function(){var t;const e=Ii(Ce);return(t=class extends e{setEventHandler(t,e,s=null){(s?[s]:this.dom).forEach((s=>s.addEventListener(t,e)))}Em(t){return this.em(t)}toCHTML(t){if(this.toEmbellishedCHTML(t))return;const e=this.standardChtmlNodes(t);this.selected.toCHTML(e),this.action(this,this.data)}}).kind=_i.prototype.kind,t.styles={"mjx-maction":{position:"relative"},"mjx-maction > mjx-tool":{display:"none",position:"absolute",bottom:0,right:0,width:0,height:0,"z-index":500},"mjx-tool > mjx-tip":{display:"inline-block","line-height":0,padding:".2em",border:"1px solid #888","background-color":"#F8F8F8",color:"black","box-shadow":"2px 2px 5px #AAAAAA"},"mjx-maction[toggle]":{cursor:"pointer"},"mjx-status":{display:"block",position:"fixed",left:"1em",bottom:"1em","min-width":"25%",padding:".2em .4em",border:"1px solid #888","font-size":"90%","background-color":"#F8F8F8",color:"black"}},t.actions=new Map([["toggle",[(t,e)=>{t.dom.forEach((e=>{t.adaptor.setAttribute(e,"toggle",t.node.attributes.get("selection"))}));const s=t.factory.jax.math,i=t.factory.jax.document,n=t.node;t.setEventHandler("click",(t=>{s.end.node||(s.start.node=s.end.node=s.typesetRoot,s.start.n=s.end.n=0),n.nextToggleSelection(),s.rerender(i,n.attributes.get("data-maction-id")?wt.ENRICHED:wt.RERENDER),t.stopPropagation()}))},{}]],["tooltip",[(t,e)=>{const s=t.childNodes[1];if(s)if(s.node.isKind("mtext")){const e=s.node.getText();t.dom.forEach((s=>t.adaptor.setAttribute(s,"title",e)))}else{const i=t.adaptor;for(const n of t.dom){const o=i.append(n,t.html("mjx-tool",{style:{bottom:t.Em(-t.tipDy),right:t.Em(-t.tipDx)}},[t.html("mjx-tip")]));s.toCHTML([i.firstChild(o)]),t.setEventHandler("mouseover",(t=>{e.stopTimers(n,e);const s=setTimeout((()=>i.setStyle(o,"display","block")),e.postDelay);e.hoverTimer.set(n,s),t.stopPropagation()}),n),t.setEventHandler("mouseout",(t=>{e.stopTimers(n,e);const s=setTimeout((()=>i.setStyle(o,"display","")),e.clearDelay);e.clearTimer.set(n,s),t.stopPropagation()}),n)}}},Fi]],["statusline",[(t,e)=>{const s=t.childNodes[1];if(s&&s.node.isKind("mtext")){const i=t.adaptor,n=s.node.getText();t.dom.forEach((t=>i.setAttribute(t,"statusline",n))),t.setEventHandler("mouseover",(s=>{if(null===e.status){const s=i.body(i.document);e.status=i.append(s,t.html("mjx-status",{},[t.text(n)]))}s.stopPropagation()})),t.setEventHandler("mouseout",(t=>{e.status&&(i.remove(e.status),e.status=null),t.stopPropagation()}))}},{status:null}]]]),t}();function zi(t){return class extends t{constructor(t,e,s=null){super(t,e,s),this.getParameters()}getParameters(){const{width:t,height:e,valign:s,src:i,index:n}=this.node.attributes.getList("width","height","valign","src","index");if(i)this.width="auto"===t?1:this.length2em(t),this.height="auto"===e?1:this.length2em(e),this.valign=this.length2em(s||"0");else{const t=String.fromCodePoint(parseInt(n)),e=this.node.factory;this.charWrapper=this.wrap(e.create("text").setText(t)),this.charWrapper.parent=this}}computeBBox(t,e=!1){this.charWrapper?t.updateFrom(this.charWrapper.getBBox()):(t.w=this.width,t.h=this.height+this.valign,t.d=-this.valign)}}}const Ui=MathJax._.core.MmlTree.MmlNodes.mglyph.MmlMglyph,Ji=function(){var t;const e=zi(Ce);return(t=class extends e{toCHTML(t){const e=this.standardChtmlNodes(t);if(this.charWrapper)return void this.charWrapper.toCHTML(e);const{src:s,alt:i}=this.node.attributes.getList("src","alt"),n={width:this.em(this.width),height:this.em(this.height)};this.valign&&(n.verticalAlign=this.em(this.valign));const o=this.html("img",{src:s,style:n,alt:i,title:i});this.adaptor.append(e[0],o)}}).kind=Ui.prototype.kind,t.styles={"mjx-mglyph > img":{display:"inline-block",border:0,padding:0}},t}();function $i(t){return class extends t{computeBBox(t,e=!1){if(this.childNodes.length){const{w:e,h:s,d:i}=this.childNodes[0].getBBox();t.w=e,t.h=s,t.d=i}}get breakCount(){return this.node.isEmbellished?this.coreMO().embellishedBreakCount:this.childNodes[0].breakCount}}}function qi(t){class e extends t{constructor(t,e,s=null){super(t,e,s),this.rscale=this.getRScale()}computeBBox(t,e=!1){const s=this.node.getXML(),i=this.getHDW(s,"use","force"),{h:n,d:o,w:r}=i?this.splitHDW(i):this.measureXmlNode(s);t.w=r,t.h=n,t.d=o}getHTML(){let t=this.adaptor.clone(this.node.getXML());const e=this.getFontStyles();return(this.getHDW(t,"force")||1!==this.jax.options.scale)&&(t=this.addHDW(t,e)),this.html("mjx-html",{variant:this.parent.variant,style:e},[t])}getHDW(t,e,s=e){const i=this.jax.options.htmlHDW,n=this.adaptor.getAttribute(t,"data-mjx-hdw");return!n||i!==e&&i!==s?null:n}splitHDW(t){const e=1/this.metrics.scale,[s,i,n]=fe(t).map((t=>this.length2em(t||"0")*e));return{h:s,d:i,w:n}}getFontStyles(){var t;const e=this.adaptor,s=this.metrics;return{"font-family":(null===(t=this.parent.styles)||void 0===t?void 0:t.get("font-family"))||s.family||e.fontFamily(e.parent(this.jax.math.start.node))||"initial","font-size":this.jax.fixed(s.em*this.rscale)+"px"}}measureXmlNode(t){const e=this.adaptor,s=this.html("mjx-xml-block",{style:{display:"inline-block"}},[e.clone(t)]),i=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),n=this.getFontStyles(),o=this.html("mjx-measure-xml",{style:n},[i,s]),r=this.jax.container;e.append(e.parent(this.jax.math.start.node),r),e.append(r,o);const a=this.metrics,h=a.em*a.scale*this.rscale,{left:l,right:d,bottom:c,top:m}=e.nodeBBox(s),p=(d-l)/h,u=(e.nodeBBox(i).top-m)/h,g=(c-m)/h-u;return e.remove(r),e.remove(o),{w:p,h:u,d:g}}getStyles(){}getScale(){}getVariant(){}}return e.autoStyle=!1,e.styles={"mjx-measure-xml":{position:"absolute",left:0,top:0,display:"inline-block","line-height":"normal","white-space":"normal"},"mjx-html":{display:"inline-block","line-height":"normal","text-align":"initial","white-space":"initial"},"mjx-html-holder":{display:"block",position:"absolute",top:0,left:0,bottom:0,right:0}},e}const Ki=MathJax._.core.MmlTree.MmlNodes.semantics,Xi=Ki.MmlSemantics,Qi=Ki.MmlAnnotationXML,Yi=Ki.MmlAnnotation,Gi=function(){var t;const e=$i(Ce);return(t=class extends e{toCHTML(t){if(this.toEmbellishedCHTML(t))return;const e=this.standardChtmlNodes(t);this.childNodes.length&&this.childNodes[0].toCHTML(e)}}).kind=Xi.prototype.kind,t}(),Zi=((tn=class extends Ce{toCHTML(t){super.toCHTML(t)}computeBBox(){return this.bbox}}).kind=Yi.prototype.kind,tn);var tn;const en=function(){var t;return(t=class extends Ce{}).kind=Qi.prototype.kind,t.styles={"mjx-annotation-xml":{"font-family":"initial","line-height":"normal"}},t}(),sn=function(){var t;const e=qi(Ce);return(t=class extends e{toCHTML(t){this.markUsed(),this.dom=[this.adaptor.append(t[0],this.getHTML())]}addHDW(t,e){const s=this.jax.options.scale,{h:i,d:n,w:o}=this.bbox,r=s*this.metrics.scale;return e.width=this.em(o*r),e.height=this.em((i+n)*r),e["vertical-align"]=this.em(-n*r),e.position="relative",this.html("mjx-html-holder",{style:{transform:`scale(${this.jax.fixed(s)})`,"transform-origin":"top left"}},[t])}}).kind=Lt.prototype.kind,t}();function nn(t){return class extends t{computeBBox(t,e=!1){super.computeBBox(t,e),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(t.ic=this.childNodes[0].bbox.ic)}}}const on=MathJax._.core.MmlTree.MmlNodes.TeXAtom.TeXAtom,rn=function(){var t;const e=nn(Ce);return(t=class extends e{toCHTML(t){super.toCHTML(t),this.dom.forEach((t=>this.adaptor.setAttribute(t,"texclass",St[this.node.texClass])))}}).kind=on.prototype.kind,t}();function an(t){return class extends t{remappedText(t,e){const s=this.parent.stretch.c;return s?[s]:this.parent.remapChars(this.unicodeChars(t,e))}computeBBox(t,e=!1){const s=this.parent.variant,i=this.node.getText();if("-explicitFont"===s){const e=this.jax.getFontData(this.parent.styles),{w:n,h:o,d:r}=this.jax.measureText(i,s,e);t.h=o,t.d=r,t.w=n}else{const e=this.remappedText(i,s);let n="";t.empty();for(let i=0;i<e.length;i++){let[o,r,a,h]=this.getVariantChar(s,e[i]);if(h.unknown)n+=String.fromCodePoint(e[i]);else{if(n=this.addUtextBBox(t,n,s),this.updateBBox(t,o,r,a),t.ic=h.ic||0,t.sk=h.sk||0,t.dx=h.dx||0,!h.oc||i<e.length-1)continue;const l=this.parent.childNodes;if(this.node!==l[l.length-1].node)continue;const d=this.parent.parent.node;let c=d.isKind("mrow")||d.isInferred?d.childNodes[d.childIndex(this.parent.node)+1]:null;(null==c?void 0:c.isKind("mo"))&&"\u2062"===c.getText()&&(c=d.childNodes[d.childIndex(c)+1]),c&&c.attributes.get("mathvariant")===s?t.oc=h.oc:t.ic=h.oc}}this.addUtextBBox(t,n,s),e.length>1&&(t.sk=0),t.clean()}}addUtextBBox(t,e,s){if(e){const{h:i,d:n,w:o}=this.jax.measureText(e,s);this.updateBBox(t,i,n,o)}return""}updateBBox(t,e,s,i){t.w+=i,e>t.h&&(t.h=e),s>t.d&&(t.d=s)}getStyles(){}getVariant(){}getScale(){}getSpace(){}}}const hn=function(){var t;const e=an(Ce);return t=class extends e{toCHTML(t){this.markUsed();const e=t[0],s=this.adaptor,i=this.parent.variant,n=this.node.getText();if(0===n.length)return;const o=this.getBBox();if("-explicitFont"===i)s.append(e,this.jax.unknownText(n,i,o.w));else{let t="";const r=this.remappedText(n,i),a=r.length>1?this.em(this.parent.getBBox().h):"",h=r.length;for(let n=0;n<h;n++){const l=r[n],d=this.getVariantChar(i,l)[3];if(d.unknown)t+=String.fromCodePoint(l);else{t=this.addUtext(t,i,e);const r=d.ff||(d.f?`${this.font.cssFontPrefix}-${d.f}`:""),c=s.append(e,this.html("mjx-c",{class:this.char(l)+(r?" "+r:"")},[this.text(d.c||String.fromCodePoint(l))]));(n<h-1||o.oc)&&s.setAttribute(c,"noic","true"),a&&s.setStyle(c,"padding-top",a),this.font.charUsage.add([i,l])}}this.addUtext(t,i,e)}}addUtext(t,e,s){return t&&this.adaptor.append(s,this.jax.unknownText(t,e)),""}},t.kind=jt.prototype.kind,t.autoStyle=!1,t.styles={"mjx-c":{display:"inline-block",width:0,"text-align":"right"},"mjx-utext":{display:"inline-block",padding:".75em 0 .2em 0"}},t}(),ln=MathJax._.core.MmlTree.MmlNodes.HtmlNode.HtmlNode,dn=function(){var t;return(t=class extends sn{}).kind=ln.prototype.kind,t}(),cn={[Me.kind]:Me,[Ws.kind]:Ws,[Ps.kind]:Ps,[Le.kind]:Le,[We.kind]:We,[He.kind]:He,[Ie.kind]:Ie,[ze.kind]:ze,[$e.kind]:$e,[Xe.kind]:Xe,[Ls.kind]:Ls,[_s.kind]:_s,[Us.kind]:Us,[qs.kind]:qs,[ii.kind]:ii,[ni.kind]:ni,[oi.kind]:oi,[pi.kind]:pi,[ui.kind]:ui,[gi.kind]:gi,[Bi.kind]:Bi,[Es.kind]:Es,[Li.kind]:Li,[Wi.kind]:Wi,[Pi.kind]:Pi,[Ei.kind]:Ei,[Vi.kind]:Vi,[Ji.kind]:Ji,[Gi.kind]:Gi,[Zi.kind]:Zi,[en.kind]:en,[sn.kind]:sn,[rn.kind]:rn,[hn.kind]:hn,[dn.kind]:dn,[Ce.kind]:Ce};class mn extends ce{}mn.defaultNodes=cn;class pn extends De{}const un="nofont";pn.OPTIONS={fontURL:"."};class gn extends le{constructor(t={}){super(t,mn,pn),this.chtmlStyles=null,this.font.adaptiveCSS(this.options.adaptiveCSS),this.wrapperUsage=new Ae}addExtension(t){const e=super.addExtension(t);return e.length&&this.options.adaptiveCSS&&this.chtmlStyles&&this.adaptor.insertRules(this.chtmlStyles,e),[]}escaped(t,e){return this.setDocument(e),this.html("span",{},[this.text(t.math)])}styleSheet(t){if(this.chtmlStyles){const t=new he;return this.options.adaptiveCSS&&(this.addWrapperStyles(t),this.updateFontStyles(t)),t.addStyles(this.font.updateDynamicStyles()),this.adaptor.insertRules(this.chtmlStyles,t.getStyleRules()),this.chtmlStyles}const e=this.chtmlStyles=super.styleSheet(t);return this.adaptor.setAttribute(e,"id",gn.STYLESHEETID),this.wrapperUsage.update(),e}updateFontStyles(t){t.addStyles(this.font.updateStyles({}))}addWrapperStyles(t){if(this.options.adaptiveCSS)for(const e of this.wrapperUsage.update()){const s=this.factory.getNodeClass(e);s&&this.addClassStyles(s,t)}else super.addWrapperStyles(t)}addClassStyles(t,e){const s=t;s.autoStyle&&"unknown"!==s.kind&&e.addStyles({["mjx-"+s.kind]:{display:"inline-block","text-align":"left"}}),this.wrapperUsage.add(s.kind),super.addClassStyles(t,e)}processMath(t,e){t.toCHTML([e])}clearCache(){this.cssStyles.clear(),this.font.clearCache(),this.wrapperUsage.clear(),this.chtmlStyles=null}reset(){this.clearCache()}unknownText(t,e,s=null){const i={},n=100/this.math.metrics.scale;if(100!==n&&(i["font-size"]=this.fixed(n,1)+"%",i.padding=ie(75/n)+" 0 "+ie(20/n)+" 0"),"-explicitFont"!==e){const s=ue(t);(1!==s.length||s[0]<119808||s[0]>120831)&&this.cssFontStyles(this.font.getCssFont(e),i)}return null!==s&&(i.width=this.fixed(s*this.math.metrics.scale)+"em"),this.html("mjx-utext",{variant:e,style:i},[this.text(t)])}measureTextNode(t){const e=this.adaptor,s=e.clone(t);e.setStyle(s,"font-family",e.getStyle(s,"font-family").replace(/MJXZERO, /g,""));const i=this.math.metrics.em,n={position:"absolute",top:0,left:0,"white-space":"nowrap","font-size":this.fixed(i,3)+"px"},o=this.html("mjx-measure-text",{style:n},[s]);e.append(e.parent(this.math.start.node),this.container),e.append(this.container,o);let r=e.nodeSize(s,i)[0];return e.remove(this.container),e.remove(o),{w:r,h:.75,d:.2}}}function fn(t,e){const s={};for(const i of Object.keys(t)){const n=t[i];for(const t of Object.keys(n)){s[t]||(s[t]={});const o=n[t];if(i)for(const t of Object.keys(o)){const s=o[parseInt(t)];s[3]||(s[3]={}),e?s[3].ff=e+"-"+i:s[3].f=i}Object.assign(s[t],o)}}return s}gn.NAME="CHTML",gn.OPTIONS=Object.assign(Object.assign({},le.OPTIONS),{adaptiveCSS:!0,matchFontHeight:!0}),gn.commonStyles=Object.assign(Object.assign({},le.commonStyles),{'mjx-container[jax="CHTML"]':{"white-space":"nowrap"},'mjx-container[jax="CHTML"] :focus':{outline:"solid 3px"},'mjx-container [space="1"]':{"margin-left":".111em"},'mjx-container [space="2"]':{"margin-left":".167em"},'mjx-container [space="3"]':{"margin-left":".222em"},'mjx-container [space="4"]':{"margin-left":".278em"},'mjx-container [space="5"]':{"margin-left":".333em"},'mjx-container [rspace="1"]':{"margin-right":".111em"},'mjx-container [rspace="2"]':{"margin-right":".167em"},'mjx-container [rspace="3"]':{"margin-right":".222em"},'mjx-container [rspace="4"]':{"margin-right":".278em"},'mjx-container [rspace="5"]':{"margin-right":".333em"},'mjx-container [size="s"]':{"font-size":"70.7%"},'mjx-container [size="ss"]':{"font-size":"50%"},'mjx-container [size="Tn"]':{"font-size":"60%"},'mjx-container [size="sm"]':{"font-size":"85%"},'mjx-container [size="lg"]':{"font-size":"120%"},'mjx-container [size="Lg"]':{"font-size":"144%"},'mjx-container [size="LG"]':{"font-size":"173%"},'mjx-container [size="hg"]':{"font-size":"207%"},'mjx-container [size="HG"]':{"font-size":"249%"},'mjx-container [width="full"]':{width:"100%"},"mjx-box":{display:"inline-block"},"mjx-block":{display:"block"},"mjx-itable":{display:"inline-table"},"mjx-row":{display:"table-row"},"mjx-row > *":{display:"table-cell"},"mjx-container [inline-breaks]":{display:"inline"},"mjx-mtext":{display:"inline-block"},"mjx-mstyle":{display:"inline-block"},"mjx-merror":{display:"inline-block",color:"red","background-color":"yellow"},"mjx-mphantom":{visibility:"hidden"}}),gn.STYLESHEETID="MJX-CHTML-styles",MathJax.loader&&MathJax.loader.checkVersion("output/chtml","4.0.0-beta.6","output"),yt({_:{output:{chtml_ts:gt,chtml:{DefaultFont:ut,DynamicFonts:ft,FontData:u,Notation:L,Usage:p,Wrapper:a,WrapperFactory:pt,Wrappers_ts:mt,Wrappers:{HtmlNode:ct,TeXAtom:ht,TextNode:dt,maction:et,math:l,menclose:N,mfenced:O,mfrac:P,mglyph:it,mi:c,mmultiscripts:q,mn:x,mo:g,mpadded:M,mroot:F,mrow:A,ms:y,mspace:w,msqrt:H,msubsup:z,mtable:X,mtd:Z,mtext:B,mtr:Y,munderover:J,scriptbase:V,semantics:rt}},common:{Direction:e,FontData:s,LineBBox:i,LinebreakVisitor:n,Notation:S,Wrapper:r,WrapperFactory:o,Wrappers:{TeXAtom:at,TextNode:lt,XmlNode:ot,maction:tt,math:h,menclose:j,mfenced:D,mfrac:W,mglyph:st,mi:d,mmultiscripts:$,mn:f,mo:m,mpadded:v,mroot:E,mrow:T,ms:b,mspace:C,msqrt:R,msubsup:I,mtable:K,mtd:G,mtext:k,mtr:Q,munderover:U,scriptbase:_,semantics:nt}}}}});const xn=MathJax._.util.FunctionList.FunctionList,bn=kt.config||{},yn=t=>(vn.source.hasOwnProperty(t.name)&&(t.name=vn.source[t.name]),!0),kn=t=>{const e=t.name;return e.match(/^(?:[a-z]+:\/)?\/|[a-z]:\\|\[/i)||(t.name="[mathjax]/"+e.replace(/^\.\//,"")),t.addExtension&&!e.match(/\.[^\/]+$/)&&(t.name+=".js"),!0},Bn=t=>{let e;for(;(e=t.name.match(/^\[([^\]]*)\]/))&&vn.paths.hasOwnProperty(e[1]);)t.name=vn.paths[e[1]]+t.name.substring(e[0].length);return!0};var Cn;!function(t){const e=kt.version;function s(s){t.versions.set(Sn.resolvePath(s),e)}t.versions=new Map,t.ready=function(...t){0===t.length&&(t=Array.from(Sn.packages.keys()));const e=[];for(const s of t){const t=Sn.packages.get(s)||new Sn(s,!0);e.push(t.promise)}return Promise.all(e)},t.load=function(...e){if(0===e.length)return Promise.resolve();const s=[];for(const i of e){let e=Sn.packages.get(i);e||(e=new Sn(i),e.provides(vn.provides[i])),e.checkNoLoad(),s.push(e.promise.then((()=>{vn.versionWarnings&&e.isLoaded&&!t.versions.has(Sn.resolvePath(i))&&console.warn(`No version information available for component ${i}`)})))}return Sn.loadAll(),Promise.all(s)},t.preLoad=function(...t){for(const e of t){let t=Sn.packages.get(e);t||(t=new Sn(e,!0),t.provides(vn.provides[e])),t.loaded()}},t.defaultReady=function(){void 0!==wn.startup&&wn.config.startup.ready()},t.getRoot=function(){if("undefined"!=typeof document){const t=document.currentScript||document.getElementById("MathJax-script");if(t)return t.src.replace(/\/[^\/]*$/,"")}return bn?.loader?.paths?.mathjax||bn?.__dirname||"/"},t.checkVersion=function(t,i,n){return s(t),!(!vn.versionWarnings||i===e)&&(console.warn(`Component ${t} uses ${i} of MathJax; version in use is ${e}`),!0)},t.saveVersion=s,t.pathFilters=new xn,t.pathFilters.add(yn,0),t.pathFilters.add(kn,10),t.pathFilters.add(Bn,20)}(Cn||(Cn={}));const wn=kt;if(void 0===wn.loader){bt(wn.config,"loader",{paths:{mathjax:Cn.getRoot()},source:{},dependencies:{},provides:{},load:[],ready:Cn.defaultReady.bind(Cn),failed:t=>console.log(`MathJax(${t.package||"?"}): ${t.message}`),require:null,pathFilters:[],versionWarnings:!0}),yt({loader:Cn});for(const t of wn.config.loader.pathFilters)Array.isArray(t)?Cn.pathFilters.add(t[0],t[1]):Cn.pathFilters.add(t)}const vn=wn.config.loader;class Mn extends Error{constructor(t,e){super(t),this.package=e}}class Sn{get canLoad(){return 0===this.dependencyCount&&!this.noLoad&&!this.isLoading&&!this.hasFailed}static resolvePath(t,e=!0){const s={name:t,original:t,addExtension:e};return Cn.pathFilters.execute(s),s.name}static loadAll(){for(const t of this.packages.values())t.canLoad&&t.load()}constructor(t,e=!1){this.isLoaded=!1,this.isLoading=!1,this.hasFailed=!1,this.dependents=[],this.dependencies=[],this.dependencyCount=0,this.provided=[],this.name=t,this.noLoad=e,Sn.packages.set(t,this),this.promise=this.makePromise(this.makeDependencies())}makeDependencies(){const t=[],e=Sn.packages,s=this.noLoad,i=this.name,n=[];vn.dependencies.hasOwnProperty(i)?n.push(...vn.dependencies[i]):"core"!==i&&n.push("core");for(const i of n){const n=e.get(i)||new Sn(i,s);this.dependencies.indexOf(n)<0&&(n.addDependent(this,s),this.dependencies.push(n),n.isLoaded||(this.dependencyCount++,t.push(n.promise)))}return t}makePromise(t){let e=new Promise(((t,e)=>{this.resolve=t,this.reject=e}));const s=vn[this.name]||{};return s.ready&&(e=e.then((t=>s.ready(this.name)))),t.length&&(t.push(e),e=Promise.all(t).then((t=>t.join(", ")))),s.failed&&e.catch((t=>s.failed(new Mn(t,this.name)))),e}load(){if(!this.isLoaded&&!this.isLoading&&!this.noLoad){this.isLoading=!0;const t=Sn.resolvePath(this.name);vn.require?this.loadCustom(t):this.loadScript(t)}}loadCustom(t){try{const e=vn.require(t);e instanceof Promise?e.then((()=>this.checkLoad())).catch((e=>this.failed("Can't load \""+t+'"\n'+e.message.trim()))):this.checkLoad()}catch(t){this.failed(t.message)}}loadScript(t){const e=document.createElement("script");e.src=t,e.charset="UTF-8",e.onload=t=>this.checkLoad(),e.onerror=e=>this.failed("Can't load \""+t+'"'),document.head.appendChild(e)}loaded(){this.isLoaded=!0,this.isLoading=!1;for(const t of this.dependents)t.requirementSatisfied();for(const t of this.provided)t.loaded();this.resolve(this.name)}failed(t){this.hasFailed=!0,this.isLoading=!1,this.reject(new Mn(t,this.name))}checkLoad(){((vn[this.name]||{}).checkReady||(()=>Promise.resolve()))().then((()=>this.loaded())).catch((t=>this.failed(t)))}requirementSatisfied(){this.dependencyCount&&(this.dependencyCount--,this.canLoad&&this.load())}provides(t=[]){for(const e of t){let t=Sn.packages.get(e);t||(vn.dependencies[e]||(vn.dependencies[e]=[]),vn.dependencies[e].push(e),t=new Sn(e,!0),t.isLoading=!0),this.provided.push(t)}}addDependent(t,e){this.dependents.push(t),e||this.checkNoLoad()}checkNoLoad(){if(this.noLoad){this.noLoad=!1;for(const t of this.dependencies)t.checkNoLoad()}}}Sn.packages=new Map;const jn="undefined"==typeof document?"@mathjax/%%FONT%%-font":"https://cdn.jsdelivr.net/npm/%%FONT%%-font",Ln={config(t,e,s,i){if(MathJax.loader){bt(MathJax.config,t,MathJax.config.output||{});let e=MathJax.config[t],n=e.font||s;if("string"!=typeof n&&(e.fontData=n,e.font=n=n.NAME),"["!==n.charAt(0)){const s=e.fontPath||jn,i=n.match(/^[a-z]+:/)?(n.match(/[^/:\\]*$/)||[t])[0]:n;bt(MathJax.config.loader,"paths",{[i]:i===n?s.replace(/%%FONT%%/g,n):n}),n=`[${i}]`}const o=n.substring(1,n.length-1);o!==s?bt(MathJax.config.loader,`output/${t}`,{checkReady:()=>MathJax.loader.load(`${n}/${t}`).catch((t=>console.log(t)))}):(yt({_:{output:{fonts:{[o]:{[t+"_ts"]:{[i.NAME+"Font"]:i}}}}}}),bt(MathJax,"config",{output:{font:n},[t]:{fontData:i,dynamicPrefix:`${n}/${t}/dynamic`}}),"chtml"===t&&bt(MathJax.config,t,{fontURL:Sn.resolvePath(`${n}/${t}/woff`,!1)}))}MathJax.startup&&(MathJax.startup.registerConstructor(t,e),MathJax.startup.useOutput(t))},loadFont(t,e,s,i){if(!MathJax.loader)return Promise.resolve();i&&MathJax.loader.preLoad(`[${s}]/${e}`);const n=MathJax.config.loader[`output/${e}`];return(n&&n.checkReady?n.checkReady().then(t):t()).catch((t=>console.log(t)))}};Ln.config("chtml",gn,un,pn)})();